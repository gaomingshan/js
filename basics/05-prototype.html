<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå‹ä¸åŸå‹é“¾ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>åŸå‹ä¸åŸå‹é“¾</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>åŸå‹æ˜¯ JavaScript å®ç°ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œä»ä¸­ç»§æ‰¿å±æ€§å’Œæ–¹æ³•ã€‚</p>
            
            <h2>ä¸€ã€ç†è§£åŸå‹</h2>
            
            <h3>1.1 ä¸‰ä¸ªå…³é”®æ¦‚å¿µ</h3>
            <ul>
                <li><strong>prototype</strong>ï¼šå‡½æ•°çš„åŸå‹å¯¹è±¡</li>
                <li><strong>__proto__</strong>ï¼šå¯¹è±¡çš„åŸå‹å¼•ç”¨ï¼ˆéæ ‡å‡†ï¼‰</li>
                <li><strong>constructor</strong>ï¼šæŒ‡å‘æ„é€ å‡½æ•°</li>
            </ul>
            
            <h3>1.2 å…³ç³»å›¾</h3>
            <pre><code>æ„é€ å‡½æ•°.prototype â†’ åŸå‹å¯¹è±¡
å®ä¾‹.__proto__ â†’ æ„é€ å‡½æ•°.prototype
åŸå‹å¯¹è±¡.constructor â†’ æ„é€ å‡½æ•°</code></pre>
            
            <h2>äºŒã€åŸå‹é“¾</h2>
            
            <h3>2.1 ä»€ä¹ˆæ˜¯åŸå‹é“¾</h3>
            <p>å¯¹è±¡é€šè¿‡ __proto__ è¿æ¥èµ·æ¥çš„é“¾å¼ç»“æ„å°±æ˜¯åŸå‹é“¾ã€‚</p>
            
            <pre><code>å®ä¾‹ â†’ æ„é€ å‡½æ•°.prototype â†’ Object.prototype â†’ null</code></pre>
            
            <h3>2.2 å±æ€§æŸ¥æ‰¾</h3>
            <p>è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–åˆ°è¾¾ nullã€‚</p>
            
            <h2>ä¸‰ã€åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2>
            
            <h3>3.1 å­—é¢é‡</h3>
            <pre><code>const obj = { name: 'Alice' };</code></pre>
            
            <h3>3.2 æ„é€ å‡½æ•°</h3>
            <pre><code>function Person(name) {
    this.name = name;
}
const p = new Person('Bob');</code></pre>
            
            <h3>3.3 Object.create()</h3>
            <pre><code>const proto = { greet() { return 'Hello'; } };
const obj = Object.create(proto);</code></pre>
            
            <h2>å››ã€åŸå‹æ–¹æ³•</h2>
            
            <h3>4.1 è®¾ç½®åŸå‹</h3>
            <ul>
                <li><code>Object.create(proto)</code></li>
                <li><code>Object.setPrototypeOf(obj, proto)</code>ï¼ˆä¸æ¨èï¼‰</li>
            </ul>
            
            <h3>4.2 è·å–åŸå‹</h3>
            <ul>
                <li><code>Object.getPrototypeOf(obj)</code></li>
                <li><code>obj.__proto__</code>ï¼ˆéæ ‡å‡†ï¼‰</li>
            </ul>
            
            <h3>4.3 æ£€æµ‹</h3>
            <ul>
                <li><code>obj.hasOwnProperty(key)</code></li>
                <li><code>key in obj</code></li>
                <li><code>obj instanceof Constructor</code></li>
            </ul>
            
            <div class="tip">
                åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå› ä¸ºæ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªæ–¹æ³•ã€‚
            </div>
            
            <div class="nav-links">
                <a href="04-function-advanced.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šé«˜é˜¶å‡½æ•°ä¸æŸ¯é‡ŒåŒ–</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="05-class.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šClass è¯­æ³•</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šåŸå‹å…³ç³»</h3>
                <div class="code-block">
                    <pre><code>function Person(name) {
    this.name = name;
}

Person.prototype.greet = function() {
    return `Hello, I'm ${this.name}`;
};

const alice = new Person('Alice');

console.log('alice.name:', alice.name);
console.log('alice.greet():', alice.greet());

// åŸå‹å…³ç³»
console.log('alice.__proto__ === Person.prototype:', 
    alice.__proto__ === Person.prototype);
console.log('Person.prototype.constructor === Person:', 
    Person.prototype.constructor === Person);
console.log('aliceçš„åŸå‹:', Object.getPrototypeOf(alice));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šåŸå‹é“¾æŸ¥æ‰¾</h3>
                <div class="code-block">
                    <pre><code>const obj = {
    a: 1
};

console.log('obj.a:', obj.a);  // è‡ªèº«å±æ€§
console.log('obj.toString:', typeof obj.toString);  // åŸå‹æ–¹æ³•

// æ£€æŸ¥å±æ€§æ¥æº
console.log('hasOwnProperty("a"):', obj.hasOwnProperty('a'));  // true
console.log('hasOwnProperty("toString"):', 
    obj.hasOwnProperty('toString'));  // false

// in æ“ä½œç¬¦æ£€æŸ¥æ•´ä¸ªåŸå‹é“¾
console.log('"a" in obj:', 'a' in obj);  // true
console.log('"toString" in obj:', 'toString' in obj);  // true

// åŸå‹é“¾
console.log('åŸå‹é“¾:');
console.log('1. obj');
console.log('2. Object.prototype');
console.log('3. null');
console.log('Object.getPrototypeOf(Object.prototype):', 
    Object.getPrototypeOf(Object.prototype));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šObject.create()</h3>
                <div class="code-block">
                    <pre><code>const animal = {
    type: 'Animal',
    speak() {
        console.log(`${this.name} makes a sound`);
    }
};

const dog = Object.create(animal);
dog.name = 'Dog';
dog.bark = function() {
    console.log('Woof!');
};

console.log('dog.type:', dog.type);  // ç»§æ‰¿è‡ª animal
dog.speak();  // ç»§æ‰¿çš„æ–¹æ³•
dog.bark();   // è‡ªå·±çš„æ–¹æ³•

// æ£€æŸ¥åŸå‹
console.log('dogçš„åŸå‹æ˜¯ animal:', 
    Object.getPrototypeOf(dog) === animal);

// åˆ›å»ºçº¯å‡€å¯¹è±¡ï¼ˆæ— åŸå‹ï¼‰
const pureObj = Object.create(null);
console.log('pureObj.toString:', pureObj.toString);  // undefined</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šå…±äº«åŸå‹æ–¹æ³•</h3>
                <div class="code-block">
                    <pre><code>function User(name) {
    this.name = name;
}

// åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•ï¼ˆæ‰€æœ‰å®ä¾‹å…±äº«ï¼‰
User.prototype.sayHi = function() {
    console.log(`Hi, I'm ${this.name}`);
};

const user1 = new User('Alice');
const user2 = new User('Bob');

user1.sayHi();
user2.sayHi();

// éªŒè¯æ–¹æ³•æ˜¯åŒä¸€ä¸ª
console.log('å…±äº«æ–¹æ³•:', user1.sayHi === user2.sayHi);  // true

// å¯¹æ¯”ï¼šå®ä¾‹æ–¹æ³•ï¼ˆæ¯ä¸ªå®ä¾‹éƒ½æœ‰å‰¯æœ¬ï¼‰
function User2(name) {
    this.name = name;
    this.sayHi = function() {
        console.log(`Hi, I'm ${this.name}`);
    };
}

const u1 = new User2('Alice');
const u2 = new User2('Bob');
console.log('å®ä¾‹æ–¹æ³•ä¸å…±äº«:', u1.sayHi === u2.sayHi);  // false</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šåŸå‹ç»§æ‰¿</h3>
                <div class="code-block">
                    <pre><code>// çˆ¶ç±»
function Animal(name) {
    this.name = name;
}

Animal.prototype.eat = function() {
    console.log(`${this.name} is eating`);
};

// å­ç±»
function Dog(name, breed) {
    Animal.call(this, name);  // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
    this.breed = breed;
}

// è®¾ç½®åŸå‹ç»§æ‰¿
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

// æ·»åŠ å­ç±»æ–¹æ³•
Dog.prototype.bark = function() {
    console.log(`${this.name} barks!`);
};

const myDog = new Dog('Buddy', 'Golden Retriever');

console.log('name:', myDog.name);
console.log('breed:', myDog.breed);
myDog.eat();   // ç»§æ‰¿è‡ª Animal
myDog.bark();  // è‡ªå·±çš„æ–¹æ³•

console.log('instanceof Animal:', myDog instanceof Animal);
console.log('instanceof Dog:', myDog instanceof Dog);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
