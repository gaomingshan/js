<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math ä¸ Date - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>Math ä¸ Date</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>Math å¯¹è±¡æä¾›æ•°å­¦è¿ç®—åŠŸèƒ½ï¼ŒDate å¯¹è±¡ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚è¿™ä¸¤ä¸ªå†…ç½®å¯¹è±¡æ˜¯ JavaScript å¼€å‘ä¸­çš„å¸¸ç”¨å·¥å…·ã€‚</p>
            
            <h2>ä¸€ã€Math å¯¹è±¡</h2>
            
            <h3>1.1 Math å¸¸é‡</h3>
            <table>
                <thead>
                    <tr>
                        <th>å¸¸é‡</th>
                        <th>è¯´æ˜</th>
                        <th>å€¼</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Math.PI</code></td>
                        <td>åœ†å‘¨ç‡</td>
                        <td>3.141592653589793</td>
                    </tr>
                    <tr>
                        <td><code>Math.E</code></td>
                        <td>è‡ªç„¶å¯¹æ•°çš„åº•</td>
                        <td>2.718281828459045</td>
                    </tr>
                    <tr>
                        <td><code>Math.LN2</code></td>
                        <td>2çš„è‡ªç„¶å¯¹æ•°</td>
                        <td>0.6931471805599453</td>
                    </tr>
                    <tr>
                        <td><code>Math.LN10</code></td>
                        <td>10çš„è‡ªç„¶å¯¹æ•°</td>
                        <td>2.302585092994046</td>
                    </tr>
                    <tr>
                        <td><code>Math.SQRT2</code></td>
                        <td>2çš„å¹³æ–¹æ ¹</td>
                        <td>1.4142135623730951</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>1.2 å–æ•´æ–¹æ³•</h3>
            <pre><code>Math.floor(4.7);    // 4ï¼ˆå‘ä¸‹å–æ•´ï¼‰
Math.ceil(4.1);     // 5ï¼ˆå‘ä¸Šå–æ•´ï¼‰
Math.round(4.5);    // 5ï¼ˆå››èˆäº”å…¥ï¼‰
Math.trunc(4.9);    // 4ï¼ˆæˆªæ–­å°æ•°ï¼‰</code></pre>
            
            <h3>1.3 æœ€å¤§å€¼å’Œæœ€å°å€¼</h3>
            <pre><code>Math.max(1, 2, 3, 4, 5);        // 5
Math.min(1, 2, 3, 4, 5);        // 1

// æ•°ç»„æ±‚æœ€å¤§æœ€å°å€¼
const arr = [1, 2, 3, 4, 5];
Math.max(...arr);               // 5
Math.min(...arr);               // 1</code></pre>
            
            <h3>1.4 ç»å¯¹å€¼å’Œç¬¦å·</h3>
            <pre><code>Math.abs(-5);       // 5
Math.sign(-5);      // -1ï¼ˆè´Ÿæ•°è¿”å›-1ï¼‰
Math.sign(0);       // 0
Math.sign(5);       // 1ï¼ˆæ­£æ•°è¿”å›1ï¼‰</code></pre>
            
            <h3>1.5 å¹‚è¿ç®—</h3>
            <pre><code>Math.pow(2, 3);     // 8ï¼ˆ2çš„3æ¬¡æ–¹ï¼‰
Math.sqrt(16);      // 4ï¼ˆå¹³æ–¹æ ¹ï¼‰
Math.cbrt(27);      // 3ï¼ˆç«‹æ–¹æ ¹ï¼‰

// ES2016 å¹‚è¿ç®—ç¬¦
2 ** 3;             // 8</code></pre>
            
            <h3>1.6 éšæœºæ•°</h3>
            <pre><code>// è¿”å› [0, 1) ä¹‹é—´çš„éšæœºæ•°
Math.random();

// ç”Ÿæˆ [min, max) ä¹‹é—´çš„éšæœºæ•´æ•°
function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
}

// ç”Ÿæˆ [min, max] ä¹‹é—´çš„éšæœºæ•´æ•°
function randomIntInclusive(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}</code></pre>
            
            <h3>1.7 ä¸‰è§’å‡½æ•°</h3>
            <pre><code>Math.sin(Math.PI / 2);   // 1
Math.cos(0);             // 1
Math.tan(Math.PI / 4);   // 1

Math.asin(1);            // Ï€/2
Math.acos(1);            // 0
Math.atan(1);            // Ï€/4</code></pre>
            
            <h3>1.8 å¯¹æ•°å‡½æ•°</h3>
            <pre><code>Math.log(Math.E);        // 1ï¼ˆè‡ªç„¶å¯¹æ•°ï¼‰
Math.log10(100);         // 2ï¼ˆä»¥10ä¸ºåº•ï¼‰
Math.log2(8);            // 3ï¼ˆä»¥2ä¸ºåº•ï¼‰</code></pre>
            
            <h2>äºŒã€Date å¯¹è±¡</h2>
            
            <h3>2.1 åˆ›å»º Date å¯¹è±¡</h3>
            <pre><code>// å½“å‰æ—¶é—´
const now = new Date();

// ä»æ—¶é—´æˆ³
const date1 = new Date(1640000000000);

// ä»å­—ç¬¦ä¸²
const date2 = new Date('2024-01-15');
const date3 = new Date('2024-01-15T10:30:00');

// ä»å¹´æœˆæ—¥
const date4 = new Date(2024, 0, 15);  // æœˆä»½ä»0å¼€å§‹
const date5 = new Date(2024, 0, 15, 10, 30, 0);</code></pre>
            
            <h3>2.2 è·å–æ—¥æœŸæ—¶é—´</h3>
            <pre><code>const date = new Date('2024-01-15T10:30:45');

date.getFullYear();      // 2024
date.getMonth();         // 0ï¼ˆ0-11ï¼‰
date.getDate();          // 15ï¼ˆ1-31ï¼‰
date.getDay();           // 1ï¼ˆ0-6ï¼Œ0æ˜¯å‘¨æ—¥ï¼‰

date.getHours();         // 10ï¼ˆ0-23ï¼‰
date.getMinutes();       // 30ï¼ˆ0-59ï¼‰
date.getSeconds();       // 45ï¼ˆ0-59ï¼‰
date.getMilliseconds();  // 0ï¼ˆ0-999ï¼‰

date.getTime();          // æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</code></pre>
            
            <h3>2.3 è®¾ç½®æ—¥æœŸæ—¶é—´</h3>
            <pre><code>const date = new Date();

date.setFullYear(2024);
date.setMonth(0);        // 0æ˜¯1æœˆ
date.setDate(15);
date.setHours(10);
date.setMinutes(30);
date.setSeconds(45);</code></pre>
            
            <h3>2.4 UTC æ—¶é—´</h3>
            <pre><code>const date = new Date();

date.getUTCFullYear();
date.getUTCMonth();
date.getUTCDate();
date.getUTCHours();

// æ—¶åŒºåç§»ï¼ˆåˆ†é’Ÿï¼‰
date.getTimezoneOffset(); // ä¸­å›½æ˜¯ -480</code></pre>
            
            <h3>2.5 æ—¥æœŸæ ¼å¼åŒ–</h3>
            <pre><code>const date = new Date('2024-01-15T10:30:45');

// ISO æ ¼å¼
date.toISOString();          // "2024-01-15T02:30:45.000Z"

// æœ¬åœ°æ ¼å¼
date.toLocaleDateString();   // "2024/1/15"
date.toLocaleTimeString();   // "10:30:45"
date.toLocaleString();       // "2024/1/15 10:30:45"

// å­—ç¬¦ä¸²æ ¼å¼
date.toString();             // å®Œæ•´å­—ç¬¦ä¸²
date.toDateString();         // æ—¥æœŸéƒ¨åˆ†
date.toTimeString();         // æ—¶é—´éƒ¨åˆ†</code></pre>
            
            <h3>2.6 æ—¥æœŸè®¡ç®—</h3>
            <pre><code>const date = new Date('2024-01-15');

// åŠ å‡å¤©æ•°
date.setDate(date.getDate() + 7);  // åŠ 7å¤©
date.setDate(date.getDate() - 7);  // å‡7å¤©

// åŠ å‡æœˆä»½
date.setMonth(date.getMonth() + 1); // åŠ 1ä¸ªæœˆ

// è®¡ç®—æ—¶é—´å·®
const date1 = new Date('2024-01-01');
const date2 = new Date('2024-01-15');
const diff = date2 - date1;  // æ¯«ç§’å·®
const days = diff / (1000 * 60 * 60 * 24); // å¤©æ•°</code></pre>
            
            <h3>2.7 é™æ€æ–¹æ³•</h3>
            <pre><code>// å½“å‰æ—¶é—´æˆ³
Date.now();

// ä»å­—ç¬¦ä¸²è§£æ
Date.parse('2024-01-15');  // æ—¶é—´æˆ³

// ä»å‚æ•°åˆ›å»ºæ—¶é—´æˆ³
Date.UTC(2024, 0, 15, 10, 30, 0);</code></pre>
            
            <h2>ä¸‰ã€å®ç”¨æŠ€å·§</h2>
            
            <h3>3.1 åˆ¤æ–­é—°å¹´</h3>
            <pre><code>function isLeapYear(year) {
    return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
}

// æˆ–ä½¿ç”¨ Date
function isLeapYear(year) {
    return new Date(year, 1, 29).getDate() === 29;
}</code></pre>
            
            <h3>3.2 è·å–æœˆä»½å¤©æ•°</h3>
            <pre><code>function getDaysInMonth(year, month) {
    return new Date(year, month + 1, 0).getDate();
}

getDaysInMonth(2024, 1);  // 29ï¼ˆ2024å¹´2æœˆï¼‰</code></pre>
            
            <h3>3.3 æ ¼å¼åŒ–æ—¥æœŸ</h3>
            <pre><code>function formatDate(date, format) {
    const map = {
        'YYYY': date.getFullYear(),
        'MM': String(date.getMonth() + 1).padStart(2, '0'),
        'DD': String(date.getDate()).padStart(2, '0'),
        'HH': String(date.getHours()).padStart(2, '0'),
        'mm': String(date.getMinutes()).padStart(2, '0'),
        'ss': String(date.getSeconds()).padStart(2, '0')
    };
    
    return format.replace(/YYYY|MM|DD|HH|mm|ss/g, match => map[match]);
}

const date = new Date('2024-01-15T10:30:45');
formatDate(date, 'YYYY-MM-DD HH:mm:ss');
// "2024-01-15 10:30:45"</code></pre>
            
            <h3>3.4 ç›¸å¯¹æ—¶é—´</h3>
            <pre><code>function timeAgo(date) {
    const seconds = Math.floor((Date.now() - date) / 1000);
    
    if (seconds < 60) return `${seconds}ç§’å‰`;
    if (seconds < 3600) return `${Math.floor(seconds / 60)}åˆ†é’Ÿå‰`;
    if (seconds < 86400) return `${Math.floor(seconds / 3600)}å°æ—¶å‰`;
    return `${Math.floor(seconds / 86400)}å¤©å‰`;
}</code></pre>
            
            <h2>å››ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <strong>Math å¯¹è±¡ï¼š</strong>
                <ul>
                    <li>ä½¿ç”¨ Math.random() ç”Ÿæˆéšæœºæ•°æ—¶æ³¨æ„èŒƒå›´</li>
                    <li>æµ®ç‚¹æ•°è¿ç®—æ³¨æ„ç²¾åº¦é—®é¢˜</li>
                    <li>Math å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„</li>
                </ul>
                
                <strong>Date å¯¹è±¡ï¼š</strong>
                <ul>
                    <li>æœˆä»½ä» 0 å¼€å§‹ï¼ˆ0-11ï¼‰</li>
                    <li>ä½¿ç”¨ Date.now() è·å–æ—¶é—´æˆ³æ€§èƒ½æ›´å¥½</li>
                    <li>é¿å…ä½¿ç”¨å­—ç¬¦ä¸²è§£ææ—¥æœŸï¼ˆä¸åŒæµè§ˆå™¨è¡Œä¸ºä¸ä¸€è‡´ï¼‰</li>
                    <li>å¤„ç†æ—¶åŒºæ—¶ä¼˜å…ˆä½¿ç”¨ UTC æ–¹æ³•</li>
                    <li>è€ƒè™‘ä½¿ç”¨æ—¥æœŸåº“ï¼ˆå¦‚ date-fnsã€Day.jsï¼‰å¤„ç†å¤æ‚åœºæ™¯</li>
                </ul>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-math-object" target="_blank">ECMAScript - Math Object</a></li>
                <li><a href="https://tc39.es/ecma262/#sec-date-objects" target="_blank">ECMAScript - Date Objects</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math" target="_blank">MDN - Math</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">MDN - Date</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="07-regex.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šæ­£åˆ™è¡¨è¾¾å¼</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="08-set-map.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šSet ä¸ Map</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šMath åŸºç¡€æ–¹æ³•</h3>
                <div class="code-block">
                    <pre><code>// å¸¸é‡
console.log('Math.PI:', Math.PI);
console.log('Math.E:', Math.E);

// å–æ•´
console.log('\nå–æ•´:');
console.log('floor(4.7):', Math.floor(4.7));
console.log('ceil(4.1):', Math.ceil(4.1));
console.log('round(4.5):', Math.round(4.5));
console.log('trunc(4.9):', Math.trunc(4.9));

// æœ€å¤§æœ€å°å€¼
console.log('\nmax(1,2,3,4,5):', Math.max(1, 2, 3, 4, 5));
console.log('min(1,2,3,4,5):', Math.min(1, 2, 3, 4, 5));

// æ•°ç»„
const arr = [3, 1, 4, 1, 5, 9];
console.log('array max:', Math.max(...arr));
console.log('array min:', Math.min(...arr));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šMath å¹‚è¿ç®—å’Œéšæœºæ•°</h3>
                <div class="code-block">
                    <pre><code>// å¹‚è¿ç®—
console.log('pow(2, 3):', Math.pow(2, 3));
console.log('2 ** 3:', 2 ** 3);
console.log('sqrt(16):', Math.sqrt(16));
console.log('cbrt(27):', Math.cbrt(27));

// éšæœºæ•°
console.log('\nrandom():', Math.random());

// ç”Ÿæˆ 1-10 çš„éšæœºæ•´æ•°
function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

console.log('\néšæœºæ•´æ•° [1,10]:');
for (let i = 0; i < 5; i++) {
    console.log('  ', randomInt(1, 10));
}

// éšæœºæ‰“ä¹±æ•°ç»„
function shuffle(arr) {
    const result = [...arr];
    for (let i = result.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [result[i], result[j]] = [result[j], result[i]];
    }
    return result;
}
console.log('\nshuffle:', shuffle([1, 2, 3, 4, 5]));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šDate åˆ›å»ºå’Œè·å–</h3>
                <div class="code-block">
                    <pre><code>// åˆ›å»º Date
const now = new Date();
console.log('now:', now);

const date = new Date('2024-01-15T10:30:45');
console.log('\ndate:', date);

// è·å–æ—¥æœŸæ—¶é—´
console.log('\ngetFullYear:', date.getFullYear());
console.log('getMonth:', date.getMonth(), '(0-11)');
console.log('getDate:', date.getDate());
console.log('getDay:', date.getDay(), '(0=å‘¨æ—¥)');

console.log('\ngetHours:', date.getHours());
console.log('getMinutes:', date.getMinutes());
console.log('getSeconds:', date.getSeconds());

console.log('\ngetTime:', date.getTime());
console.log('Date.now():', Date.now());</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šDate æ ¼å¼åŒ–</h3>
                <div class="code-block">
                    <pre><code>const date = new Date('2024-01-15T10:30:45');

// ISO æ ¼å¼
console.log('toISOString:', date.toISOString());

// æœ¬åœ°æ ¼å¼
console.log('\ntoLocaleDateString:', date.toLocaleDateString('zh-CN'));
console.log('toLocaleTimeString:', date.toLocaleTimeString('zh-CN'));
console.log('toLocaleString:', date.toLocaleString('zh-CN'));

// å­—ç¬¦ä¸²æ ¼å¼
console.log('\ntoString:', date.toString());
console.log('toDateString:', date.toDateString());
console.log('toTimeString:', date.toTimeString());

// è‡ªå®šä¹‰æ ¼å¼åŒ–
function formatDate(date, format) {
    const map = {
        'YYYY': date.getFullYear(),
        'MM': String(date.getMonth() + 1).padStart(2, '0'),
        'DD': String(date.getDate()).padStart(2, '0'),
        'HH': String(date.getHours()).padStart(2, '0'),
        'mm': String(date.getMinutes()).padStart(2, '0'),
        'ss': String(date.getSeconds()).padStart(2, '0')
    };
    return format.replace(/YYYY|MM|DD|HH|mm|ss/g, m => map[m]);
}

console.log('\nè‡ªå®šä¹‰æ ¼å¼:');
console.log(formatDate(date, 'YYYY-MM-DD'));
console.log(formatDate(date, 'YYYY/MM/DD HH:mm:ss'));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šDate è®¡ç®—</h3>
                <div class="code-block">
                    <pre><code>// æ—¥æœŸè®¡ç®—
const date = new Date('2024-01-15');
console.log('åŸå§‹æ—¥æœŸ:', date.toLocaleDateString('zh-CN'));

// åŠ 7å¤©
date.setDate(date.getDate() + 7);
console.log('åŠ 7å¤©:', date.toLocaleDateString('zh-CN'));

// å‡7å¤©
date.setDate(date.getDate() - 7);
console.log('å‡7å¤©:', date.toLocaleDateString('zh-CN'));

// æ—¶é—´å·®
const date1 = new Date('2024-01-01');
const date2 = new Date('2024-01-15');
const diff = date2 - date1;
const days = diff / (1000 * 60 * 60 * 24);
console.log('\næ—¶é—´å·®:', days, 'å¤©');

// è·å–æœˆä»½å¤©æ•°
function getDaysInMonth(year, month) {
    return new Date(year, month + 1, 0).getDate();
}
console.log('\n2024å¹´2æœˆå¤©æ•°:', getDaysInMonth(2024, 1));
console.log('2023å¹´2æœˆå¤©æ•°:', getDaysInMonth(2023, 1));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šå®ç”¨æŠ€å·§</h3>
                <div class="code-block">
                    <pre><code>// åˆ¤æ–­é—°å¹´
function isLeapYear(year) {
    return new Date(year, 1, 29).getDate() === 29;
}
console.log('2024æ˜¯é—°å¹´?', isLeapYear(2024));
console.log('2023æ˜¯é—°å¹´?', isLeapYear(2023));

// ç›¸å¯¹æ—¶é—´
function timeAgo(date) {
    const seconds = Math.floor((Date.now() - date) / 1000);
    if (seconds < 60) return `${seconds}ç§’å‰`;
    if (seconds < 3600) return `${Math.floor(seconds / 60)}åˆ†é’Ÿå‰`;
    if (seconds < 86400) return `${Math.floor(seconds / 3600)}å°æ—¶å‰`;
    return `${Math.floor(seconds / 86400)}å¤©å‰`;
}

const past1 = new Date(Date.now() - 30 * 1000);
const past2 = new Date(Date.now() - 5 * 60 * 1000);
const past3 = new Date(Date.now() - 2 * 60 * 60 * 1000);
console.log('\nç›¸å¯¹æ—¶é—´:');
console.log('30ç§’å‰:', timeAgo(past1));
console.log('5åˆ†é’Ÿå‰:', timeAgo(past2));
console.log('2å°æ—¶å‰:', timeAgo(past3));

// å·¥ä½œæ—¥åˆ¤æ–­
function isWeekday(date) {
    const day = date.getDay();
    return day !== 0 && day !== 6;
}
console.log('\nä»Šå¤©æ˜¯å·¥ä½œæ—¥?', isWeekday(new Date()));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
