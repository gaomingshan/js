<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°ç»„é«˜çº§æ“ä½œ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>æ•°ç»„é«˜çº§æ“ä½œ</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>é™¤äº†åŸºæœ¬çš„é«˜é˜¶æ–¹æ³•ï¼ŒJavaScript æ•°ç»„è¿˜æä¾›äº†è®¸å¤šé«˜çº§æ“ä½œå’ŒæŠ€å·§ï¼ŒæŒæ¡è¿™äº›å¯ä»¥è®©ä»£ç æ›´åŠ ä¼˜é›…å’Œé«˜æ•ˆã€‚</p>
            
            <h2>ä¸€ã€æ•°ç»„è§£æ„</h2>
            
            <h3>1.1 åŸºæœ¬è§£æ„</h3>
            <pre><code>const arr = [1, 2, 3, 4, 5];

// åŸºæœ¬è§£æ„
const [a, b, c] = arr;
console.log(a, b, c);  // 1 2 3

// è·³è¿‡å…ƒç´ 
const [first, , third] = arr;
console.log(first, third);  // 1 3

// å‰©ä½™å…ƒç´ 
const [head, ...tail] = arr;
console.log(head);  // 1
console.log(tail);  // [2, 3, 4, 5]</code></pre>
            
            <h3>1.2 é»˜è®¤å€¼</h3>
            <pre><code>const [a = 10, b = 20] = [1];
console.log(a, b);  // 1 20</code></pre>
            
            <h3>1.3 äº¤æ¢å˜é‡</h3>
            <pre><code>let x = 1, y = 2;
[x, y] = [y, x];
console.log(x, y);  // 2 1</code></pre>
            
            <h2>äºŒã€æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰</h2>
            
            <h3>2.1 å¤åˆ¶æ•°ç»„</h3>
            <pre><code>const original = [1, 2, 3];
const copy = [...original];

// æµ…æ‹·è´
copy.push(4);
console.log(original);  // [1, 2, 3]
console.log(copy);      // [1, 2, 3, 4]</code></pre>
            
            <h3>2.2 åˆå¹¶æ•°ç»„</h3>
            <pre><code>const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const merged = [...arr1, ...arr2];
// [1, 2, 3, 4, 5, 6]</code></pre>
            
            <h3>2.3 å±•å¼€å­—ç¬¦ä¸²</h3>
            <pre><code>const str = 'hello';
const chars = [...str];
// ['h', 'e', 'l', 'l', 'o']</code></pre>
            
            <h3>2.4 å‡½æ•°å‚æ•°</h3>
            <pre><code>function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}

sum(1, 2, 3, 4, 5);  // 15</code></pre>
            
            <h2>ä¸‰ã€æ•°ç»„æ–¹æ³•ç»„åˆ</h2>
            
            <h3>3.1 at() æ–¹æ³•ï¼ˆES2022ï¼‰</h3>
            <p>æ”¯æŒè´Ÿç´¢å¼•çš„æ•°ç»„è®¿é—®ï¼š</p>
            
            <pre><code>const arr = [1, 2, 3, 4, 5];

arr.at(0);   // 1
arr.at(-1);  // 5ï¼ˆæœ€åä¸€ä¸ªï¼‰
arr.at(-2);  // 4ï¼ˆå€’æ•°ç¬¬äºŒä¸ªï¼‰</code></pre>
            
            <h3>3.2 with() æ–¹æ³•ï¼ˆES2023ï¼‰</h3>
            <p>ä¸æ”¹å˜åŸæ•°ç»„çš„å…ƒç´ æ›¿æ¢ï¼š</p>
            
            <pre><code>const arr = [1, 2, 3, 4, 5];
const newArr = arr.with(2, 99);
// arr: [1, 2, 3, 4, 5]ï¼ˆä¸å˜ï¼‰
// newArr: [1, 2, 99, 4, 5]</code></pre>
            
            <h3>3.3 copyWithin()</h3>
            <p>å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°å¦ä¸€ä¸ªä½ç½®ï¼š</p>
            
            <pre><code>const arr = [1, 2, 3, 4, 5];
arr.copyWithin(0, 3);  // ä»ç´¢å¼•3å¼€å§‹å¤åˆ¶åˆ°ç´¢å¼•0
// [4, 5, 3, 4, 5]</code></pre>
            
            <h3>3.4 fill()</h3>
            <p>å¡«å……æ•°ç»„ï¼š</p>
            
            <pre><code>const arr = new Array(5).fill(0);
// [0, 0, 0, 0, 0]

arr.fill(1, 2, 4);  // ä»ç´¢å¼•2åˆ°4å¡«å……1
// [0, 0, 1, 1, 0]</code></pre>
            
            <h2>å››ã€æ•°ç»„æœç´¢å’Œåˆ¤æ–­</h2>
            
            <h3>4.1 indexOf() / lastIndexOf()</h3>
            <pre><code>const arr = [1, 2, 3, 2, 1];

arr.indexOf(2);      // 1ï¼ˆç¬¬ä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼‰
arr.lastIndexOf(2);  // 3ï¼ˆæœ€åä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼‰
arr.indexOf(5);      // -1ï¼ˆä¸å­˜åœ¨ï¼‰</code></pre>
            
            <h3>4.2 Array.isArray()</h3>
            <pre><code>Array.isArray([]);        // true
Array.isArray({});        // false
Array.isArray('array');   // false</code></pre>
            
            <h2>äº”ã€æ•°ç»„è½¬æ¢</h2>
            
            <h3>5.1 Array.from()</h3>
            <p>ä»ç±»æ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡åˆ›å»ºæ•°ç»„ï¼š</p>
            
            <pre><code>// ä»å­—ç¬¦ä¸²
Array.from('hello');  // ['h', 'e', 'l', 'l', 'o']

// ä» Set
Array.from(new Set([1, 2, 2, 3]));  // [1, 2, 3]

// ä»ç±»æ•°ç»„å¯¹è±¡
Array.from({ length: 3, 0: 'a', 1: 'b', 2: 'c' });
// ['a', 'b', 'c']

// ä½¿ç”¨æ˜ å°„å‡½æ•°
Array.from([1, 2, 3], x => x * 2);  // [2, 4, 6]

// ç”Ÿæˆæ•°å­—åºåˆ—
Array.from({ length: 5 }, (_, i) => i);
// [0, 1, 2, 3, 4]</code></pre>
            
            <h3>5.2 Array.of()</h3>
            <p>åˆ›å»ºåŒ…å«å‚æ•°çš„æ•°ç»„ï¼š</p>
            
            <pre><code>Array.of(1, 2, 3);     // [1, 2, 3]
Array.of(7);           // [7]ï¼ˆä¸åŒäº new Array(7)ï¼‰

// å¯¹æ¯”
new Array(7);          // [ç©º Ã— 7]
Array.of(7);           // [7]</code></pre>
            
            <h2>å…­ã€æ•°ç»„åˆ†ç»„ï¼ˆES2024ï¼‰</h2>
            
            <h3>6.1 Object.groupBy()</h3>
            <pre><code>const people = [
    { name: 'Alice', age: 25 },
    { name: 'Bob', age: 30 },
    { name: 'Charlie', age: 25 }
];

const grouped = Object.groupBy(people, p => p.age);
// {
//   25: [{ name: 'Alice', age: 25 }, { name: 'Charlie', age: 25 }],
//   30: [{ name: 'Bob', age: 30 }]
// }</code></pre>
            
            <h3>6.2 Map.groupBy()</h3>
            <pre><code>const grouped = Map.groupBy(people, p => p.age);
// Map {
//   25 => [{ name: 'Alice', age: 25 }, { name: 'Charlie', age: 25 }],
//   30 => [{ name: 'Bob', age: 30 }]
// }</code></pre>
            
            <h2>ä¸ƒã€å¤šç»´æ•°ç»„</h2>
            
            <h3>7.1 åˆ›å»ºäºŒç»´æ•°ç»„</h3>
            <pre><code>// é”™è¯¯æ–¹å¼ï¼ˆå¼•ç”¨ç›¸åŒï¼‰
const wrong = new Array(3).fill([]);
wrong[0].push(1);  // æ‰€æœ‰è¡Œéƒ½è¢«ä¿®æ”¹ï¼

// æ­£ç¡®æ–¹å¼
const matrix = Array.from({ length: 3 }, () => []);
const matrix2 = Array(3).fill(null).map(() => []);</code></pre>
            
            <h3>7.2 éå†äºŒç»´æ•°ç»„</h3>
            <pre><code>const matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
];

// åµŒå¥—å¾ªç¯
for (let i = 0; i < matrix.length; i++) {
    for (let j = 0; j < matrix[i].length; j++) {
        console.log(matrix[i][j]);
    }
}

// ä½¿ç”¨ flat
matrix.flat();  // [1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
            
            <h2>å…«ã€æ•°ç»„æ€§èƒ½ä¼˜åŒ–</h2>
            
            <h3>8.1 é¿å…ç¨€ç–æ•°ç»„</h3>
            <div class="warning">
                <pre><code>// ä¸æ¨è
const sparse = new Array(1000);
sparse[999] = 1;

// æ¨è
const dense = Array(1000).fill(0);
dense[999] = 1;</code></pre>
            </div>
            
            <h3>8.2 æå‰åˆ†é…å®¹é‡</h3>
            <pre><code>// å¦‚æœçŸ¥é“æ•°ç»„å¤§å°ï¼Œæå‰åˆ†é…
const arr = new Array(1000);

// é¿å…é¢‘ç¹æ‰©å®¹
for (let i = 0; i < 1000; i++) {
    arr[i] = i;
}</code></pre>
            
            <h3>8.3 ä½¿ç”¨ for å¾ªç¯ä»£æ›¿æ–¹æ³•é“¾</h3>
            <div class="tip">
                å¯¹äºå¤§æ•°ç»„å’Œæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼Œä¼ ç»Ÿ for å¾ªç¯æ¯”æ–¹æ³•é“¾æ›´å¿«ï¼š
                
                <pre><code>// æ–¹æ³•é“¾ï¼ˆå¯è¯»æ€§å¥½ï¼‰
const result = largeArray
    .filter(x => x > 10)
    .map(x => x * 2)
    .reduce((a, b) => a + b, 0);

// for å¾ªç¯ï¼ˆæ€§èƒ½å¥½ï¼‰
let result = 0;
for (let i = 0; i < largeArray.length; i++) {
    if (largeArray[i] > 10) {
        result += largeArray[i] * 2;
    }
}</code></pre>
            </div>
            
            <h2>ä¹ã€å®ç”¨æŠ€å·§</h2>
            
            <h3>9.1 æ•°ç»„å»é‡</h3>
            <pre><code>// ä½¿ç”¨ Set
const unique = [...new Set(arr)];

// ä½¿ç”¨ filter
const unique = arr.filter((item, index) => 
    arr.indexOf(item) === index
);</code></pre>
            
            <h3>9.2 æ•°ç»„æ‰“ä¹±</h3>
            <pre><code>function shuffle(arr) {
    const result = [...arr];
    for (let i = result.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [result[i], result[j]] = [result[j], result[i]];
    }
    return result;
}</code></pre>
            
            <h3>9.3 æ•°ç»„åˆ†ç»„</h3>
            <pre><code>function chunk(arr, size) {
    return Array.from(
        { length: Math.ceil(arr.length / size) },
        (_, i) => arr.slice(i * size, i * size + size)
    );
}

chunk([1, 2, 3, 4, 5, 6, 7], 3);
// [[1, 2, 3], [4, 5, 6], [7]]</code></pre>
            
            <h3>9.4 æ•°ç»„æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†</h3>
            <pre><code>const arr1 = [1, 2, 3, 4];
const arr2 = [3, 4, 5, 6];

// äº¤é›†
const intersection = arr1.filter(x => arr2.includes(x));
// [3, 4]

// å¹¶é›†
const union = [...new Set([...arr1, ...arr2])];
// [1, 2, 3, 4, 5, 6]

// å·®é›†
const difference = arr1.filter(x => !arr2.includes(x));
// [1, 2]</code></pre>
            
            <h3>9.5 æ•°ç»„æ±‚æœ€å¤§/æœ€å°å€¼</h3>
            <pre><code>const numbers = [3, 1, 4, 1, 5, 9, 2, 6];

const max = Math.max(...numbers);
const min = Math.min(...numbers);

// æˆ–ä½¿ç”¨ reduce
const max = numbers.reduce((a, b) => Math.max(a, b));
const min = numbers.reduce((a, b) => Math.min(a, b));</code></pre>
            
            <h2>åã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>ä¼˜å…ˆä½¿ç”¨ä¸å¯å˜æ–¹æ³•</strong>ï¼šmap/filter/slice ä»£æ›¿ splice/push</li>
                    <li><strong>ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦</strong>ï¼šå¤åˆ¶å’Œåˆå¹¶æ•°ç»„</li>
                    <li><strong>é¿å…ç›´æ¥ä¿®æ”¹æ•°ç»„</strong>ï¼šä¿æŒæ•°æ®ä¸å¯å˜æ€§</li>
                    <li><strong>ä½¿ç”¨ Array.from</strong>ï¼šè½¬æ¢ç±»æ•°ç»„å¯¹è±¡</li>
                    <li><strong>åˆç†ä½¿ç”¨è§£æ„</strong>ï¼šç®€åŒ–ä»£ç </li>
                    <li><strong>æ³¨æ„æ€§èƒ½</strong>ï¼šå¤§æ•°ç»„ä½¿ç”¨ for å¾ªç¯</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-array-objects" target="_blank">ECMAScript - Array Objects</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">MDN - Array</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="06-array-methods.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šæ•°ç»„é«˜é˜¶æ–¹æ³•</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="06-typed-array.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šTypedArray</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šæ•°ç»„è§£æ„</h3>
                <div class="code-block">
                    <pre><code>const arr = [1, 2, 3, 4, 5];

// åŸºæœ¬è§£æ„
const [a, b, c] = arr;
console.log('a, b, c:', a, b, c);

// è·³è¿‡å…ƒç´ 
const [first, , third] = arr;
console.log('first, third:', first, third);

// å‰©ä½™å…ƒç´ 
const [head, ...tail] = arr;
console.log('head:', head);
console.log('tail:', tail);

// é»˜è®¤å€¼
const [x = 10, y = 20, z = 30] = [1, 2];
console.log('\né»˜è®¤å€¼:', x, y, z);

// äº¤æ¢å˜é‡
let m = 1, n = 2;
console.log('\näº¤æ¢å‰:', m, n);
[m, n] = [n, m];
console.log('äº¤æ¢å:', m, n);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šæ‰©å±•è¿ç®—ç¬¦</h3>
                <div class="code-block">
                    <pre><code>// å¤åˆ¶æ•°ç»„
const original = [1, 2, 3];
const copy = [...original];
copy.push(4);
console.log('original:', original);
console.log('copy:', copy);

// åˆå¹¶æ•°ç»„
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const merged = [...arr1, ...arr2];
console.log('\nmerged:', merged);

// å±•å¼€å­—ç¬¦ä¸²
const str = 'hello';
const chars = [...str];
console.log('\nchars:', chars);

// å‡½æ•°å‚æ•°
function sum(...numbers) {
    return numbers.reduce((a, b) => a + b, 0);
}
console.log('\nsum(1,2,3,4,5):', sum(1, 2, 3, 4, 5));

// åœ¨æ•°ç»„ä¸­æ’å…¥å…ƒç´ 
const arr = [1, 2, 5, 6];
const inserted = [...arr.slice(0, 2), 3, 4, ...arr.slice(2)];
console.log('\ninserted:', inserted);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šArray.from å’Œ Array.of</h3>
                <div class="code-block">
                    <pre><code>// Array.from ä»å­—ç¬¦ä¸²
console.log('from string:', Array.from('hello'));

// ä» Set
const set = new Set([1, 2, 2, 3]);
console.log('from Set:', Array.from(set));

// ä½¿ç”¨æ˜ å°„å‡½æ•°
console.log('with map:', Array.from([1, 2, 3], x => x * 2));

// ç”Ÿæˆåºåˆ—
const range = Array.from({ length: 5 }, (_, i) => i);
console.log('\nrange:', range);

// ç”Ÿæˆå­—æ¯åºåˆ—
const letters = Array.from({ length: 5 }, (_, i) => 
    String.fromCharCode(65 + i)
);
console.log('letters:', letters);

// Array.of
console.log('\nArray.of(1, 2, 3):', Array.of(1, 2, 3));
console.log('Array.of(7):', Array.of(7));
console.log('new Array(7):', new Array(7));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šæ•°ç»„æ–°æ–¹æ³•</h3>
                <div class="code-block">
                    <pre><code>const arr = [1, 2, 3, 4, 5];

// at() - æ”¯æŒè´Ÿç´¢å¼•
console.log('arr.at(0):', arr.at(0));
console.log('arr.at(-1):', arr.at(-1));
console.log('arr.at(-2):', arr.at(-2));

// fill() - å¡«å……æ•°ç»„
const filled = new Array(5).fill(0);
console.log('\nfilled:', filled);

filled.fill(1, 2, 4);  // ä»ç´¢å¼•2åˆ°4å¡«å……1
console.log('fill(1, 2, 4):', filled);

// copyWithin() - å¤åˆ¶æ•°ç»„ç‰‡æ®µ
const arr2 = [1, 2, 3, 4, 5];
arr2.copyWithin(0, 3);  // ä»ç´¢å¼•3å¤åˆ¶åˆ°ç´¢å¼•0
console.log('\ncopyWithin:', arr2);

// indexOf / lastIndexOf
const arr3 = [1, 2, 3, 2, 1];
console.log('\nindexOf(2):', arr3.indexOf(2));
console.log('lastIndexOf(2):', arr3.lastIndexOf(2));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šå®ç”¨æŠ€å·§</h3>
                <div class="code-block">
                    <pre><code>// æ•°ç»„å»é‡
const arr = [1, 2, 2, 3, 3, 4, 5, 5];
const unique = [...new Set(arr)];
console.log('å»é‡:', unique);

// æ•°ç»„æ‰“ä¹±
function shuffle(arr) {
    const result = [...arr];
    for (let i = result.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [result[i], result[j]] = [result[j], result[i]];
    }
    return result;
}
console.log('æ‰“ä¹±:', shuffle([1, 2, 3, 4, 5]));

// æ•°ç»„åˆ†ç»„
function chunk(arr, size) {
    return Array.from(
        { length: Math.ceil(arr.length / size) },
        (_, i) => arr.slice(i * size, i * size + size)
    );
}
console.log('\nchunk([1..7], 3):', chunk([1,2,3,4,5,6,7], 3));

// æ±‚æœ€å¤§/æœ€å°å€¼
const numbers = [3, 1, 4, 1, 5, 9, 2, 6];
console.log('\nmax:', Math.max(...numbers));
console.log('min:', Math.min(...numbers));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šé›†åˆè¿ç®—</h3>
                <div class="code-block">
                    <pre><code>const arr1 = [1, 2, 3, 4];
const arr2 = [3, 4, 5, 6];

// äº¤é›†
const intersection = arr1.filter(x => arr2.includes(x));
console.log('äº¤é›†:', intersection);

// å¹¶é›†
const union = [...new Set([...arr1, ...arr2])];
console.log('å¹¶é›†:', union);

// å·®é›†
const difference = arr1.filter(x => !arr2.includes(x));
console.log('å·®é›† (arr1 - arr2):', difference);

// å¯¹ç§°å·®é›†
const symDiff = [
    ...arr1.filter(x => !arr2.includes(x)),
    ...arr2.filter(x => !arr1.includes(x))
];
console.log('å¯¹ç§°å·®é›†:', symDiff);

// æ˜¯å¦ä¸ºå­é›†
const isSubset = arr1.every(x => arr2.includes(x));
console.log('\narr1 æ˜¯ arr2 çš„å­é›†?', isSubset);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
