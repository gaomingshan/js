<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç±»å‹è½¬æ¢ä¸åˆ¤æ–­ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>ç±»å‹è½¬æ¢ä¸åˆ¤æ–­</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>JavaScript æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰ã€‚ç†è§£ç±»å‹è½¬æ¢è§„åˆ™å¯¹äºé¿å… bug è‡³å…³é‡è¦ã€‚</p>
            
            <h2>ä¸€ã€ç±»å‹è½¬æ¢åˆ†ç±»</h2>
            
            <h3>1.1 æ˜¾å¼è½¬æ¢ï¼ˆExplicit Conversionï¼‰</h3>
            <p>ç¨‹åºå‘˜ä¸»åŠ¨è°ƒç”¨è½¬æ¢å‡½æ•°ï¼š</p>
            <ul>
                <li><code>Number()</code> - è½¬æ¢ä¸ºæ•°å­—</li>
                <li><code>String()</code> - è½¬æ¢ä¸ºå­—ç¬¦ä¸²</li>
                <li><code>Boolean()</code> - è½¬æ¢ä¸ºå¸ƒå°”å€¼</li>
            </ul>
            
            <h3>1.2 éšå¼è½¬æ¢ï¼ˆImplicit Conversionï¼‰</h3>
            <p>JavaScript è‡ªåŠ¨è¿›è¡Œçš„ç±»å‹è½¬æ¢ï¼Œä¹Ÿç§°ä¸º"ç±»å‹å¼ºåˆ¶"ï¼ˆType Coercionï¼‰ã€‚</p>
            
            <h2>äºŒã€è½¬æ¢ä¸ºå­—ç¬¦ä¸²</h2>
            
            <h3>2.1 String() å‡½æ•°</h3>
            <pre><code>String(123)        // "123"
String(true)       // "true"
String(null)       // "null"
String(undefined)  // "undefined"
String([1,2,3])    // "1,2,3"
String({a:1})      // "[object Object]"</code></pre>
            
            <h3>2.2 toString() æ–¹æ³•</h3>
            <pre><code>(123).toString()   // "123"
[1,2,3].toString() // "1,2,3"
// null å’Œ undefined æ²¡æœ‰ toString æ–¹æ³•</code></pre>
            
            <h3>2.3 éšå¼è½¬æ¢</h3>
            <ul>
                <li>å­—ç¬¦ä¸²æ‹¼æ¥ï¼š<code>123 + ""  // "123"</code></li>
                <li>æ¨¡æ¿å­—ç¬¦ä¸²ï¼š<code>`${123}`  // "123"</code></li>
            </ul>
            
            <h2>ä¸‰ã€è½¬æ¢ä¸ºæ•°å­—</h2>
            
            <h3>3.1 Number() å‡½æ•°</h3>
            <table>
                <thead>
                    <tr>
                        <th>è¾“å…¥</th>
                        <th>è¾“å‡º</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>Number("123")</code></td>
                        <td>123</td>
                    </tr>
                    <tr>
                        <td><code>Number("12.5")</code></td>
                        <td>12.5</td>
                    </tr>
                    <tr>
                        <td><code>Number("")</code></td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><code>Number("abc")</code></td>
                        <td>NaN</td>
                    </tr>
                    <tr>
                        <td><code>Number(true)</code></td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td><code>Number(false)</code></td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><code>Number(null)</code></td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><code>Number(undefined)</code></td>
                        <td>NaN</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>3.2 parseInt() å’Œ parseFloat()</h3>
            <pre><code>parseInt("123")      // 123
parseInt("123px")    // 123 (è§£æåˆ°éæ•°å­—åœæ­¢)
parseInt("12.5")     // 12 (åªå–æ•´æ•°éƒ¨åˆ†)
parseFloat("12.5")   // 12.5
parseInt("0x10")     // 16 (åå…­è¿›åˆ¶)
parseInt("10", 2)    // 2 (äºŒè¿›åˆ¶)</code></pre>
            
            <h3>3.3 éšå¼è½¬æ¢</h3>
            <ul>
                <li>ç®—æœ¯è¿ç®—ï¼š<code>"5" - 2  // 3</code></li>
                <li>ä¸€å…ƒåŠ å·ï¼š<code>+"123"  // 123</code></li>
                <li>æ¯”è¾ƒè¿ç®—ï¼š<code>"5" > 3  // true</code></li>
            </ul>
            
            <h2>å››ã€è½¬æ¢ä¸ºå¸ƒå°”å€¼</h2>
            
            <h3>4.1 Boolean() å‡½æ•°</h3>
            <div class="info">
                <strong>å‡å€¼ï¼ˆFalsyï¼‰ï¼š</strong>
                <ul>
                    <li><code>false</code></li>
                    <li><code>0</code>ã€<code>-0</code>ã€<code>0n</code></li>
                    <li><code>""</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</li>
                    <li><code>null</code></li>
                    <li><code>undefined</code></li>
                    <li><code>NaN</code></li>
                </ul>
                <strong>å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯çœŸå€¼ï¼ˆTruthyï¼‰ï¼</strong>
            </div>
            
            <h3>4.2 éšå¼è½¬æ¢</h3>
            <ul>
                <li>é€»è¾‘è¿ç®—ï¼š<code>!!"hello"  // true</code></li>
                <li>æ¡ä»¶åˆ¤æ–­ï¼š<code>if (value) {...}</code></li>
                <li>ä¸‰å…ƒè¿ç®—ç¬¦ï¼š<code>value ? a : b</code></li>
            </ul>
            
            <h2>äº”ã€ç›¸ç­‰æ€§æ¯”è¾ƒ</h2>
            
            <h3>5.1 == vs ===</h3>
            <table>
                <thead>
                    <tr>
                        <th>æ¯”è¾ƒ</th>
                        <th>==ï¼ˆå…è®¸ç±»å‹è½¬æ¢ï¼‰</th>
                        <th>===ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>5 == "5"</code></td>
                        <td>true</td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td><code>0 == false</code></td>
                        <td>true</td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td><code>null == undefined</code></td>
                        <td>true</td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td><code>NaN == NaN</code></td>
                        <td>false</td>
                        <td>false</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="warning">
                <strong>æ¨èä½¿ç”¨ ===</strong>ï¼Œé¿å…ç±»å‹è½¬æ¢å¸¦æ¥çš„æ„å¤–ç»“æœã€‚
            </div>
            
            <h3>5.2 Object.is()</h3>
            <p>æ›´ä¸¥æ ¼çš„ç›¸ç­‰æ€§åˆ¤æ–­ï¼š</p>
            <pre><code>Object.is(NaN, NaN)      // true
Object.is(+0, -0)        // false
Object.is(5, 5)          // true</code></pre>
            
            <h2>å…­ã€ç±»å‹åˆ¤æ–­æ–¹æ³•</h2>
            
            <h3>6.1 typeof æ“ä½œç¬¦</h3>
            <pre><code>typeof 123           // "number"
typeof "abc"         // "string"
typeof true          // "boolean"
typeof undefined     // "undefined"
typeof Symbol()      // "symbol"
typeof 123n          // "bigint"
typeof null          // "object" âš ï¸
typeof []            // "object" âš ï¸
typeof {}            // "object"
typeof function(){}  // "function"</code></pre>
            
            <div class="warning">
                <code>typeof null</code> è¿”å› "object" æ˜¯ JavaScript çš„å†å² bugï¼
            </div>
            
            <h3>6.2 instanceof æ“ä½œç¬¦</h3>
            <p>æ£€æµ‹å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ï¼š</p>
            <pre><code>[] instanceof Array        // true
{} instanceof Object       // true
new Date() instanceof Date // true</code></pre>
            
            <h3>6.3 Object.prototype.toString.call()</h3>
            <p>æœ€ç²¾ç¡®çš„ç±»å‹æ£€æµ‹æ–¹æ³•ï¼š</p>
            <pre><code>Object.prototype.toString.call([])        // "[object Array]"
Object.prototype.toString.call({})        // "[object Object]"
Object.prototype.toString.call(null)      // "[object Null]"
Object.prototype.toString.call(undefined) // "[object Undefined]"</code></pre>
            
            <h3>6.4 Array.isArray()</h3>
            <pre><code>Array.isArray([])   // true
Array.isArray({})   // false</code></pre>
            
            <h3>6.5 Number.isNaN()</h3>
            <pre><code>Number.isNaN(NaN)      // true
Number.isNaN("abc")    // false (ä¸è¿›è¡Œç±»å‹è½¬æ¢)
isNaN("abc")           // true (ä¼šå…ˆè½¬æ¢ä¸ºæ•°å­—)</code></pre>
            
            <h2>ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</h2>
            
            <h3>7.1 å¯¹è±¡è½¬åŸå§‹å€¼</h3>
            <p>å¯¹è±¡è½¬æ¢æ—¶ä¼šè°ƒç”¨ <code>valueOf()</code> å’Œ <code>toString()</code>ï¼š</p>
            
            <div class="spec">
                <strong>ToPrimitive æŠ½è±¡æ“ä½œï¼š</strong>
                <pre>1. å¦‚æœæœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œè°ƒç”¨å®ƒ
2. å¦åˆ™ï¼Œæ ¹æ® hintï¼š
   - "number"ï¼šå…ˆ valueOf()ï¼Œå† toString()
   - "string"ï¼šå…ˆ toString()ï¼Œå† valueOf()
   - "default"ï¼šé€šå¸¸åŒ "number"</pre>
            </div>
            
            <h3>7.2 å¸¸è§é™·é˜±</h3>
            <div class="warning">
                <pre><code>// é™·é˜±1ï¼š+ è¿ç®—ç¬¦
"5" + 3          // "53" (å­—ç¬¦ä¸²æ‹¼æ¥)
"5" - 3          // 2 (æ•°å­—è¿ç®—)

// é™·é˜±2ï¼šç©ºæ•°ç»„å’Œå¯¹è±¡
[] + []          // "" (ä¸¤ä¸ªç©ºå­—ç¬¦ä¸²ç›¸åŠ )
[] + {}          // "[object Object]"
{} + []          // 0 (è¯­æ³•æ­§ä¹‰ï¼Œ{} è¢«å½“ä½œä»£ç å—)

// é™·é˜±3ï¼šæ¯”è¾ƒè¿ç®—
[] == ![]        // true (å¤æ‚çš„ç±»å‹è½¬æ¢)
[] == 0          // true

// é™·é˜±4ï¼šè‡ªåŠ¨è£…ç®±
const str = "hello";
str.length       // 5 (è‡ªåŠ¨è½¬æ¢ä¸º String å¯¹è±¡)</code></pre>
            </div>
            
            <h2>å…«ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <strong>å»ºè®®ï¼š</strong>
                <ul>
                    <li>å§‹ç»ˆä½¿ç”¨ <code>===</code> å’Œ <code>!==</code></li>
                    <li>æ˜¾å¼è¿›è¡Œç±»å‹è½¬æ¢ï¼Œé¿å…ä¾èµ–éšå¼è½¬æ¢</li>
                    <li>ä½¿ç”¨ <code>Number.isNaN()</code> è€Œä¸æ˜¯ <code>isNaN()</code></li>
                    <li>ä½¿ç”¨ <code>Array.isArray()</code> æ£€æµ‹æ•°ç»„</li>
                    <li>å¯¹äºç²¾ç¡®ç±»å‹åˆ¤æ–­ï¼Œä½¿ç”¨ <code>Object.prototype.toString.call()</code></li>
                </ul>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-type-conversion" target="_blank">ECMAScript - Type Conversion</a></li>
                <li><a href="https://tc39.es/ecma262/#sec-abstract-equality-comparison" target="_blank">ECMAScript - Abstract Equality Comparison</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank">MDN - ç›¸ç­‰æ€§åˆ¤æ–­</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="01-datatypes.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šæ•°æ®ç±»å‹è¯¦è§£</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="02-operators.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šè¿ç®—ç¬¦å®Œå…¨æŒ‡å—</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šæ˜¾å¼ç±»å‹è½¬æ¢</h3>
                <div class="code-block">
                    <pre><code>// è½¬æ¢ä¸ºå­—ç¬¦ä¸²
console.log('String(123):', String(123));
console.log('String(true):', String(true));
console.log('String(null):', String(null));
console.log('String([1,2,3]):', String([1,2,3]));

// è½¬æ¢ä¸ºæ•°å­—
console.log('Number("123"):', Number("123"));
console.log('Number(""):', Number(""));
console.log('Number("abc"):', Number("abc"));
console.log('Number(true):', Number(true));
console.log('Number(null):', Number(null));
console.log('Number(undefined):', Number(undefined));

// è½¬æ¢ä¸ºå¸ƒå°”å€¼
console.log('Boolean(0):', Boolean(0));
console.log('Boolean(""):', Boolean(""));
console.log('Boolean("hello"):', Boolean("hello"));
console.log('Boolean([]):', Boolean([]));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šéšå¼ç±»å‹è½¬æ¢</h3>
                <div class="code-block">
                    <pre><code>// å­—ç¬¦ä¸²æ‹¼æ¥ vs æ•°å­—è¿ç®—
console.log('"5" + 3:', "5" + 3);       // "53"
console.log('"5" - 3:', "5" - 3);       // 2
console.log('"5" * 2:', "5" * 2);       // 10

// ä¸€å…ƒåŠ å·è½¬æ¢
console.log('+"123":', +"123");
console.log('+true:', +true);
console.log('+false:', +false);
console.log('+"abc":', +"abc");

// é€»è¾‘éè½¬æ¢
console.log('!!"hello":', !!"hello");
console.log('!!0:', !!0);
console.log('!![]:', !![]);

// æ¯”è¾ƒè¿ç®—ä¸­çš„è½¬æ¢
console.log('"5" > 3:', "5" > 3);
console.log('true == 1:', true == 1);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼š== vs ===</h3>
                <div class="code-block">
                    <pre><code>console.log('=== å®½æ¾ç›¸ç­‰ (==) ===');
console.log('5 == "5":', 5 == "5");
console.log('0 == false:', 0 == false);
console.log('"" == false:', "" == false);
console.log('null == undefined:', null == undefined);
console.log('[] == 0:', [] == 0);

console.log('\n=== ä¸¥æ ¼ç›¸ç­‰ (===) ===');
console.log('5 === "5":', 5 === "5");
console.log('0 === false:', 0 === false);
console.log('"" === false:', "" === false);
console.log('null === undefined:', null === undefined);
console.log('[] === 0:', [] === 0);

console.log('\n=== Object.is() ===');
console.log('Object.is(NaN, NaN):', Object.is(NaN, NaN));
console.log('NaN === NaN:', NaN === NaN);
console.log('Object.is(+0, -0):', Object.is(+0, -0));
console.log('+0 === -0:', +0 === -0);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šç±»å‹åˆ¤æ–­</h3>
                <div class="code-block">
                    <pre><code>// typeof
console.log('=== typeof ===');
console.log('typeof 123:', typeof 123);
console.log('typeof "abc":', typeof "abc");
console.log('typeof true:', typeof true);
console.log('typeof null:', typeof null);        // "object"!
console.log('typeof undefined:', typeof undefined);
console.log('typeof []:', typeof []);            // "object"!
console.log('typeof {}:', typeof {});
console.log('typeof function(){}:', typeof function(){});

// ç²¾ç¡®ç±»å‹æ£€æµ‹
function getType(value) {
    return Object.prototype.toString.call(value).slice(8, -1);
}

console.log('\n=== ç²¾ç¡®ç±»å‹ ===');
console.log('getType([]):', getType([]));
console.log('getType({}):', getType({}));
console.log('getType(null):', getType(null));
console.log('getType(undefined):', getType(undefined));
console.log('getType(123):', getType(123));

// ç‰¹æ®Šæ£€æµ‹
console.log('\n=== ç‰¹æ®Šæ£€æµ‹ ===');
console.log('Array.isArray([]):', Array.isArray([]));
console.log('Number.isNaN(NaN):', Number.isNaN(NaN));
console.log('Number.isNaN("abc"):', Number.isNaN("abc"));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šparseInt é™·é˜±</h3>
                <div class="code-block">
                    <pre><code>// parseInt çš„ç‰¹æ®Šè¡Œä¸º
console.log('parseInt("123"):', parseInt("123"));
console.log('parseInt("123px"):', parseInt("123px"));     // 123
console.log('parseInt("px123"):', parseInt("px123"));     // NaN
console.log('parseInt("12.5"):', parseInt("12.5"));       // 12
console.log('parseFloat("12.5"):', parseFloat("12.5"));   // 12.5

// è¿›åˆ¶è½¬æ¢
console.log('\n=== è¿›åˆ¶è½¬æ¢ ===');
console.log('parseInt("10", 10):', parseInt("10", 10));   // 10
console.log('parseInt("10", 2):', parseInt("10", 2));     // 2
console.log('parseInt("10", 8):', parseInt("10", 8));     // 8
console.log('parseInt("10", 16):', parseInt("10", 16));   // 16

// é™·é˜±ï¼šæ•°ç»„ map
const arr = ["1", "2", "3"];
console.log('\n=== æ•°ç»„ map é™·é˜± ===');
console.log('arr.map(parseInt):', arr.map(parseInt));
// ç›¸å½“äºï¼š[parseInt("1", 0), parseInt("2", 1), parseInt("3", 2)]
// ç»“æœï¼š[1, NaN, NaN]

console.log('æ­£ç¡®å†™æ³•:', arr.map(x => parseInt(x, 10)));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šç»å…¸é™·é˜±</h3>
                <div class="code-block">
                    <pre><code>// é™·é˜±1ï¼šç©ºæ•°ç»„å’Œå¯¹è±¡
console.log('=== ç©ºæ•°ç»„å’Œå¯¹è±¡ ===');
console.log('[] + []:', [] + []);            // ""
console.log('[1] + [2]:', [1] + [2]);        // "12"
console.log('[] == ![]:', [] == ![]);        // true!

// é™·é˜±2ï¼šåŠ å·è¿ç®—ç¬¦
console.log('\n=== åŠ å·è¿ç®—ç¬¦ ===');
console.log('1 + 2:', 1 + 2);                // 3
console.log('"1" + 2:', "1" + 2);            // "12"
console.log('1 + "2":', 1 + "2");            // "12"
console.log('true + 1:', true + 1);          // 2
console.log('false + 1:', false + 1);        // 1

// é™·é˜±3ï¼šå‡å·è¿ç®—ç¬¦
console.log('\n=== å‡å·è¿ç®—ç¬¦ ===');
console.log('"5" - 3:', "5" - 3);            // 2
console.log('"5" - "3":', "5" - "3");        // 2
console.log('"abc" - 1:', "abc" - 1);        // NaN

// é™·é˜±4ï¼šè‡ªåŠ¨è£…ç®±
console.log('\n=== è‡ªåŠ¨è£…ç®± ===');
const str = "hello";
console.log('str.length:', str.length);       // 5
console.log('typeof str:', typeof str);       // "string"
console.log('str[0]:', str[0]);               // "h"</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
