# ç¬¬ 19 ç« ï¼šPrettier è®¾è®¡ç†å¿µ

## æ¦‚è¿°

Prettier æ˜¯ä¸€ä¸ª"å›ºæ‰§å·±è§"çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒä»¥ç‹¬ç‰¹çš„è®¾è®¡ç†å¿µè§£å†³äº†å¼€å‘å›¢é˜Ÿä¸­çš„ä»£ç é£æ ¼é—®é¢˜ã€‚ç†è§£ Prettier çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼Œæœ‰åŠ©äºæ­£ç¡®è¯„ä¼°å®ƒåœ¨é¡¹ç›®ä¸­çš„å®šä½å’Œä»·å€¼ã€‚

## ä¸€ã€Prettier çš„æ ¸å¿ƒç†å¿µ

### 1.1 å›ºæ‰§å·±è§çš„æ ¼å¼åŒ–

Prettier æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯å…¶**"å›ºæ‰§å·±è§"ï¼ˆopinionatedï¼‰**çš„è®¾è®¡å“²å­¦ï¼šä»£ç æ ¼å¼åº”è¯¥ç”±å·¥å…·è‡ªåŠ¨å¤„ç†ï¼Œè€Œä¸æ˜¯å¼€å‘è€…æ‰‹åŠ¨ç»´æŠ¤ã€‚

```javascript
// æ— è®ºä½ å¦‚ä½•ç¼–å†™ï¼ŒPrettier éƒ½ä¼šé‡æ–°æ ¼å¼åŒ–ä¸ºå…¶è§„èŒƒæ ¼å¼
function example(a,b){return a+b;}

// Prettier æ ¼å¼åŒ–å
function example(a, b) {
  return a + b;
}
```

**è®¾è®¡åŸåˆ™ï¼š**
- æœ€å°åŒ–é…ç½®é€‰é¡¹
- ä¸€è‡´çš„æ ¼å¼åŒ–ç»“æœ
- æ¶ˆé™¤é£æ ¼äº‰è®º

> **ğŸ’¡ ç†å¿µæ´å¯Ÿ**  
> "ä¸å…¶èŠ±æ—¶é—´äº‰è®ºåˆ†å·å’Œå¼•å·ï¼Œä¸å¦‚è®©å·¥å…·è‡ªåŠ¨å¤„ç†ï¼ŒæŠŠç²¾åŠ›æ”¾åœ¨æ›´æœ‰ä»·å€¼çš„äº‹æƒ…ä¸Šã€‚"

### 1.2 ä¸ ESLint çš„ç†å¿µå¯¹æ¯”

Prettier å’Œ ESLint ä»£è¡¨äº†ä¸¤ç§ä¸åŒçš„å·¥å…·è®¾è®¡å“²å­¦ï¼š

| æ–¹é¢ | Prettier | ESLint |
|------|----------|--------|
| ç†å¿µ | å›ºæ‰§å·±è§ | é«˜åº¦å¯é…ç½® |
| å…³æ³¨ç‚¹ | ä»£ç æ ¼å¼ | ä»£ç è´¨é‡ä¸é£æ ¼ |
| é…ç½®é¡¹ | å¾ˆå°‘ (~20) | éå¸¸å¤š (100+) |
| è‡ªç”±åº¦ | ä½ï¼Œæ ¼å¼ç»Ÿä¸€ | é«˜ï¼Œå¯å®šåˆ¶è§„åˆ™ |
| å­¦ä¹ æ›²çº¿ | å¹³ç¼“ | é™¡å³­ |

```
                    ä½                  é…ç½®å¤æ‚åº¦                  é«˜
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
é£æ ¼è‡ªç”±åº¦  é«˜      â”‚                       â”‚           âœ“ ESLint    â”‚
                    â”‚                       â”‚                       â”‚
                    â”‚                       â”‚                       â”‚
                    â”‚                       â”‚                       â”‚
é£æ ¼è‡ªç”±åº¦  ä½      â”‚       âœ“ Prettier      â”‚                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ä¸ºä½•é€‰æ‹©"å›ºæ‰§å·±è§"

Prettier çš„åˆ›å»ºè€…æœ‰å……åˆ†çš„ç†ç”±é€‰æ‹©å›ºæ‰§å·±è§çš„è®¾è®¡ï¼š

1. **é¿å…æ— ä¼‘æ­¢çš„é£æ ¼è®¨è®º**
   - è®¸å¤šä»£ç é£æ ¼é—®é¢˜æ²¡æœ‰å®¢è§‚"æ­£ç¡®"ç­”æ¡ˆ
   - å›¢é˜Ÿè®¨è®ºæ ¼å¼å¸¸å¸¸è€—æ—¶ä¸”æ— ç»“æœ

2. **æ¶ˆé™¤é£æ ¼ç»´æŠ¤æˆæœ¬**
   - å¼€å‘è€…ä¸å†éœ€è¦æ‰‹åŠ¨ç»´æŠ¤æ ¼å¼
   - ä»£ç å®¡æŸ¥ä¸å†å…³æ³¨æ ¼å¼é—®é¢˜

3. **ç®€åŒ–å…¥èŒä¸åä½œ**
   - æ–°æˆå‘˜æ— éœ€å­¦ä¹ å¤æ‚çš„é£æ ¼æŒ‡å—
   - è·¨å›¢é˜Ÿåä½œæ›´åŠ é¡ºç•…

> **ğŸ“Š ç»Ÿè®¡æ•°æ®**  
> æ ¹æ® Prettier åˆ›å»ºè€…çš„ç ”ç©¶ï¼Œåœ¨é‡‡ç”¨ Prettier åï¼Œä»£ç å®¡æŸ¥ä¸­ä¸æ ¼å¼ç›¸å…³çš„è¯„è®ºå‡å°‘äº†çº¦ 90%ã€‚

## äºŒã€Prettier çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 è¾“å…¥ä¸å˜æ€§

Prettier é‡‡ç”¨äº†"è§£æ-é‡å»º"æ¨¡å¼ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä»£ç è½¬æ¢ï¼š

```
æºä»£ç  â†’ è§£æä¸º AST â†’ é‡æ–°æ‰“å°ä¸ºæ ¼å¼åŒ–ä»£ç 
```

**å…³é”®ç‰¹æ€§ï¼š**
- å®Œå…¨é‡æ–°ç”Ÿæˆä»£ç æ ¼å¼
- ä¿ç•™è¯­ä¹‰ä½†ä¸ä¿ç•™åŸå§‹æ ¼å¼
- ä¸ä¾èµ–åŸæœ‰ç©ºç™½å’Œæ¢è¡Œ

```javascript
// è¿™ä¸‰ç§å†™æ³•ç»è¿‡ Prettier æ ¼å¼åŒ–åå®Œå…¨ç›¸åŒ
const value = thisIsAReallyLongFunctionCall(withLots, ofArguments);
const value=thisIsAReallyLongFunctionCall(withLots,ofArguments);
const value=
  thisIsAReallyLongFunctionCall(
  withLots
  ,ofArguments);

// æ ¼å¼åŒ–åç»Ÿä¸€ä¸º:
const value = thisIsAReallyLongFunctionCall(
  withLots,
  ofArguments
);
```

### 2.2 æç®€é…ç½®

Prettier åªæä¾›å°‘é‡å¿…è¦çš„é…ç½®é€‰é¡¹ï¼Œéµå¾ª"å°‘å³æ˜¯å¤š"åŸåˆ™ï¼š

```json
// ä¸€ä¸ªå…¸å‹çš„å®Œæ•´ Prettier é…ç½®
{
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "semi": true,
  "singleQuote": false,
  "quoteProps": "as-needed",
  "jsxSingleQuote": false,
  "trailingComma": "es5",
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "always"
}
```

**é…ç½®ç†å¿µï¼š**
- åªé…ç½®æ— æ³•è‡ªåŠ¨å†³å®šçš„äº‹é¡¹
- é¿å…æä¾›è¿‡å¤šå¯è°ƒæ•´çš„é€‰é¡¹
- å¤§å¤šæ•°é¡¹ç›®ä½¿ç”¨æ¥è¿‘é»˜è®¤é…ç½®

### 2.3 æ™ºèƒ½æ¢è¡Œå¤„ç†

Prettier æœ€æ ¸å¿ƒçš„åŠŸèƒ½æ˜¯æ ¹æ®**æ‰“å°å®½åº¦**è‡ªåŠ¨å¤„ç†ä»£ç æ¢è¡Œï¼š

```javascript
// å¦‚æœä¸€è¡Œä»£ç è¶…è¿‡ printWidth (ä¾‹å¦‚ 80)
function someFunction(longArgument1, longArgument2, longArgument3, longArgument4, longArgument5) { /* ... */ }

// Prettier ä¼šè‡ªåŠ¨æ¢è¡Œä¸ºï¼š
function someFunction(
  longArgument1,
  longArgument2,
  longArgument3,
  longArgument4,
  longArgument5
) { /* ... */ }
```

**æ¢è¡Œç®—æ³•ç‰¹ç‚¹ï¼š**
- è‡ªåŠ¨åˆ¤æ–­æœ€ä½³æ¢è¡Œä½ç½®
- ä¿æŒè¡¨è¾¾å¼å±‚æ¬¡ç»“æ„
- ç¼©è¿›ä½“ç°ä»£ç åµŒå¥—å…³ç³»
- ä¼˜å…ˆä¿æŒä»£ç å¯è¯»æ€§

### 2.4 æ ¼å¼å®Œæ•´æ€§

Prettier ä¼šå¯¹æ–‡ä»¶è¿›è¡Œ**å®Œæ•´æ ¼å¼åŒ–**ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†ä¿®å¤ï¼š

```
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  å®Œæ•´æ–‡ä»¶   â”‚     â”‚   å®Œæ•´æ–‡ä»¶  â”‚
      â”‚  (è¾“å…¥)    â”‚ â†’   â”‚   (è¾“å‡º)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡ä¼˜åŠ¿ï¼š**
- ç¡®ä¿æ•´ä¸ªæ–‡ä»¶é£æ ¼ä¸€è‡´
- é¿å…æ¸è¿›å¼æ ¼å¼åŒ–å¯¼è‡´çš„æ··ä¹±
- ç®€åŒ–å·¥å…·å®ç°å’Œä½¿ç”¨

## ä¸‰ã€ä¸ç”Ÿæ€ç³»ç»Ÿçš„åä½œ

### 3.1 ä¸ ESLint çš„åä½œæ¨¡å¼

Prettier å’Œ ESLint é‡‡ç”¨"åˆ†å·¥åˆä½œ"çš„æ¨¡å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æºä»£ç      â”‚ â†’   â”‚  Prettier    â”‚ â†’   â”‚   ESLint     â”‚
â”‚               â”‚     â”‚  (æ ¼å¼åŒ–)    â”‚     â”‚  (ä»£ç è´¨é‡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é…åˆç­–ç•¥ï¼š**
1. **eslint-config-prettier**: ç¦ç”¨ ESLint ä¸­ä¸ Prettier å†²çªçš„è§„åˆ™
2. **eslint-plugin-prettier**: å°† Prettier ä½œä¸º ESLint è§„åˆ™è¿è¡Œ
3. **prettier-eslint**: å…ˆç”¨ Prettier æ ¼å¼åŒ–ï¼Œå†ç”¨ ESLint ä¿®å¤

```json
// åœ¨ ESLint é…ç½®ä¸­é›†æˆ Prettier
{
  "extends": [
    "eslint:recommended",
    "prettier" // æ”¾åœ¨æœ€åï¼Œç¦ç”¨å†²çªè§„åˆ™
  ],
  "plugins": ["prettier"],
  "rules": {
    "prettier/prettier": "error"
  }
}
```

### 3.2 ä¸ç¼–è¾‘å™¨é›†æˆ

Prettier èƒ½ä¸ä¸»æµç¼–è¾‘å™¨æ— ç¼é›†æˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¼–è¾‘å™¨     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Prettierâ”‚  â”‚  è‡ªåŠ¨æ ¼å¼åŒ–
â”‚  â”‚ æ’ä»¶    â”‚  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¿å­˜æ–‡ä»¶
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸»è¦é›†æˆæ–¹å¼ï¼š**
- ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
- å¿«æ·é”®æ ¼å¼åŒ–
- å³é”®èœå•æ ¼å¼åŒ–
- çŠ¶æ€æ é›†æˆ

**VS Code é…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

### 3.3 ä¸æ„å»ºæµç¨‹é›†æˆ

Prettier å¯ä»¥é›†æˆåˆ°é¡¹ç›®çš„æ„å»ºå’Œæäº¤æµç¨‹ä¸­ï¼š

```
æœ¬åœ°å¼€å‘          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ git commit  â”‚ â†’   â”‚ pre-commit  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                      â”‚   Prettier  â”‚
                                      â”‚  (lint-staged)â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                      â”‚    æäº¤     â”‚
                                      â”‚    ä»£ç      â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸¸è§é›†æˆæ–¹å¼ï¼š**
1. **husky + lint-staged**: æäº¤å‰è‡ªåŠ¨æ ¼å¼åŒ–
2. **CI æ£€æŸ¥**: éªŒè¯ä»£ç æ˜¯å¦å·²æ ¼å¼åŒ–
3. **npm scripts**: æ·»åŠ æ ¼å¼åŒ–å‘½ä»¤

```json
// package.json ç¤ºä¾‹
{
  "scripts": {
    "format": "prettier --write \"src/**/*.{js,jsx,ts,tsx}\"",
    "format:check": "prettier --check \"src/**/*.{js,jsx,ts,tsx}\""
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "prettier --write"
    ]
  }
}
```

## å››ã€Prettier çš„å±€é™æ€§

### 4.1 æ ¼å¼åŒ–çš„è¾¹ç•Œ

Prettier å¹¶éä¸‡èƒ½çš„ï¼Œæœ‰å…¶æ˜ç¡®çš„å±€é™ï¼š

**ä»…å¤„ç†æ ¼å¼ï¼Œä¸æ¶‰åŠä»£ç è´¨é‡ï¼š**
```javascript
// Prettier ä¼šæ ¼å¼åŒ–ï¼Œä½†ä¸ä¼šæŒ‡å‡ºé€»è¾‘é—®é¢˜
if (condition);
{
  doSomething();
}

// æ ¼å¼åŒ–å - è¯­æ³•æ­£ç¡®ï¼Œä½†é€»è¾‘å¯èƒ½æœ‰é—®é¢˜
if (condition);
{
  doSomething();
}
```

**æ— æ³•ä¿®æ­£å‘½åçº¦å®šï¼š**
```javascript
// Prettier ä¸ä¼šæ”¹å˜å˜é‡æˆ–å‡½æ•°å
const BAD_camelCase = "Prettier doesn't fix this";
function mixedNaming_style() {}

// æ ¼å¼åŒ–å - å‘½åä¸å˜
const BAD_camelCase = "Prettier doesn't fix this";
function mixedNaming_style() {}
```

### 4.2 å›¢é˜Ÿæ¥å—åº¦æŒ‘æˆ˜

å¼•å…¥ Prettier å¯èƒ½é¢ä¸´çš„å›¢é˜ŸæŒ‘æˆ˜ï¼š

1. **ä¸ªäººä¹ æƒ¯å·®å¼‚**
   - å¼€å‘è€…å¯èƒ½æœ‰å¼ºçƒˆçš„ä¸ªäººæ ¼å¼åå¥½
   - "å›ºæ‰§å·±è§"çš„æ–¹å¼å¯èƒ½å¼•èµ·æŠµè§¦

2. **å¤§å‹ä»£ç åº“è¿ç§»**
   - å…¨é¢æ ¼å¼åŒ–ä¼šå¯¼è‡´å¤§é‡æ–‡ä»¶å˜æ›´
   - å†å²è¿½è¸ªå’Œå†²çªå¤„ç†å˜å¾—å¤æ‚

> **ğŸ”„ åº”å¯¹ç­–ç•¥**  
> - é€æ­¥å¼•å…¥ï¼ˆä»…å¯¹æ–°ä»£ç åº”ç”¨ï¼‰
> - æ˜ç¡®æ²Ÿé€šä»·å€¼ï¼ˆå‡å°‘æ ¼å¼äº‰è®ºï¼‰
> - è°ƒæ•´å°‘æ•°å¿…è¦é…ç½®ä»¥å‡å°‘å›¢é˜Ÿé˜»åŠ›

### 4.3 é…ç½®å¦¥å

å°½ç®¡ Prettier ä¸»å¼ æç®€é…ç½®ï¼Œä½†å®é™…ä½¿ç”¨ä¸­ä»éœ€åšä¸€äº›å¦¥åï¼š

**é…ç½®æƒè¡¡ç¤ºä¾‹ï¼š**

| é…ç½®é¡¹ | å¸¸è§äº‰è®® | å¦¥åå»ºè®® |
|-------|---------|---------|
| `semi` | æ˜¯å¦ä½¿ç”¨åˆ†å· | æ ¹æ®å›¢é˜Ÿä¸»æµJSé£æ ¼å†³å®š |
| `singleQuote` | å•å¼•å·vsåŒå¼•å· | JavaScripté€šå¸¸ç”¨å•å¼•å·ï¼ŒJSXç”¨åŒå¼•å· |
| `printWidth` | è¡Œå®½åº¦ | ç°ä»£å±å¹•å¯é€‚å½“å¢åŠ åˆ°100-120 |
| `trailingComma` | å°¾éšé€—å· | `es5`æ˜¯è¾ƒå®‰å…¨çš„é€‰æ‹© |

```javascript
// å¯¹äºåˆ†å·åå¥½å¼ºçƒˆçš„å›¢é˜Ÿå¯èƒ½éœ€è¦è°ƒæ•´é…ç½®
// semi: true
const greeting = "Hello";
const name = "World";

// semi: false
const greeting = "Hello"
const name = "World"
```

## äº”ã€Prettier çš„å‘å±•ä¸å½±å“

### 5.1 ä»è§£å†³é—®é¢˜åˆ°è¡Œä¸šæ ‡å‡†

Prettier çš„å‘å±•å†ç¨‹ï¼š

```
2017 - Prettier é¦–æ¬¡å‘å¸ƒ
  â†“
2018 - è¿…é€Ÿè·å¾—ç¤¾åŒºè®¤å¯
  â†“
2019 - æˆä¸ºå‰ç«¯é¡¹ç›®æ ‡é…å·¥å…·
  â†“
2021 - æ”¯æŒæ›´å¤šè¯­è¨€å’Œæ¡†æ¶
  â†“
ç°åœ¨ - äº‹å®ä¸Šçš„æ ¼å¼åŒ–æ ‡å‡†
```

**æˆåŠŸå…³é”®å› ç´ ï¼š**
- è§£å†³äº†çœŸå®ç—›ç‚¹ï¼ˆä»£ç é£æ ¼äº‰è®ºï¼‰
- ç®€å•æ˜“ç”¨ï¼ˆæä½çš„ä½¿ç”¨é—¨æ§›ï¼‰
- ç»“æœå¯é¢„æœŸï¼ˆä¸€è‡´çš„æ ¼å¼åŒ–æ•ˆæœï¼‰
- è‰¯å¥½çš„å·¥å…·é›†æˆï¼ˆç¼–è¾‘å™¨ã€Gitã€CIï¼‰

### 5.2 å½±å“å…¶ä»–å·¥å…·ç”Ÿæ€

Prettier çš„æˆåŠŸå½±å“äº†æ•´ä¸ªå·¥å…·ç”Ÿæ€ï¼š

1. **ä¿ƒä½¿ ESLint åæ€**ï¼šESLint ä¸å†è¿½æ±‚ä½œä¸ºå…¨èƒ½çš„ä»£ç æ£€æŸ¥å·¥å…·
2. **å¸¦åŠ¨äº†å…¶ä»–æ ¼å¼åŒ–å·¥å…·**ï¼šå¦‚ Black(Python)ã€Rubocop(Ruby)ã€Rustfmt(Rust) ç­‰é‡‡ç”¨ç±»ä¼¼ç†å¿µ
3. **å·¥å…·è®¾è®¡å“²å­¦**ï¼šæ›´å¤šå·¥å…·é‡‡ç”¨"å›ºæ‰§å·±è§"çš„è®¾è®¡æ€è·¯

### 5.3 å›ºæ‰§å·±è§vsé«˜åº¦è‡ªå®šä¹‰çš„è®¨è®º

Prettier å¼•å‘äº†å·¥å…·è®¾è®¡å“²å­¦çš„æ·±å…¥æ€è€ƒï¼š

```
å·¥å…·è®¾è®¡å“²å­¦å…‰è°±

å®Œå…¨è‡ªå®šä¹‰ â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–· å›ºæ‰§å·±è§
(æœ€å¤§è‡ªç”±)                   (æœ€å°å†³ç­–è´Ÿæ‹…)

   ESLint                   Prettier
```

**ä¸¤ç§å“²å­¦çš„ä»·å€¼ï¼š**
- è‡ªå®šä¹‰æ–¹å¼é€‚åˆæœ‰æ˜ç¡®éœ€æ±‚å’Œå¼ºåå¥½çš„å›¢é˜Ÿ
- å›ºæ‰§å·±è§é€‚åˆå‡å°‘å†³ç­–ç–²åŠ³å’Œæ ¼å¼äº‰è®º

> **ğŸ’¡ å…³é”®è§‚ç‚¹**  
> æ ¼å¼ä¸å½±å“ä»£ç åŠŸèƒ½ï¼Œç»Ÿä¸€æ€§å¾€å¾€æ¯”ä¸ªäººåå¥½æ›´é‡è¦ã€‚Prettier å¸®åŠ©å›¢é˜Ÿåšå‡ºè¿™ä¸ª"ä¸é‡è¦çš„å†³å®š"ï¼Œä»è€Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨æ›´é‡è¦çš„é—®é¢˜ä¸Šã€‚

## å…­ã€å®è·µä¸­çš„åº”ç”¨ç­–ç•¥

### 6.1 æ¸è¿›å¼é‡‡ç”¨

åœ¨å›¢é˜Ÿä¸­å¼•å…¥ Prettier çš„æ¸è¿›ç­–ç•¥ï¼š

**é˜¶æ®µ 1: è¯•ç‚¹å¼•å…¥**
- åœ¨å°å‹é¡¹ç›®æˆ–æ–°é¡¹ç›®ä¸­è¯•ç”¨
- æ”¶é›†å›¢é˜Ÿåé¦ˆå’Œä½“éªŒ

**é˜¶æ®µ 2: æ–°ä»£ç åº”ç”¨**
- åªå¯¹æ–°æ–‡ä»¶åº”ç”¨æ ¼å¼åŒ–
- ç°æœ‰æ–‡ä»¶ä¿æŒä¸å˜

**é˜¶æ®µ 3: é€æ­¥è¿ç§»**
- æŒ‰æ¨¡å—é€æ­¥æ ¼å¼åŒ–æ—§ä»£ç 
- ä¸å®é™…å¼€å‘ä»»åŠ¡ç»“åˆè¿›è¡Œ

**é˜¶æ®µ 4: å…¨é¢åº”ç”¨**
- CI å¼ºåˆ¶éªŒè¯æ ¼å¼åŒ–
- ç¼–è¾‘å™¨é…ç½®å›¢é˜Ÿå…±äº«

> **âš ï¸ æ³¨æ„**  
> é¿å…ä¸€æ¬¡æ€§æ ¼å¼åŒ–æ•´ä¸ªä»£ç åº“ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡å†²çªå’Œå†å²è¿½è¸ªé—®é¢˜ã€‚

### 6.2 é…ç½®ç®¡ç†æœ€ä½³å®è·µ

ç®¡ç†å›¢é˜Ÿ Prettier é…ç½®çš„æœ€ä½³å®è·µï¼š

1. **ä¸­å¿ƒåŒ–é…ç½®**
   - åœ¨ç»„ç»‡çº§ç»´æŠ¤åŸºç¡€é…ç½®
   - ä½¿ç”¨ npm åŒ…å…±äº«ï¼ˆå¦‚ `@company/prettier-config`ï¼‰

2. **ç‰ˆæœ¬æ§åˆ¶**
   - `.prettierrc` æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶
   - åœ¨æ–‡æ¡£ä¸­è§£é‡Šé…ç½®å†³ç­–åŸå› 

3. **ç¼–è¾‘å™¨è®¾ç½®**
   - æä¾›å›¢é˜Ÿç»Ÿä¸€çš„ç¼–è¾‘å™¨é…ç½®
   - è‡ªåŠ¨åº”ç”¨ Prettier æ ¼å¼åŒ–

**é…ç½®å…±äº«ç¤ºä¾‹:**
```js
// @company/prettier-config
module.exports = {
  printWidth: 100,
  tabWidth: 2,
  singleQuote: true,
  trailingComma: 'es5',
  // ...å…¶ä»–é…ç½®
};

// åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
// .prettierrc.js
module.exports = require('@company/prettier-config');
```

### 6.3 ä¸å·¥ä½œæµé›†æˆ

å°† Prettier æœ‰æ•ˆé›†æˆåˆ°å·¥ä½œæµç¨‹ä¸­ï¼š

**1. ç¼–è¾‘å™¨é›†æˆ**
- å®æ—¶æ ¼å¼åŒ–åé¦ˆ
- ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–

**2. Git å·¥ä½œæµé›†æˆ**
- pre-commit hook è‡ªåŠ¨æ ¼å¼åŒ–
- é¿å…æ ¼å¼åŒ–å·®å¼‚è¿›å…¥æäº¤å†å²

**3. CI/CD é›†æˆ**
- éªŒè¯ä»£ç æ˜¯å¦å·²æ ¼å¼åŒ–
- é˜²æ­¢éæ ¼å¼åŒ–ä»£ç åˆå…¥ä¸»åˆ†æ”¯

```yaml
# åœ¨ GitHub Actions ä¸­éªŒè¯æ ¼å¼
name: Verify Formatting
on: [push, pull_request]
jobs:
  format:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - run: npm ci
      - run: npm run format:check
```

## å­¦ä¹ å»ºè®®

> **ğŸ“š è¿›é˜¶è·¯å¾„**
> 
> 1. **ç†è§£"å›ºæ‰§å·±è§"çš„ä»·å€¼**ï¼šæ¥å—ç»Ÿä¸€èƒœäºä¸ªäººåå¥½
> 2. **å°‘é‡å¿…è¦é…ç½®**ï¼šåªè°ƒæ•´å›¢é˜Ÿå¼ºçƒˆå…³æ³¨çš„æ ¼å¼é€‰é¡¹
> 3. **ä¸ ESLint ååŒ**ï¼šæ˜ç¡®åˆ†å·¥ï¼Œé¿å…è§„åˆ™å†²çª
> 4. **å·¥ä½œæµè‡ªåŠ¨åŒ–**ï¼šç¼–è¾‘å™¨ + Git hooks + CI ååŒ
> 5. **æ¸è¿›å¼åº”ç”¨**ï¼šæŒ‰éœ€å¼•å…¥ï¼Œé¿å…å¼ºåˆ¶å¤§é‡æ„

> **âš ï¸ å¸¸è§è¯¯åŒº**
> 
> - **è¿‡åº¦é…ç½®**ï¼šè¯•å›¾è®© Prettier äº§å‡ºä¸æ—§ä»£ç å®Œå…¨ç›¸åŒçš„æ ¼å¼
> - **åŠŸèƒ½è¯¯è§£**ï¼šæœŸæœ› Prettier è§£å†³ä»£ç è´¨é‡é—®é¢˜
> - **å­¤ç«‹ä½¿ç”¨**ï¼šæ²¡æœ‰ä¸ç¼–è¾‘å™¨å’Œå·¥ä½œæµé›†æˆ
> - **ä¸€åˆ€åˆ‡åº”ç”¨**ï¼šå¯¹æ•´ä¸ªä»£ç åº“ä¸€æ¬¡æ€§æ ¼å¼åŒ–
> - **å¿½è§†å›¢é˜Ÿæ²Ÿé€š**ï¼šæ²¡æœ‰è§£é‡Šå¼•å…¥ Prettier çš„ä»·å€¼å’ŒåŸå› 

## å‚è€ƒèµ„æ–™

- [Prettier å®˜æ–¹æ–‡æ¡£](https://prettier.io/docs/en/) - è¯¦ç»†çš„é…ç½®å’Œä½¿ç”¨æŒ‡å—
- [Why Prettier?](https://prettier.io/docs/en/why-prettier.html) - Prettier è®¾è®¡ç†å¿µè¯¦è§£
- [Prettier vs. Linters](https://prettier.io/docs/en/comparison.html) - ä¸å…¶ä»–å·¥å…·çš„å¯¹æ¯”
- [JavaScript Standard Style](https://standardjs.com/) - å¦ä¸€ç§å›ºæ‰§å·±è§çš„é£æ ¼æ–¹æ¡ˆ
- [The State of JS 2023](https://2023.stateofjs.com/) - å‰ç«¯å·¥å…·ä½¿ç”¨è¶‹åŠ¿

---

**ä¸‹ä¸€ç« ** â†’ [ç¬¬ 20 ç« ï¼šPrettier é…ç½®é€‰é¡¹è¯¦è§£](./20-prettier-options.md)
