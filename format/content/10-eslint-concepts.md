# ç¬¬ 10 ç« ï¼šESLint æ ¸å¿ƒæ¦‚å¿µ

## æ¦‚è¿°

ESLint æ˜¯å½“å‰æœ€æµè¡Œçš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·ï¼Œå®ƒä¸ä»…èƒ½å‘ç°ä»£ç ä¸­çš„æ½œåœ¨é”™è¯¯ï¼Œè¿˜èƒ½å¼ºåˆ¶æ‰§è¡Œä¸€è‡´çš„ä»£ç é£æ ¼ã€‚ç†è§£ ESLint çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯æœ‰æ•ˆä½¿ç”¨å’Œé…ç½®å®ƒçš„å…³é”®ã€‚

## ä¸€ã€ESLint çš„æœ¬è´¨ä¸æ¶æ„

### 1.1 ä»€ä¹ˆæ˜¯ ESLint

ESLint æ˜¯ä¸€ä¸ª**å¼€æºçš„é™æ€ä»£ç åˆ†æå·¥å…·**ï¼Œç”¨äºè¯†åˆ«å’ŒæŠ¥å‘Š JavaScript/TypeScript ä»£ç ä¸­çš„é—®é¢˜ã€‚

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- **è¯­æ³•æ£€æŸ¥**ï¼šå‘ç°ä»£ç ä¸­çš„æ½œåœ¨é”™è¯¯
- **é£æ ¼æ£€æŸ¥**ï¼šå¼ºåˆ¶æ‰§è¡Œä¸€è‡´çš„ä»£ç é£æ ¼
- **æœ€ä½³å®è·µ**ï¼šé¼“åŠ±é‡‡ç”¨å…¬è®¤çš„ç¼–ç¨‹æœ€ä½³å®è·µ
- **è‡ªåŠ¨ä¿®å¤**ï¼šè‡ªåŠ¨ä¿®å¤æŸäº›ç±»å‹çš„é—®é¢˜

### 1.2 ESLint æ¶æ„

ESLint çš„æ¶æ„è®¾è®¡æ˜¯é«˜åº¦å¯é…ç½®å’Œå¯æ‰©å±•çš„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESLint å¼•æ“              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è§£æå™¨    â”‚  è§„åˆ™ç³»ç»Ÿ     â”‚ æŠ¥å‘Šç³»ç»Ÿ  â”‚
â”‚ (Parser)  â”‚  (Rules)      â”‚ (Reporter)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚           â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
â”‚ é…ç½®æ–‡ä»¶  â”‚ â”‚  æ’ä»¶     â”‚ â”‚ æ ¼å¼åŒ–å™¨  â”‚
â”‚(.eslintrc)â”‚ â”‚(Plugins)  â”‚ â”‚(Formatters)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·¥ä½œæµç¨‹ï¼š**
1. è§£æå™¨å°†æºä»£ç è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ (AST)
2. è§„åˆ™ç³»ç»Ÿåœ¨ AST ä¸Šè¿è¡Œå„ç§æ£€æŸ¥
3. æŠ¥å‘Šç³»ç»Ÿæ”¶é›†å¹¶æ•´ç†å‘ç°çš„é—®é¢˜
4. æ ¼å¼åŒ–å™¨å°†é—®é¢˜ä»¥æŒ‡å®šæ ¼å¼è¾“å‡º

> **ğŸ’¡ æç¤º**  
> ESLint çš„çµæ´»æ€§ä¸»è¦æºäºå…¶æ¨¡å—åŒ–è®¾è®¡ï¼Œå…è®¸å¼€å‘è€…é€‰æ‹©è§£æå™¨ã€è§„åˆ™é›†å’Œè¾“å‡ºæ ¼å¼ã€‚

## äºŒã€ESLint æ ¸å¿ƒç»„ä»¶è¯¦è§£

### 2.1 è§£æå™¨ (Parser)

ESLint é»˜è®¤ä½¿ç”¨ Espree ä½œä¸ºè§£æå™¨ï¼Œä½†å¯ä»¥é…ç½®ä½¿ç”¨å…¶ä»–è§£æå™¨ï¼š

| è§£æå™¨ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|-------|-----|---------|
| Espree | é»˜è®¤è§£æå™¨ï¼ŒåŸºäº Acorn | æ ‡å‡† JavaScript |
| @typescript-eslint/parser | TypeScript è§£æ | TypeScript é¡¹ç›® |
| @babel/eslint-parser | Babel æ”¯æŒ | ä½¿ç”¨å®éªŒæ€§ JS ç‰¹æ€§ |
| vue-eslint-parser | .vue æ–‡ä»¶è§£æ | Vue.js é¡¹ç›® |

**è§£æå™¨é…ç½®ç¤ºä¾‹ï¼š**

```json
{
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": 2022,
    "sourceType": "module",
    "ecmaFeatures": {
      "jsx": true
    },
    "project": "./tsconfig.json"
  }
}
```

**è§£æå™¨é€‰é¡¹è¯´æ˜ï¼š**
- `ecmaVersion`ï¼šæŒ‡å®š JavaScript ç‰ˆæœ¬
- `sourceType`ï¼šæŒ‡å®šä»£ç ç±»å‹ï¼ˆ"script" æˆ– "module"ï¼‰
- `ecmaFeatures`ï¼šæŒ‡å®šé¢å¤–ç‰¹æ€§ï¼ˆå¦‚ JSXï¼‰

### 2.2 è§„åˆ™ç³»ç»Ÿ (Rules)

ESLint è§„åˆ™æ˜¯ ESLint çš„æ ¸å¿ƒï¼Œæ¯æ¡è§„åˆ™éƒ½æ˜¯ç‹¬ç«‹ã€å¯é…ç½®çš„ï¼š

**è§„åˆ™çš„åŸºæœ¬ç»“æ„ï¼š**
```javascript
// ä¸€ä¸ªç®€åŒ–çš„ ESLint è§„åˆ™ç¤ºä¾‹
module.exports = {
  meta: {
    type: "suggestion", // è§„åˆ™ç±»å‹
    docs: {
      description: "ç¦æ­¢ä½¿ç”¨ var", // è§„åˆ™æè¿°
      category: "ECMAScript 6",
      recommended: true
    },
    fixable: "code", // è¯¥è§„åˆ™æ˜¯å¦å¯è‡ªåŠ¨ä¿®å¤
    schema: [] // è§„åˆ™é€‰é¡¹çš„éªŒè¯æ¨¡å¼
  },
  create(context) {
    return {
      // è®¿é—®è€…æ¨¡å¼ï¼šå½“è§£æå™¨é‡åˆ° VariableDeclaration èŠ‚ç‚¹æ—¶æ‰§è¡Œ
      VariableDeclaration(node) {
        // æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† var
        if (node.kind === 'var') {
          context.report({
            node,
            message: "ç¦æ­¢ä½¿ç”¨ varï¼Œè¯·æ”¹ç”¨ let æˆ– const",
            fix(fixer) {
              // æä¾›è‡ªåŠ¨ä¿®å¤åŠŸèƒ½
              return fixer.replaceText(node.start, 3, 'let');
            }
          });
        }
      }
    };
  }
};
```

**è§„åˆ™çº§åˆ«ï¼š**

ESLint è§„åˆ™æœ‰ä¸‰ä¸ªçº§åˆ«ï¼š

- `"off"` æˆ– `0` - ç¦ç”¨è§„åˆ™
- `"warn"` æˆ– `1` - å¼€å¯è§„åˆ™ï¼Œä½œä¸ºè­¦å‘Šï¼ˆä¸å½±å“é€€å‡ºç ï¼‰
- `"error"` æˆ– `2` - å¼€å¯è§„åˆ™ï¼Œä½œä¸ºé”™è¯¯ï¼ˆè§¦å‘æ—¶é€€å‡ºç ä¸º 1ï¼‰

```json
{
  "rules": {
    "no-console": "warn",      // ä½¿ç”¨ console æ—¶è­¦å‘Š
    "no-unused-vars": "error", // æœªä½¿ç”¨çš„å˜é‡æŠ¥é”™
    "eqeqeq": "off"           // å…³é—­å…¨ç­‰æ£€æŸ¥
  }
}
```

### 2.3 æ’ä»¶ç³»ç»Ÿ (Plugins)

ESLint æ’ä»¶æ˜¯æ‰©å±• ESLint åŠŸèƒ½çš„æ–¹å¼ï¼Œé€šå¸¸åŒ…å«**è‡ªå®šä¹‰è§„åˆ™é›†**ã€**ç¯å¢ƒ**å’Œ**é…ç½®**ã€‚

**å‘½åçº¦å®šï¼š** 
- æ’ä»¶åŒ…åä¸º `eslint-plugin-{name}` 
- é…ç½®ä¸­å¯ç®€å†™ä¸º `{name}`

**å¸¸ç”¨æ’ä»¶ç¤ºä¾‹ï¼š**

```json
{
  "plugins": [
    "react",           // eslint-plugin-react
    "@typescript-eslint", // @typescript-eslint/eslint-plugin
    "import"           // eslint-plugin-import
  ],
  "rules": {
    "react/jsx-uses-react": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "import/no-unresolved": "error"
  }
}
```

**ä¸»è¦æ’ä»¶åŠŸèƒ½ï¼š**
- æä¾›ç‰¹å®šæŠ€æœ¯æ ˆçš„è§„åˆ™ï¼ˆå¦‚ Reactã€Vueï¼‰
- å¢å¼ºå†…ç½®è§„åˆ™
- æä¾›æ–°çš„å…±äº«é…ç½®
- å¢åŠ ç‰¹å®šç¯å¢ƒå®šä¹‰

> **âš ï¸ æ³¨æ„**  
> æ·»åŠ æ’ä»¶åªæ˜¯å°†è§„åˆ™å¯¼å…¥ ESLintï¼Œè¿˜éœ€è¦åœ¨ rules é…ç½®ä¸­æ˜¾å¼å¯ç”¨éœ€è¦çš„è§„åˆ™ã€‚

### 2.4 é…ç½® (Configs)

ESLint é…ç½®æŒ‡å®šå¦‚ä½•åˆ†æå’ŒæŠ¥å‘Šä»£ç é—®é¢˜ï¼Œæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼š

**é…ç½®æ–‡ä»¶æ ¼å¼ï¼š**
- `.eslintrc.js`ï¼ˆæ¨èï¼Œæ”¯æŒæ³¨é‡Šå’ŒåŠ¨æ€å†…å®¹ï¼‰
- `.eslintrc.json`
- `.eslintrc.yaml`
- `package.json` ä¸­çš„ `eslintConfig` å­—æ®µ

**å…±äº«é…ç½®ï¼š**

å…±äº«é…ç½®æ˜¯é¢„å®šä¹‰çš„è§„åˆ™é›†åˆï¼Œå¯é€šè¿‡ `extends` å­—æ®µä½¿ç”¨ï¼š

```json
{
  "extends": [
    "eslint:recommended",       // ESLint å†…ç½®æ¨èè§„åˆ™
    "plugin:react/recommended", // React æ’ä»¶æ¨èè§„åˆ™
    "airbnb"                   // Airbnb é£æ ¼æŒ‡å—
  ]
}
```

**å¸¸è§å…±äº«é…ç½®ï¼š**
- `eslint:recommended` - ESLint å†…ç½®æ¨èè§„åˆ™
- `eslint:all` - ESLint çš„æ‰€æœ‰è§„åˆ™
- `airbnb` - Airbnb çš„ JavaScript é£æ ¼æŒ‡å—
- `standard` - JavaScript Standard Style
- `google` - Google JavaScript é£æ ¼æŒ‡å—
- `prettier` - ç¦ç”¨ä¸ Prettier å†²çªçš„è§„åˆ™

### 2.5 ç¯å¢ƒ (Environments)

ç¯å¢ƒå®šä¹‰äº†å…¨å±€å˜é‡å’Œç‰¹å®šç¯å¢ƒä¸‹çš„è¯­æ³•ç‰¹æ€§ï¼š

```json
{
  "env": {
    "browser": true,  // æµè§ˆå™¨å…¨å±€å˜é‡
    "node": true,     // Node.js å…¨å±€å˜é‡
    "jest": true,     // Jest æµ‹è¯•å…¨å±€å˜é‡
    "es2022": true    // ES2022 è¯­æ³•ç‰¹æ€§
  }
}
```

**ä¸»è¦ç¯å¢ƒç±»å‹ï¼š**
- è¿è¡Œç¯å¢ƒï¼š`browser`, `node`, `commonjs`
- æ¡†æ¶ç¯å¢ƒï¼š`react`, `vue`, `angular`
- æµ‹è¯•ç¯å¢ƒï¼š`jest`, `mocha`
- è¯­è¨€ç‰ˆæœ¬ï¼š`es6`, `es2022`

## ä¸‰ã€AST ä¸ä»£ç åˆ†æåŸç†

### 3.1 ä»€ä¹ˆæ˜¯ AST

**æŠ½è±¡è¯­æ³•æ ‘ (Abstract Syntax Tree)** æ˜¯æºä»£ç çš„ç»“æ„åŒ–è¡¨ç¤ºï¼ŒESLint é€šè¿‡åˆ†æ AST æ¥æ£€æŸ¥ä»£ç é—®é¢˜ã€‚

**ä»£ç åˆ° AST çš„è½¬æ¢ï¼š**

```javascript
// æºä»£ç 
function add(a, b) {
  return a + b;
}
```

è½¬æ¢ä¸º ASTï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š

```json
{
  "type": "Program",
  "body": [
    {
      "type": "FunctionDeclaration",
      "id": {
        "type": "Identifier",
        "name": "add"
      },
      "params": [
        {
          "type": "Identifier",
          "name": "a"
        },
        {
          "type": "Identifier",
          "name": "b"
        }
      ],
      "body": {
        "type": "BlockStatement",
        "body": [
          {
            "type": "ReturnStatement",
            "argument": {
              "type": "BinaryExpression",
              "operator": "+",
              "left": {
                "type": "Identifier",
                "name": "a"
              },
              "right": {
                "type": "Identifier",
                "name": "b"
              }
            }
          }
        ]
      }
    }
  ]
}
```

**AST èŠ‚ç‚¹è®¿é—®ï¼š**

ESLint è§„åˆ™é€šè¿‡è®¿é—®è€…æ¨¡å¼éå† AST èŠ‚ç‚¹ï¼š

```javascript
// è§„åˆ™ä¸­çš„è®¿é—®è€…
{
  // è®¿é—®æ‰€æœ‰å‡½æ•°å£°æ˜èŠ‚ç‚¹
  FunctionDeclaration(node) {
    // æ£€æŸ¥å‡½æ•°å‘½åæ˜¯å¦ç¬¦åˆè§„èŒƒ
  },
  
  // è®¿é—®æ‰€æœ‰äºŒå…ƒæ“ä½œç¬¦èŠ‚ç‚¹
  BinaryExpression(node) {
    // æ£€æŸ¥æ“ä½œç¬¦ä½¿ç”¨æ˜¯å¦åˆè§„
  }
}
```

### 3.2 ESLint æ‰§è¡Œè¿‡ç¨‹

ESLint çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

```
æºä»£ç  â†’ è§£æ â†’ éå† AST â†’ æ‰§è¡Œè§„åˆ™ â†’ æ”¶é›†é—®é¢˜ â†’ æ ¼å¼åŒ–è¾“å‡º â†’ (å¯é€‰) è‡ªåŠ¨ä¿®å¤
```

**æ ¸å¿ƒæ‰§è¡Œæ­¥éª¤ï¼š**

1. **åŠ è½½é…ç½®**ï¼šè¯»å–å¹¶åˆå¹¶é…ç½®æ–‡ä»¶
2. **æ‰«ææ–‡ä»¶**ï¼šç¡®å®šè¦æ£€æŸ¥çš„æ–‡ä»¶
3. **è§£ææ–‡ä»¶**ï¼šå°†ä»£ç è§£æä¸º AST
4. **æ‰§è¡Œè§„åˆ™**ï¼šåœ¨ AST ä¸Šè¿è¡Œè§„åˆ™
5. **æ”¶é›†é—®é¢˜**ï¼šæ”¶é›†è§„åˆ™æŠ¥å‘Šçš„é—®é¢˜
6. **è¾“å‡ºç»“æœ**ï¼šæ ¹æ®æ ¼å¼åŒ–å™¨è¾“å‡ºç»“æœ
7. **è‡ªåŠ¨ä¿®å¤**ï¼šå¦‚æœå¯ç”¨äº† `--fix` é€‰é¡¹ï¼Œå°è¯•ä¿®å¤é—®é¢˜

## å››ã€ESLint ä½¿ç”¨æ¨¡å¼

### 4.1 å¸¸ç”¨å‘½ä»¤è¡Œç”¨æ³•

ESLint CLI æä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œé€‰é¡¹ï¼š

```bash
# åŸºæœ¬ç”¨æ³•ï¼šæ£€æŸ¥æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•
eslint src/

# è‡ªåŠ¨ä¿®å¤é—®é¢˜
eslint src/ --fix

# æŒ‡å®šæ ¼å¼è¾“å‡º
eslint src/ --format html > report.html

# åªæ£€æŸ¥å˜æ›´çš„æ–‡ä»¶
eslint src/ --cache

# æŒ‡å®šé…ç½®æ–‡ä»¶
eslint src/ --config my-config.js

# å¿½ç•¥ç‰¹å®šæ–‡ä»¶
eslint src/ --ignore-pattern "*.test.js"
```

### 4.2 æ³¨é‡ŠæŒ‡ä»¤

ESLint æ”¯æŒä½¿ç”¨æ³¨é‡Šåœ¨ä»£ç ä¸­æ§åˆ¶è§„åˆ™ï¼š

```javascript
// ç¦ç”¨æ•´ä¸ªæ–‡ä»¶çš„ ESLint
/* eslint-disable */

// ç¦ç”¨ç‰¹å®šè§„åˆ™
/* eslint-disable no-console, no-unused-vars */

// ç¦ç”¨ä¸‹ä¸€è¡Œçš„ ESLint
// eslint-disable-next-line
console.log('debug info');

// é’ˆå¯¹ç‰¹å®šè¡Œç¦ç”¨ç‰¹å®šè§„åˆ™
console.log('debug info'); // eslint-disable-line no-console

// é‡æ–°å¯ç”¨ä¹‹å‰ç¦ç”¨çš„è§„åˆ™
/* eslint-enable no-console */
```

**æ³¨é‡ŠæŒ‡ä»¤çš„ä½¿ç”¨åœºæ™¯ï¼š**
- ä¸´æ—¶ç¦ç”¨è§„åˆ™å¤„ç†ç‰¹æ®Šæƒ…å†µ
- å¤„ç†è¯¯æŠ¥
- å¤„ç†è¿‡æ¸¡æœŸçš„é—ç•™ä»£ç 
- å¤„ç†ç¬¬ä¸‰æ–¹åº“çš„å…¼å®¹æ€§é—®é¢˜

> **âš ï¸ è­¦å‘Š**  
> è¿‡åº¦ä½¿ç”¨ç¦ç”¨æ³¨é‡Šä¼šé™ä½ä»£ç è´¨é‡ã€‚æœ€å¥½åªåœ¨ç‰¹å®šæƒ…å†µä¸‹ä¸´æ—¶ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è§„é¿è§„åˆ™æ£€æŸ¥ã€‚

### 4.3 ä¸ç¼–è¾‘å™¨é›†æˆ

ESLint å¯ä»¥ä¸ä¸»æµç¼–è¾‘å™¨é›†æˆï¼Œæä¾›å®æ—¶ä»£ç æ£€æŸ¥ï¼š

**VS Code é…ç½®ç¤ºä¾‹ï¼š**

1. å®‰è£… ESLint æ‰©å±•
2. è®¾ç½®è‡ªåŠ¨ä¿®å¤é€‰é¡¹ï¼š

```json
// .vscode/settings.json
{
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ]
}
```

**ä¸»è¦ç¼–è¾‘å™¨é›†æˆåŠŸèƒ½ï¼š**
- å®æ—¶æ˜¾ç¤ºä»£ç é—®é¢˜
- ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤
- è§„åˆ™å¿«é€Ÿä¿®å¤å»ºè®®
- è§„åˆ™å¿½ç•¥é€‰é¡¹

## äº”ã€ESLint vs å…¶ä»–å·¥å…·

### 5.1 ESLint vs JSLint/JSHint

æ—©æœŸçš„ JavaScript æ£€æŸ¥å·¥å…·ä¸ ESLint çš„æ¯”è¾ƒï¼š

| ç‰¹æ€§ | ESLint | JSLint | JSHint |
|-----|--------|--------|--------|
| å¯é…ç½®æ€§ | é«˜åº¦å¯é…ç½® | å‡ ä¹ä¸å¯é…ç½® | éƒ¨åˆ†å¯é…ç½® |
| è‡ªå®šä¹‰è§„åˆ™ | æ”¯æŒ | ä¸æ”¯æŒ | ä¸æ”¯æŒ |
| æ’ä»¶ç³»ç»Ÿ | ä¸°å¯Œ | æ—  | æœ‰é™ |
| è‡ªåŠ¨ä¿®å¤ | æ”¯æŒ | ä¸æ”¯æŒ | ä¸æ”¯æŒ |
| ç°ä»£ JS æ”¯æŒ | å®Œå…¨æ”¯æŒ | æœ‰é™ | éƒ¨åˆ†æ”¯æŒ |
| ä¸»å¯¼æ€æƒ³ | çµæ´»å®šåˆ¶ | å¼ºåˆ¶æ ‡å‡† | ä¸­ç­‰çµæ´»æ€§ |

> **å†å²æ¼”è¿›**  
> JavaScript ä»£ç æ£€æŸ¥å·¥å…·ä» JSLintï¼ˆå›ºæ‰§å·±è§ï¼‰â†’ JSHintï¼ˆä¸­ç­‰çµæ´»ï¼‰â†’ ESLintï¼ˆé«˜åº¦å¯é…ç½®ï¼‰çš„æ¼”è¿›ï¼Œåæ˜ äº†ç¤¾åŒºå¯¹çµæ´»æ€§éœ€æ±‚çš„å¢é•¿ã€‚

### 5.2 ESLint vs Prettier

ESLint å’Œ Prettier è§£å†³ä¸åŒçš„é—®é¢˜ï¼Œé€šå¸¸æ˜¯äº’è¡¥çš„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ESLint       â”‚     â”‚     Prettier      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ ä»£ç è´¨é‡è§„åˆ™    â”‚     â”‚ âœ“ ä»£ç æ ¼å¼åŒ–      â”‚
â”‚ âœ“ è¯­æ³•æ£€æŸ¥        â”‚     â”‚ âœ“ å›ºå®šæ ¼å¼é£æ ¼    â”‚
â”‚ âœ“ æœ€ä½³å®è·µ        â”‚     â”‚ âœ“ å¼ºåˆ¶ä¸€è‡´æ ¼å¼    â”‚
â”‚ âœ“ éƒ¨åˆ†æ ¼å¼è§„åˆ™    â”‚     â”‚ âœ— ä¸å¤„ç†ä»£ç è´¨é‡  â”‚
â”‚ âœ“ é«˜åº¦å¯é…ç½®      â”‚     â”‚ âœ“ é…ç½®ç®€å•        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é…åˆä½¿ç”¨çš„æœ€ä½³å®è·µï¼š**
1. ESLint å¤„ç†ä»£ç è´¨é‡é—®é¢˜
2. Prettier å¤„ç†ä»£ç æ ¼å¼é—®é¢˜
3. ä½¿ç”¨ `eslint-config-prettier` ç¦ç”¨ ESLint ä¸­ä¸ Prettier å†²çªçš„è§„åˆ™

```json
{
  "extends": [
    "eslint:recommended",
    "prettier" // æ”¾åœ¨æœ€åï¼Œç¦ç”¨å†²çªè§„åˆ™
  ]
}
```

### 5.3 ESLint vs TypeScript

ESLint å’Œ TypeScript ç¼–è¯‘å™¨çš„ç±»å‹æ£€æŸ¥æœåŠ¡ä¸åŒè§’è‰²ï¼š

| æ–¹é¢ | ESLint | TypeScript |
|-----|--------|------------|
| è¯­æ³•æ£€æŸ¥ | âœ“ | âœ“ |
| ä»£ç é£æ ¼ | âœ“ | âœ— |
| ç±»å‹æ£€æŸ¥ | é€šè¿‡æ’ä»¶éƒ¨åˆ†æ”¯æŒ | âœ“ åŸç”Ÿæ”¯æŒ |
| æœ€ä½³å®è·µ | âœ“ | éƒ¨åˆ† |
| è‡ªåŠ¨ä¿®å¤ | âœ“ | æœ‰é™ |

**ååŒå·¥ä½œæµç¨‹ï¼š**
1. TypeScript (`tsc --noEmit`) è¿›è¡Œç±»å‹æ£€æŸ¥
2. ESLint + typescript-eslint è¿›è¡Œä»£ç è´¨é‡å’Œé£æ ¼æ£€æŸ¥
3. æ„å»ºæ—¶åŒæ—¶è¿è¡Œä¸¤ç§æ£€æŸ¥

```json
// package.json
{
  "scripts": {
    "type-check": "tsc --noEmit",
    "lint": "eslint src --ext .ts,.tsx",
    "validate": "npm run type-check && npm run lint"
  }
}
```

## å…­ã€ä»æ¦‚å¿µåˆ°å®è·µ

### 6.1 ESLint ç”Ÿæ€ç³»ç»Ÿå…¨æ™¯

ESLint æ‹¥æœ‰åºå¤§çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

- **è§„åˆ™é›†**ï¼šå¦‚ `eslint:recommended`, `eslint:all`
- **å…±äº«é…ç½®**ï¼šå¦‚ `airbnb`, `standard`
- **æ’ä»¶**ï¼šæ¡†æ¶ç‰¹å®šï¼ˆ`eslint-plugin-react`ï¼‰ã€å·¥å…·ç‰¹å®šï¼ˆ`eslint-plugin-import`ï¼‰
- **è§£æå™¨**ï¼šæ”¯æŒå„ç§è¯­è¨€æ‰©å±•å’Œå®éªŒç‰¹æ€§
- **æ ¼å¼åŒ–å™¨**ï¼šå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆ`stylish`ã€`json`ã€`html`ï¼‰
- **é›†æˆå·¥å…·**ï¼šä¸æ„å»ºå·¥å…·ã€CI/CDã€ç¼–è¾‘å™¨çš„é›†æˆ

### 6.2 é€‰æ‹©åˆé€‚çš„é¢„è®¾

ä¸ºå›¢é˜Ÿé€‰æ‹©åˆé€‚çš„ ESLint é¢„è®¾ï¼š

```
ä¸¥æ ¼ç¨‹åº¦ï¼šstandard < google < airbnb
       ï¼ˆå®½æ¾ï¼‰           ï¼ˆä¸¥æ ¼ï¼‰
```

**é€‰æ‹©æ ‡å‡†ï¼š**
- å›¢é˜Ÿç»éªŒæ°´å¹³
- é¡¹ç›®å¤æ‚åº¦
- æŠ€æœ¯æ ˆç‰¹æ€§
- å·²æœ‰ä»£ç åº“çŠ¶æ€
- å›¢é˜Ÿè§„èŒƒåå¥½

**å¸¸è§é¢„è®¾æ¨èï¼š**
- **åˆåˆ›å›¢é˜Ÿ**ï¼š`standard` æˆ– `eslint:recommended`ï¼ˆé—¨æ§›ä½ï¼‰
- **React é¡¹ç›®**ï¼š`airbnb` æˆ– `react-app`
- **TypeScript é¡¹ç›®**ï¼š`@typescript-eslint/recommended`
- **Vue é¡¹ç›®**ï¼š`plugin:vue/vue3-recommended`

### 6.3 ESLint é…ç½®ç­–ç•¥

**ä»ç®€å•åˆ°å¤æ‚çš„æ¸è¿›å¼é…ç½®ç­–ç•¥ï¼š**

**1. åŸºç¡€é…ç½®ï¼ˆæ–°é¡¹ç›®èµ·æ­¥ï¼‰**
```json
{
  "extends": "eslint:recommended",
  "env": {
    "browser": true,
    "es2022": true
  },
  "rules": {
    "no-console": "warn"
  }
}
```

**2. ä¸­ç­‰é…ç½®ï¼ˆå¢åŠ æ¡†æ¶æ”¯æŒï¼‰**
```json
{
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended"
  ],
  "plugins": ["react"],
  "parserOptions": {
    "ecmaFeatures": {
      "jsx": true
    }
  },
  "rules": {
    "react/prop-types": "warn"
  }
}
```

**3. é«˜çº§é…ç½®ï¼ˆå…¨é¢è¦†ç›–ï¼‰**
```json
{
  "extends": [
    "airbnb",
    "plugin:@typescript-eslint/recommended",
    "plugin:import/typescript",
    "prettier"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": ["@typescript-eslint", "react-hooks", "import"],
  "settings": {
    "import/resolver": {
      "typescript": {}
    }
  },
  "rules": {
    // è‡ªå®šä¹‰è§„åˆ™è°ƒæ•´
  }
}
```

## å­¦ä¹ å»ºè®®

> **ğŸ“š è¿›é˜¶è·¯å¾„**
> 
> 1. **ä»ç†è§£æ ¸å¿ƒæ¦‚å¿µå¼€å§‹**ï¼šæŒæ¡ ESLint çš„åŸºç¡€æ¶æ„
> 2. **å­¦ä¹ ä½¿ç”¨å…±äº«é…ç½®**ï¼šå…ˆç”¨ç°æˆçš„è§„åˆ™é›†ï¼Œäº†è§£å…¶è®¾è®¡ç†å¿µ
> 3. **å®šåˆ¶é€‚åˆå›¢é˜Ÿçš„è§„åˆ™**ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´è§„åˆ™é…ç½®
> 4. **å­¦ä¹ åˆ›å»ºè‡ªå®šä¹‰è§„åˆ™**ï¼šè§£å†³é¡¹ç›®ç‰¹å®šéœ€æ±‚
> 5. **é›†æˆåˆ°å¼€å‘å·¥ä½œæµ**ï¼šç¼–è¾‘å™¨ã€Git hooksã€CI/CD

> **âš ï¸ å¸¸è§è¯¯åŒº**
> 
> - **è§„åˆ™è¶Šå¤šè¶Šå¥½**ï¼šåº”å…³æ³¨å¯¹å›¢é˜Ÿæœ€æœ‰ä»·å€¼çš„è§„åˆ™
> - **ç¦ç”¨è§„åˆ™è€Œéç†è§£**ï¼šåº”ç†è§£è§„åˆ™èƒŒåçš„åŸç†
> - **å¿½è§†è‡ªåŠ¨ä¿®å¤**ï¼šè‡ªåŠ¨ä¿®å¤å¯ä»¥å¤§å¹…æé«˜æ•ˆç‡
> - **é…ç½®åä¸å†è°ƒæ•´**ï¼šè§„åˆ™åº”æ ¹æ®å›¢é˜Ÿåé¦ˆæŒç»­ä¼˜åŒ–
> - **å­¤ç«‹ä½¿ç”¨**ï¼šåº”ä¸å…¶ä»–å·¥å…·ï¼ˆå¦‚ Prettierï¼‰ååŒå·¥ä½œ

## å‚è€ƒèµ„æ–™

- [ESLint å®˜æ–¹æ–‡æ¡£](https://eslint.org/docs/user-guide/) - æœ€å…¨é¢çš„ ESLint æŒ‡å—
- [AST Explorer](https://astexplorer.net/) - å¯è§†åŒ–æŸ¥çœ‹ä»£ç çš„ AST ç»“æ„
- [eslint-config-airbnb](https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb) - Airbnb çš„ ESLint è§„åˆ™é›†
- [typescript-eslint](https://github.com/typescript-eslint/typescript-eslint) - TypeScript çš„ ESLint æ”¯æŒ
- [Awesome ESLint](https://github.com/dustinspecker/awesome-eslint) - ESLint èµ„æºé›†åˆ

---

**ä¸‹ä¸€ç« ** â†’ [ç¬¬ 11 ç« ï¼šESLint é…ç½®æ–‡ä»¶è¯¦è§£](./11-eslint-config.md)
