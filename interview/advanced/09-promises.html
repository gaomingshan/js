<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise é¢è¯•é¢˜ - JavaScript é¢è¯•é¢˜ç²¾é€‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 2rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #1a202c;
            margin-bottom: 0.5rem;
            font-size: 2rem;
        }

        .subtitle {
            color: #718096;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .quiz-item {
            background: #f7fafc;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 4px solid #667eea;
        }

        .quiz-item-header {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .difficulty {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .difficulty.easy {
            background: #c6f6d5;
            color: #22543d;
        }

        .difficulty.medium {
            background: #fef5e7;
            color: #744210;
        }

        .difficulty.hard {
            background: #fed7d7;
            color: #742a2a;
        }

        .tag {
            background: #e6fffa;
            color: #234e52;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .question {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .code-question {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
            border-left: 4px solid #667eea;
        }

        .code-question pre {
            margin: 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .code-question code {
            font-family: inherit;
        }

        .keyword { color: #c792ea; }
        .function { color: #82aaff; }
        .string { color: #c3e88d; }
        .number { color: #f78c6c; }
        .comment { color: #697098; font-style: italic; }
        .operator { color: #89ddff; }
        .property { color: #ffcb6b; }
        .bracket { color: #a6accd; }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .option {
            background: white;
            padding: 1rem 1.25rem;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: #667eea;
            background: #f7fafc;
            transform: translateX(4px);
        }

        .option.selected {
            border-color: #667eea;
            background: #eef2ff;
        }

        .option.correct {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .option.wrong {
            border-color: #f56565;
            background: #fff5f5;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #2d3748;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .answer-section {
            display: none;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            border: 2px solid #bee3f8;
        }

        .answer-section.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .answer-label {
            display: inline-block;
            background: #48bb78;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .explanation {
            color: #2d3748;
            line-height: 1.8;
        }

        .explanation h4 {
            color: #2d3748;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.1rem;
        }

        .explanation ul, .explanation ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .explanation li {
            margin-bottom: 0.5rem;
        }

        .explanation p {
            margin-bottom: 1rem;
        }

        .explanation strong {
            color: #1a202c;
            font-weight: 600;
        }

        .source-tag {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.4rem 0.8rem;
            background: #edf2f7;
            color: #4a5568;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .nav-links a {
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }

        .nav-links a:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ Promise é¢è¯•é¢˜ç²¾é€‰</h1>
        <p class="subtitle">æŒæ¡ Promise æ ¸å¿ƒæ¦‚å¿µå’Œå¸¸è§é™·é˜± - 10é“ç²¾é€‰é¢˜ç›®</p>

        <!-- Q1: PromiseåŸºç¡€ -->
        <div class="quiz-item" data-question="1">
            <div class="quiz-item-header">
                <span class="difficulty easy">ğŸŸ¢ åŸºç¡€</span>
                <span class="tag">PromiseçŠ¶æ€</span>
            </div>
            
            <div class="question">Q1: Promise æœ‰å“ªä¸‰ç§çŠ¶æ€ï¼ŸçŠ¶æ€è½¬æ¢è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> pending â†’ fulfilled æˆ– pending â†’ rejectedï¼ŒçŠ¶æ€ä¸€æ—¦æ”¹å˜ä¸å¯é€†
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> pending â†’ fulfilled â†’ rejectedï¼Œå¯ä»¥å¤šæ¬¡è½¬æ¢
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> waiting â†’ success â†’ failedï¼Œå¯ä»¥éšæ—¶æ”¹å˜
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> init â†’ complete â†’ errorï¼ŒçŠ¶æ€å¯é€†
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(1, 'A')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(1)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-1">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šA</div>
                <div class="explanation">
                    <h4>Promise ä¸‰ç§çŠ¶æ€è¯¦è§£ï¼š</h4>
                    
                    <p><strong>1. ä¸‰ç§çŠ¶æ€ï¼š</strong></p>
                    <ul>
                        <li><strong>pendingï¼ˆè¿›è¡Œä¸­ï¼‰</strong>ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸä¹Ÿä¸æ˜¯å¤±è´¥</li>
                        <li><strong>fulfilledï¼ˆå·²æˆåŠŸï¼‰</strong>ï¼šæ“ä½œæˆåŠŸå®Œæˆ</li>
                        <li><strong>rejectedï¼ˆå·²å¤±è´¥ï¼‰</strong>ï¼šæ“ä½œå¤±è´¥</li>
                    </ul>
                    
                    <p><strong>2. çŠ¶æ€è½¬æ¢è§„åˆ™ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// çŠ¶æ€è½¬æ¢æ˜¯å•å‘çš„</span>
<span class="keyword">const</span> promise <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>resolve, reject<span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
    <span class="comment">// pending â†’ fulfilled</span>
    <span class="function">resolve</span><span class="bracket">(</span><span class="string">'æˆåŠŸ'</span><span class="bracket">)</span>;
    
    <span class="comment">// åç»­çš„çŠ¶æ€æ”¹å˜æ— æ•ˆ</span>
    <span class="function">reject</span><span class="bracket">(</span><span class="string">'å¤±è´¥'</span><span class="bracket">)</span>;  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span>
    <span class="function">resolve</span><span class="bracket">(</span><span class="string">'å†æ¬¡æˆåŠŸ'</span><span class="bracket">)</span>;  <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span>
<span class="bracket">}</span><span class="bracket">)</span>;

<span class="comment">// åªä¼šæ‰“å° 'æˆåŠŸ'</span>
promise.<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>result<span class="bracket">)</span><span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>3. çŠ¶æ€ä¸å¯é€†æ€§ï¼š</strong></p>
                    <ul>
                        <li>Promise çŠ¶æ€åªèƒ½ä» pending å˜ä¸º fulfilled æˆ– rejected</li>
                        <li>çŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œå°±æ°¸ä¹…ä¿æŒï¼Œä¸ä¼šå†å˜</li>
                        <li>è¿™ä¿è¯äº†å¼‚æ­¥æ“ä½œçš„ç¡®å®šæ€§å’Œå¯é æ€§</li>
                    </ul>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseåŸºç¡€</span>
            </div>
        </div>

        <!-- Q2: Promiseé“¾å¼è°ƒç”¨ -->
        <div class="quiz-item" data-question="2">
            <div class="quiz-item-header">
                <span class="difficulty easy">ğŸŸ¢ åŸºç¡€</span>
                <span class="tag">é“¾å¼è°ƒç”¨</span>
            </div>
            
            <div class="question">Q2: ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</div>
            
            <div class="code-question"><pre><code><span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> x <span class="operator">+</span> <span class="number">1</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="bracket">{</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span> <span class="bracket">}</span><span class="bracket">)</span>
    .<span class="function">catch</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="number">1</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>x<span class="bracket">)</span><span class="bracket">)</span>;</code></pre></div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> 1
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> 2
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> Error: error
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> undefined
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(2, 'A')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(2)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-2">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šA</div>
                <div class="explanation">
                    <h4>Promise é“¾å¼è°ƒç”¨è¯¦è§£ï¼š</h4>
                    
                    <p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// æ­¥éª¤1ï¼šPromise.resolve(1) â†’ è¿”å›å€¼1</span>
<span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>

<span class="comment">// æ­¥éª¤2ï¼šx + 1 â†’ 1 + 1 = 2</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> x <span class="operator">+</span> <span class="number">1</span><span class="bracket">)</span>

<span class="comment">// æ­¥éª¤3ï¼šæŠ›å‡ºé”™è¯¯</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="bracket">{</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span> <span class="bracket">}</span><span class="bracket">)</span>

<span class="comment">// æ­¥éª¤4ï¼šcatchæ•è·é”™è¯¯ï¼Œè¿”å›1</span>
.<span class="function">catch</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="number">1</span><span class="bracket">)</span>

<span class="comment">// æ­¥éª¤5ï¼šthenæ¥æ”¶åˆ°1ï¼Œæ‰“å°1</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>x<span class="bracket">)</span><span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>å…³é”®ç‚¹ï¼š</strong></p>
                    <ul>
                        <li><code>catch()</code> æ•è·é”™è¯¯åè¿”å›ä¸€ä¸ªæ–°çš„ fulfilled Promise</li>
                        <li>åç»­çš„ <code>then()</code> ä¼šæ¥æ”¶ catch çš„è¿”å›å€¼</li>
                        <li>Promise é“¾ä¼šç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šä¸­æ–­</li>
                    </ul>
                    
                    <p><strong>Promise é“¾å¼è°ƒç”¨è§„åˆ™ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// then/catch éƒ½ä¼šè¿”å›æ–°çš„ Promise</span>
promise
    .<span class="function">then</span><span class="bracket">(</span>value <span class="operator">=></span> newValue<span class="bracket">)</span>     <span class="comment">// è¿”å›æ–°Promise(fulfilled)</span>
    .<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span> <span class="keyword">throw</span> error <span class="bracket">}</span><span class="bracket">)</span>  <span class="comment">// è¿”å›æ–°Promise(rejected)</span>
    .<span class="function">catch</span><span class="bracket">(</span>error <span class="operator">=></span> fixedValue<span class="bracket">)</span>  <span class="comment">// è¿”å›æ–°Promise(fulfilled)</span>
    .<span class="function">then</span><span class="bracket">(</span>value <span class="operator">=></span> <span class="bracket">{</span>...<span class="bracket">}</span><span class="bracket">)</span>;       <span class="comment">// ç»§ç»­å¤„ç†</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé“¾å¼è°ƒç”¨</span>
            </div>
        </div>

        <!-- Q3: Promise.all -->
        <div class="quiz-item" data-question="3">
            <div class="quiz-item-header">
                <span class="difficulty easy">ğŸŸ¢ åŸºç¡€</span>
                <span class="tag">é™æ€æ–¹æ³•</span>
            </div>
            
            <div class="question">Q3: Promise.all() çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> æ‰€æœ‰PromiseæˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥åˆ™å¤±è´¥
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> åªè¦æœ‰ä¸€ä¸ªPromiseæˆåŠŸå°±æˆåŠŸ
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> ç­‰å¾…æ‰€æœ‰Promiseå®Œæˆï¼Œæ— è®ºæˆåŠŸå¤±è´¥
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> è¿”å›æœ€å¿«å®Œæˆçš„Promiseç»“æœ
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(3, 'A')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(3)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-3">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šA</div>
                <div class="explanation">
                    <h4>Promise.all() è¯¦è§£ï¼š</h4>
                    
                    <p><strong>åŸºæœ¬ç”¨æ³•ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">const</span> p1 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;
<span class="keyword">const</span> p2 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">2</span><span class="bracket">)</span>;
<span class="keyword">const</span> p3 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>;

<span class="property">Promise</span>.<span class="function">all</span><span class="bracket">(</span><span class="bracket">[</span>p1, p2, p3<span class="bracket">]</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span>results <span class="operator">=></span> <span class="bracket">{</span>
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>results<span class="bracket">)</span>;  <span class="comment">// [1, 2, 3]</span>
<span class="bracket">}</span><span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>å¤±è´¥æƒ…å†µï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">const</span> p1 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;
<span class="keyword">const</span> p2 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">reject</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span>;
<span class="keyword">const</span> p3 <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>;

<span class="property">Promise</span>.<span class="function">all</span><span class="bracket">(</span><span class="bracket">[</span>p1, p2, p3<span class="bracket">]</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>results <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>results<span class="bracket">)</span><span class="bracket">)</span>
    .<span class="function">catch</span><span class="bracket">(</span>error <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>error<span class="bracket">)</span><span class="bracket">)</span>;  <span class="comment">// 'error'</span></code></pre></div>
                    
                    <p><strong>å…³é”®ç‰¹æ€§ï¼š</strong></p>
                    <ul>
                        <li>æ‰€æœ‰Promiseéƒ½æˆåŠŸ â†’ è¿”å›æ‰€æœ‰ç»“æœçš„æ•°ç»„</li>
                        <li>ä»»ä¸€Promiseå¤±è´¥ â†’ ç«‹å³è¿”å›ç¬¬ä¸€ä¸ªå¤±è´¥çš„åŸå› </li>
                        <li>ç»“æœæ•°ç»„é¡ºåºä¸è¾“å…¥æ•°ç»„é¡ºåºä¸€è‡´</li>
                        <li>å¹¶è¡Œæ‰§è¡Œï¼Œä¸æ˜¯ä¸²è¡Œ</li>
                    </ul>
                    
                    <p><strong>å®é™…åº”ç”¨ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// å¹¶å‘è¯·æ±‚å¤šä¸ªAPI</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">fetchMultipleData</span><span class="bracket">(</span><span class="bracket">)</span> <span class="bracket">{</span>
    <span class="keyword">const</span> <span class="bracket">[</span>users, posts, comments<span class="bracket">]</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="property">Promise</span>.<span class="function">all</span><span class="bracket">(</span><span class="bracket">[</span>
        <span class="function">fetch</span><span class="bracket">(</span><span class="string">'/api/users'</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span>r <span class="operator">=></span> r.<span class="function">json</span><span class="bracket">(</span><span class="bracket">)</span><span class="bracket">)</span>,
        <span class="function">fetch</span><span class="bracket">(</span><span class="string">'/api/posts'</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span>r <span class="operator">=></span> r.<span class="function">json</span><span class="bracket">(</span><span class="bracket">)</span><span class="bracket">)</span>,
        <span class="function">fetch</span><span class="bracket">(</span><span class="string">'/api/comments'</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span>r <span class="operator">=></span> r.<span class="function">json</span><span class="bracket">(</span><span class="bracket">)</span><span class="bracket">)</span>
    <span class="bracket">]</span><span class="bracket">)</span>;
    <span class="keyword">return</span> <span class="bracket">{</span> users, posts, comments <span class="bracket">}</span>;
<span class="bracket">}</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé™æ€æ–¹æ³•</span>
            </div>
        </div>

        <!-- Q4: Promise.race -->
        <div class="quiz-item" data-question="4">
            <div class="quiz-item-header">
                <span class="difficulty medium">ğŸŸ¡ è¿›é˜¶</span>
                <span class="tag">é™æ€æ–¹æ³•</span>
            </div>
            
            <div class="question">Q4: Promise.race() å’Œ Promise.any() çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> raceè¿”å›æœ€å¿«å®Œæˆçš„ï¼Œanyè¿”å›æœ€å¿«æˆåŠŸçš„
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> raceè¿”å›æ‰€æœ‰ç»“æœï¼Œanyè¿”å›ç¬¬ä¸€ä¸ªç»“æœ
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> ä¸¤è€…å®Œå…¨ç›¸åŒ
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> raceå¹¶è¡Œæ‰§è¡Œï¼Œanyä¸²è¡Œæ‰§è¡Œ
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(4, 'A')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(4)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-4">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šA</div>
                <div class="explanation">
                    <h4>Promise.race() vs Promise.any()ï¼š</h4>
                    
                    <p><strong>Promise.race()ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// è¿”å›æœ€å¿«å®Œæˆçš„Promiseï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰</span>
<span class="keyword">const</span> p1 <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span>resolve <span class="operator">=></span> <span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>, <span class="number">100</span><span class="bracket">)</span><span class="bracket">)</span>;
<span class="keyword">const</span> p2 <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>_, reject<span class="bracket">)</span> <span class="operator">=></span> <span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">reject</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span>, <span class="number">50</span><span class="bracket">)</span><span class="bracket">)</span>;

<span class="property">Promise</span>.<span class="function">race</span><span class="bracket">(</span><span class="bracket">[</span>p1, p2<span class="bracket">]</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>result<span class="bracket">)</span><span class="bracket">)</span>
    .<span class="function">catch</span><span class="bracket">(</span>error <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>error<span class="bracket">)</span><span class="bracket">)</span>;  <span class="comment">// 'error' (p2æ›´å¿«)</span></code></pre></div>
                    
                    <p><strong>Promise.any() (ES2021)ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// è¿”å›æœ€å¿«æˆåŠŸçš„Promiseï¼Œå¿½ç•¥å¤±è´¥çš„</span>
<span class="keyword">const</span> p1 <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span>resolve <span class="operator">=></span> <span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>, <span class="number">100</span><span class="bracket">)</span><span class="bracket">)</span>;
<span class="keyword">const</span> p2 <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>_, reject<span class="bracket">)</span> <span class="operator">=></span> <span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">reject</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span>, <span class="number">50</span><span class="bracket">)</span><span class="bracket">)</span>;

<span class="property">Promise</span>.<span class="function">any</span><span class="bracket">(</span><span class="bracket">[</span>p1, p2<span class="bracket">]</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>result<span class="bracket">)</span><span class="bracket">)</span>;  <span class="comment">// 1 (ç­‰å¾…æˆåŠŸçš„p1)</span></code></pre></div>
                    
                    <p><strong>å¯¹æ¯”è¡¨æ ¼ï¼š</strong></p>
                    <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                        <thead>
                            <tr style="background: #f7fafc;">
                                <th style="padding: 0.75rem; border: 1px solid #e2e8f0;">æ–¹æ³•</th>
                                <th style="padding: 0.75rem; border: 1px solid #e2e8f0;">è¿”å›æ¡ä»¶</th>
                                <th style="padding: 0.75rem; border: 1px solid #e2e8f0;">å…¨éƒ¨å¤±è´¥</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;"><code>Promise.all</code></td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">å…¨éƒ¨æˆåŠŸ</td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">è¿”å›ç¬¬ä¸€ä¸ªé”™è¯¯</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;"><code>Promise.race</code></td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">æœ€å¿«å®Œæˆçš„</td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">è¿”å›æœ€å¿«çš„é”™è¯¯</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;"><code>Promise.any</code></td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">æœ€å¿«æˆåŠŸçš„</td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">AggregateError</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;"><code>Promise.allSettled</code></td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">å…¨éƒ¨å®Œæˆ</td>
                                <td style="padding: 0.75rem; border: 1px solid #e2e8f0;">è¿”å›æ‰€æœ‰ç»“æœ</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// race: è¶…æ—¶æ§åˆ¶</span>
<span class="keyword">function</span> <span class="function">timeout</span><span class="bracket">(</span>ms<span class="bracket">)</span> <span class="bracket">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>_, reject<span class="bracket">)</span> <span class="operator">=></span> 
        <span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">reject</span><span class="bracket">(</span><span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'timeout'</span><span class="bracket">)</span><span class="bracket">)</span>, ms<span class="bracket">)</span>
    <span class="bracket">)</span>;
<span class="bracket">}</span>

<span class="property">Promise</span>.<span class="function">race</span><span class="bracket">(</span><span class="bracket">[</span><span class="function">fetch</span><span class="bracket">(</span>url<span class="bracket">)</span>, <span class="function">timeout</span><span class="bracket">(</span><span class="number">3000</span><span class="bracket">)</span><span class="bracket">]</span><span class="bracket">)</span>;

<span class="comment">// any: å¤šæœåŠ¡å™¨è¯·æ±‚ï¼Œç”¨æœ€å¿«å“åº”çš„</span>
<span class="property">Promise</span>.<span class="function">any</span><span class="bracket">(</span><span class="bracket">[</span>
    <span class="function">fetch</span><span class="bracket">(</span><span class="string">'https://api1.com/data'</span><span class="bracket">)</span>,
    <span class="function">fetch</span><span class="bracket">(</span><span class="string">'https://api2.com/data'</span><span class="bracket">)</span>,
    <span class="function">fetch</span><span class="bracket">(</span><span class="string">'https://api3.com/data'</span><span class="bracket">)</span>
<span class="bracket">]</span><span class="bracket">)</span>;</code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé™æ€æ–¹æ³•</span>
            </div>
        </div>

        <!-- Q5: Promise.allSettled -->
        <div class="quiz-item" data-question="5">
            <div class="quiz-item-header">
                <span class="difficulty medium">ğŸŸ¡ è¿›é˜¶</span>
                <span class="tag">é™æ€æ–¹æ³•</span>
            </div>
            
            <div class="question">Q5: Promise.allSettled() çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</div>
            
            <div class="code-question"><pre><code><span class="keyword">const</span> promises <span class="operator">=</span> <span class="bracket">[</span>
    <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>,
    <span class="property">Promise</span>.<span class="function">reject</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span>,
    <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>
<span class="bracket">]</span>;
<span class="property">Promise</span>.<span class="function">allSettled</span><span class="bracket">(</span>promises<span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span>results <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>results<span class="bracket">)</span><span class="bracket">)</span>;</code></pre></div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> [1, 3] (åªåŒ…å«æˆåŠŸçš„)
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> [{status:'fulfilled',value:1}, {status:'rejected',reason:'error'}, {status:'fulfilled',value:3}]
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> æŠ›å‡ºé”™è¯¯
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> undefined
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(5, 'B')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(5)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-5">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šB</div>
                <div class="explanation">
                    <h4>Promise.allSettled() è¯¦è§£ï¼š</h4>
                    
                    <p><strong>è¿”å›æ ¼å¼ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// æ€»æ˜¯è¿”å›åŒ…å«æ‰€æœ‰ç»“æœçš„æ•°ç»„</span>
<span class="bracket">[</span>
    <span class="bracket">{</span> status<span class="operator">:</span> <span class="string">'fulfilled'</span>, value<span class="operator">:</span> <span class="number">1</span> <span class="bracket">}</span>,
    <span class="bracket">{</span> status<span class="operator">:</span> <span class="string">'rejected'</span>, reason<span class="operator">:</span> <span class="string">'error'</span> <span class="bracket">}</span>,
    <span class="bracket">{</span> status<span class="operator">:</span> <span class="string">'fulfilled'</span>, value<span class="operator">:</span> <span class="number">3</span> <span class="bracket">}</span>
<span class="bracket">]</span></code></pre></div>
                    
                    <p><strong>å®é™…åº”ç”¨ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">async</span> <span class="keyword">function</span> <span class="function">batchProcess</span><span class="bracket">(</span>items<span class="bracket">)</span> <span class="bracket">{</span>
    <span class="keyword">const</span> results <span class="operator">=</span> <span class="keyword">await</span> <span class="property">Promise</span>.<span class="function">allSettled</span><span class="bracket">(</span>
        items.<span class="function">map</span><span class="bracket">(</span>item <span class="operator">=></span> <span class="function">processItem</span><span class="bracket">(</span>item<span class="bracket">)</span><span class="bracket">)</span>
    <span class="bracket">)</span>;
    
    <span class="keyword">const</span> successful <span class="operator">=</span> results.<span class="function">filter</span><span class="bracket">(</span>r <span class="operator">=></span> r.<span class="property">status</span> <span class="operator">===</span> <span class="string">'fulfilled'</span><span class="bracket">)</span>;
    <span class="keyword">const</span> failed <span class="operator">=</span> results.<span class="function">filter</span><span class="bracket">(</span>r <span class="operator">=></span> r.<span class="property">status</span> <span class="operator">===</span> <span class="string">'rejected'</span><span class="bracket">)</span>;
    
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">`æˆåŠŸ: ${successful.length}, å¤±è´¥: ${failed.length}`</span><span class="bracket">)</span>;
<span class="bracket">}</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé™æ€æ–¹æ³•</span>
            </div>
        </div>

        <!-- Q6: Promiseæ‰§è¡Œé¡ºåº -->
        <div class="quiz-item" data-question="6">
            <div class="quiz-item-header">
                <span class="difficulty medium">ğŸŸ¡ è¿›é˜¶</span>
                <span class="tag">æ‰§è¡Œé¡ºåº</span>
            </div>
            
            <div class="question">Q6: ä»¥ä¸‹ä»£ç çš„è¾“å‡ºé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</div>
            
            <div class="code-question"><pre><code><span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;
<span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">2</span><span class="bracket">)</span><span class="bracket">)</span>;
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>;</code></pre></div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> 1 2 3
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> 1 3 2
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> 2 1 3
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> 3 2 1
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(6, 'B')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(6)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-6">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šB</div>
                <div class="explanation">
                    <h4>Promise æ‰§è¡Œé¡ºåºè¯¦è§£ï¼š</h4>
                    
                    <p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// 1. åŒæ­¥ä»£ç å…ˆæ‰§è¡Œ</span>
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;  <span class="comment">// è¾“å‡º 1</span>

<span class="comment">// 2. Promise.then è¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
<span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">2</span><span class="bracket">)</span><span class="bracket">)</span>;

<span class="comment">// 3. ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </span>
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>;  <span class="comment">// è¾“å‡º 3</span>

<span class="comment">// 4. åŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œæ‰§è¡Œå¾®ä»»åŠ¡</span>
<span class="comment">// è¾“å‡º 2</span></code></pre></div>
                    
                    <p><strong>å…³é”®æ¦‚å¿µï¼š</strong></p>
                    <ul>
                        <li>Promise.then æ˜¯<strong>å¾®ä»»åŠ¡</strong>ï¼Œåœ¨å½“å‰å®ä»»åŠ¡ç»“æŸåæ‰§è¡Œ</li>
                        <li>åŒæ­¥ä»£ç ä¼˜å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œ</li>
                        <li>å¾®ä»»åŠ¡ä¼˜å…ˆäºä¸‹ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œ</li>
                    </ul>
                    
                    <p><strong>å¤æ‚ç¤ºä¾‹ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'start'</span><span class="bracket">)</span>;

<span class="function">setTimeout</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'timeout'</span><span class="bracket">)</span>, <span class="number">0</span><span class="bracket">)</span>;

<span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'promise1'</span><span class="bracket">)</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'promise2'</span><span class="bracket">)</span><span class="bracket">)</span>;

<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'end'</span><span class="bracket">)</span>;

<span class="comment">// è¾“å‡ºé¡ºåº: start â†’ end â†’ promise1 â†’ promise2 â†’ timeout</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šäº‹ä»¶å¾ªç¯</span>
            </div>
        </div>

        <!-- Q7: Promiseé”™è¯¯å¤„ç† -->
        <div class="quiz-item" data-question="7">
            <div class="quiz-item-header">
                <span class="difficulty medium">ğŸŸ¡ è¿›é˜¶</span>
                <span class="tag">é”™è¯¯å¤„ç†</span>
            </div>
            
            <div class="question">Q7: ä»¥ä¸‹å“ªç§é”™è¯¯å¤„ç†æ–¹å¼æ˜¯é”™è¯¯çš„ï¼Ÿ</div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> promise.then(onSuccess, onError)
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> promise.then(onSuccess).catch(onError)
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> try { await promise } catch(e) {}
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> ä»¥ä¸Šéƒ½æ­£ç¡®
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(7, 'D')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(7)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-7">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šD</div>
                <div class="explanation">
                    <h4>Promise é”™è¯¯å¤„ç†æ–¹å¼å¯¹æ¯”ï¼š</h4>
                    
                    <p><strong>æ–¹å¼1ï¼šthen çš„ç¬¬äºŒä¸ªå‚æ•°</strong></p>
                    <div class="code-question"><pre><code>promise.<span class="function">then</span><span class="bracket">(</span>
    result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>result<span class="bracket">)</span>,
    error <span class="operator">=></span> <span class="property">console</span>.<span class="function">error</span><span class="bracket">(</span>error<span class="bracket">)</span>  <span class="comment">// åªèƒ½æ•è·promiseçš„é”™è¯¯</span>
<span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>æ–¹å¼2ï¼šcatch æ–¹æ³•ï¼ˆæ¨èï¼‰</strong></p>
                    <div class="code-question"><pre><code>promise
    .<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="bracket">{</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'then error'</span><span class="bracket">)</span>;
    <span class="bracket">}</span><span class="bracket">)</span>
    .<span class="function">catch</span><span class="bracket">(</span>error <span class="operator">=></span> <span class="bracket">{</span>
        <span class="comment">// èƒ½æ•è·promiseå’Œthenä¸­çš„é”™è¯¯</span>
        <span class="property">console</span>.<span class="function">error</span><span class="bracket">(</span>error<span class="bracket">)</span>;
    <span class="bracket">}</span><span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>æ–¹å¼3ï¼šasync/await + try/catch</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">async</span> <span class="keyword">function</span> <span class="function">example</span><span class="bracket">(</span><span class="bracket">)</span> <span class="bracket">{</span>
    <span class="keyword">try</span> <span class="bracket">{</span>
        <span class="keyword">const</span> result <span class="operator">=</span> <span class="keyword">await</span> promise;
        <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>result<span class="bracket">)</span>;
    <span class="bracket">}</span> <span class="keyword">catch</span> <span class="bracket">(</span>error<span class="bracket">)</span> <span class="bracket">{</span>
        <span class="property">console</span>.<span class="function">error</span><span class="bracket">(</span>error<span class="bracket">)</span>;
    <span class="bracket">}</span>
<span class="bracket">}</span></code></pre></div>
                    
                    <p><strong>âš ï¸ é‡è¦åŒºåˆ«ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// thenç¬¬äºŒå‚æ•° vs catch</span>
promise.<span class="function">then</span><span class="bracket">(</span>
    result <span class="operator">=></span> <span class="bracket">{</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span> <span class="bracket">}</span>,
    error <span class="operator">=></span> <span class="bracket">{</span><span class="bracket">}</span>  <span class="comment">// æ— æ³•æ•è·onSuccessä¸­çš„é”™è¯¯ï¼</span>
<span class="bracket">)</span>;

promise
    .<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="bracket">{</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span> <span class="bracket">}</span><span class="bracket">)</span>
    .<span class="function">catch</span><span class="bracket">(</span>error <span class="operator">=></span> <span class="bracket">{</span><span class="bracket">}</span><span class="bracket">)</span>;  <span class="comment">// å¯ä»¥æ•è·ï¼âœ…</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé”™è¯¯å¤„ç†</span>
            </div>
        </div>

        <!-- Q8: Promise thenè¿”å›å€¼ -->
        <div class="quiz-item" data-question="8">
            <div class="quiz-item-header">
                <span class="difficulty hard">ğŸ”´ å›°éš¾</span>
                <span class="tag">è¿”å›å€¼å¤„ç†</span>
            </div>
            
            <div class="question">Q8: ä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</div>
            
            <div class="code-question"><pre><code><span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="bracket">{</span>
        <span class="keyword">return</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span>x <span class="operator">+</span> <span class="number">1</span><span class="bracket">)</span>;
    <span class="bracket">}</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="bracket">{</span>
        <span class="keyword">return</span> x <span class="operator">+</span> <span class="number">1</span>;
    <span class="bracket">}</span><span class="bracket">)</span>
    .<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>x<span class="bracket">)</span><span class="bracket">)</span>;</code></pre></div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> 2
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> 3
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> Promise {2}
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> undefined
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(8, 'B')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(8)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-8">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šB</div>
                <div class="explanation">
                    <h4>Promise then è¿”å›å€¼å¤„ç†ï¼š</h4>
                    
                    <p><strong>å…³é”®è§„åˆ™ï¼š</strong></p>
                    <ul>
                        <li>then è¿”å› Promise â†’ ç­‰å¾…å…¶å®Œæˆï¼Œä¼ é€’å…¶ç»“æœå€¼</li>
                        <li>then è¿”å›æ™®é€šå€¼ â†’ è‡ªåŠ¨åŒ…è£…æˆ fulfilled Promise</li>
                        <li>then ä¸è¿”å› â†’ è¿”å› Promise.resolve(undefined)</li>
                    </ul>
                    
                    <p><strong>æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// æ­¥éª¤1: Promise.resolve(1) â†’ 1</span>
<span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>

<span class="comment">// æ­¥éª¤2: è¿”å›Promise.resolve(2)</span>
<span class="comment">// thenä¼šç­‰å¾…è¿™ä¸ªPromiseå®Œæˆï¼Œå¾—åˆ°å€¼2</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span>x <span class="operator">+</span> <span class="number">1</span><span class="bracket">)</span><span class="bracket">)</span>  <span class="comment">// x=1, è¿”å›Promise(2)</span>

<span class="comment">// æ­¥éª¤3: æ¥æ”¶åˆ°2ï¼Œè¿”å›3</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> x <span class="operator">+</span> <span class="number">1</span><span class="bracket">)</span>  <span class="comment">// x=2, è¿”å›3</span>

<span class="comment">// æ­¥éª¤4: æ¥æ”¶åˆ°3ï¼Œæ‰“å°</span>
.<span class="function">then</span><span class="bracket">(</span>x <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span>x<span class="bracket">)</span><span class="bracket">)</span>;  <span class="comment">// è¾“å‡º: 3</span></code></pre></div>
                    
                    <p><strong>è¿”å›å€¼ç±»å‹æ€»ç»“ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// 1. è¿”å›æ™®é€šå€¼</span>
promise.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="number">42</span><span class="bracket">)</span>  <span class="comment">// ç­‰ä»·äº Promise.resolve(42)</span>

<span class="comment">// 2. è¿”å›Promise</span>
promise.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="number">42</span><span class="bracket">)</span><span class="bracket">)</span>  <span class="comment">// ç­‰å¾…Promiseå®Œæˆ</span>

<span class="comment">// 3. è¿”å›thenableå¯¹è±¡</span>
promise.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
    <span class="keyword">return</span> <span class="bracket">{</span>
        then<span class="bracket">(</span>resolve<span class="bracket">)</span> <span class="bracket">{</span> <span class="function">resolve</span><span class="bracket">(</span><span class="number">42</span><span class="bracket">)</span>; <span class="bracket">}</span>
    <span class="bracket">}</span>;
<span class="bracket">}</span><span class="bracket">)</span>;

<span class="comment">// 4. æŠ›å‡ºé”™è¯¯</span>
promise.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span><span class="bracket">(</span><span class="string">'error'</span><span class="bracket">)</span>;  <span class="comment">// è¿”å›rejected Promise</span>
<span class="bracket">}</span><span class="bracket">)</span>;

<span class="comment">// 5. ä¸è¿”å›</span>
promise.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span><span class="bracket">}</span><span class="bracket">)</span>  <span class="comment">// ç­‰ä»·äº Promise.resolve(undefined)</span></code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé“¾å¼è°ƒç”¨</span>
            </div>
        </div>

        <!-- Q9: Promiseæ„é€ å‡½æ•°é™·é˜± -->
        <div class="quiz-item" data-question="9">
            <div class="quiz-item-header">
                <span class="difficulty hard">ğŸ”´ å›°éš¾</span>
                <span class="tag">å¸¸è§é™·é˜±</span>
            </div>
            
            <div class="question">Q9: ä»¥ä¸‹ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</div>
            
            <div class="code-question"><pre><code><span class="keyword">const</span> promise <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>resolve<span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'1'</span><span class="bracket">)</span>;
    <span class="function">resolve</span><span class="bracket">(</span><span class="string">'success'</span><span class="bracket">)</span>;
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'2'</span><span class="bracket">)</span>;
<span class="bracket">}</span><span class="bracket">)</span>;

promise.<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'3'</span><span class="bracket">)</span><span class="bracket">)</span>;
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'4'</span><span class="bracket">)</span>;</code></pre></div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> è¾“å‡º: 1 2 3 4
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> è¾“å‡º: 1 2 4 3
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> è¾“å‡º: 1 4 2 3
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> ä¼šæŠ¥é”™
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(9, 'B')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(9)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-9">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šB</div>
                <div class="explanation">
                    <h4>Promise æ„é€ å‡½æ•°æ‰§è¡Œæ—¶æœºï¼š</h4>
                    
                    <p><strong>å…³é”®ç‚¹ï¼š</strong></p>
                    <ul>
                        <li>Promise æ„é€ å‡½æ•°<strong>ç«‹å³åŒæ­¥æ‰§è¡Œ</strong></li>
                        <li>resolve() ä¸ä¼šä¸­æ–­åç»­ä»£ç </li>
                        <li>then å›è°ƒæ˜¯<strong>å¾®ä»»åŠ¡</strong>ï¼Œå¼‚æ­¥æ‰§è¡Œ</li>
                    </ul>
                    
                    <p><strong>æ‰§è¡Œé¡ºåºåˆ†æï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// æ­¥éª¤1: åˆ›å»ºPromiseï¼Œæ„é€ å‡½æ•°ç«‹å³æ‰§è¡Œ</span>
<span class="keyword">const</span> promise <span class="operator">=</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>resolve<span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'1'</span><span class="bracket">)</span>;  <span class="comment">// âœ… è¾“å‡º1 (åŒæ­¥)</span>
    <span class="function">resolve</span><span class="bracket">(</span><span class="string">'success'</span><span class="bracket">)</span>;  <span class="comment">// æ”¹å˜çŠ¶æ€ï¼Œä¸ä¸­æ–­æ‰§è¡Œ</span>
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'2'</span><span class="bracket">)</span>;  <span class="comment">// âœ… è¾“å‡º2 (åŒæ­¥)</span>
<span class="bracket">}</span><span class="bracket">)</span>;

<span class="comment">// æ­¥éª¤2: thenå›è°ƒè¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
promise.<span class="function">then</span><span class="bracket">(</span>result <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'3'</span><span class="bracket">)</span><span class="bracket">)</span>;

<span class="comment">// æ­¥éª¤3: ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç </span>
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'4'</span><span class="bracket">)</span>;  <span class="comment">// âœ… è¾“å‡º4 (åŒæ­¥)</span>

<span class="comment">// æ­¥éª¤4: åŒæ­¥ä»£ç å®Œæˆï¼Œæ‰§è¡Œå¾®ä»»åŠ¡</span>
<span class="comment">// âœ… è¾“å‡º3</span>

<span class="comment">// æœ€ç»ˆè¾“å‡º: 1 2 4 3</span></code></pre></div>
                    
                    <p><strong>âš ï¸ å¸¸è§è¯¯åŒºï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="comment">// è¯¯åŒº1: ä»¥ä¸ºresolveä¼šä¸­æ–­æ‰§è¡Œ</span>
<span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span>resolve <span class="operator">=></span> <span class="bracket">{</span>
    <span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'è¿™è¡Œä¼šæ‰§è¡Œ'</span><span class="bracket">)</span>;  <span class="comment">// âœ… ä¼šæ‰§è¡Œ</span>
<span class="bracket">}</span><span class="bracket">)</span>;

<span class="comment">// è¯¯åŒº2: ä»¥ä¸ºæ„é€ å‡½æ•°æ˜¯å¼‚æ­¥çš„</span>
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'before'</span><span class="bracket">)</span>;
<span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span>resolve <span class="operator">=></span> <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'promise'</span><span class="bracket">)</span><span class="bracket">)</span>;
<span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'after'</span><span class="bracket">)</span>;
<span class="comment">// è¾“å‡º: before â†’ promise â†’ after</span>

<span class="comment">// æ­£ç¡®åšæ³•: å¦‚éœ€ä¸­æ–­ï¼Œç”¨return</span>
<span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span>resolve <span class="operator">=></span> <span class="bracket">{</span>
    <span class="keyword">if</span> <span class="bracket">(</span>condition<span class="bracket">)</span> <span class="bracket">{</span>
        <span class="function">resolve</span><span class="bracket">(</span><span class="number">1</span><span class="bracket">)</span>;
        <span class="keyword">return</span>;  <span class="comment">// æå‰è¿”å›</span>
    <span class="bracket">}</span>
    <span class="property">console</span>.<span class="function">log</span><span class="bracket">(</span><span class="string">'ä¸ä¼šæ‰§è¡Œ'</span><span class="bracket">)</span>;
<span class="bracket">}</span><span class="bracket">)</span>;</code></pre></div>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseæ‰§è¡Œæ—¶æœº</span>
            </div>
        </div>

        <!-- Q10: Promiseå¹¶å‘æ§åˆ¶ -->
        <div class="quiz-item" data-question="10">
            <div class="quiz-item-header">
                <span class="difficulty hard">ğŸ”´ å›°éš¾</span>
                <span class="tag">å®æˆ˜åº”ç”¨</span>
            </div>
            
            <div class="question">Q10: å¦‚ä½•å®ç°Promiseå¹¶å‘æ§åˆ¶ï¼ˆæœ€å¤šåŒæ—¶æ‰§è¡ŒNä¸ªï¼‰ï¼Ÿ</div>
            
            <div class="options">
                <div class="option" data-answer="A">
                    <strong>A.</strong> ä½¿ç”¨Promise.allæ§åˆ¶
                </div>
                <div class="option" data-answer="B">
                    <strong>B.</strong> ä½¿ç”¨é˜Ÿåˆ—+è®¡æ•°å™¨å®ç°
                </div>
                <div class="option" data-answer="C">
                    <strong>C.</strong> ä½¿ç”¨async/awaitå¾ªç¯
                </div>
                <div class="option" data-answer="D">
                    <strong>D.</strong> Promiseæ— æ³•æ§åˆ¶å¹¶å‘
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="checkAnswer(10, 'B')">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="showAnswer(10)">æŸ¥çœ‹è§£æ</button>
            </div>
            
            <div class="answer-section" id="answer-10">
                <div class="answer-label">âœ… æ­£ç¡®ç­”æ¡ˆï¼šB</div>
                <div class="explanation">
                    <h4>Promise å¹¶å‘æ§åˆ¶å®ç°ï¼š</h4>
                    
                    <p><strong>å®ç°æ€è·¯ï¼š</strong></p>
                    <ul>
                        <li>ç»´æŠ¤ä¸€ä¸ªæ‰§è¡Œé˜Ÿåˆ—</li>
                        <li>ä½¿ç”¨è®¡æ•°å™¨æ§åˆ¶å¹¶å‘æ•°</li>
                        <li>Promiseå®Œæˆåå¯åŠ¨ä¸‹ä¸€ä¸ª</li>
                    </ul>
                    
                    <p><strong>å®Œæ•´å®ç°ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">class</span> <span class="function">PromisePool</span> <span class="bracket">{</span>
    <span class="function">constructor</span><span class="bracket">(</span>limit<span class="bracket">)</span> <span class="bracket">{</span>
        <span class="keyword">this</span>.<span class="property">limit</span> <span class="operator">=</span> limit;  <span class="comment">// æœ€å¤§å¹¶å‘æ•°</span>
        <span class="keyword">this</span>.<span class="property">running</span> <span class="operator">=</span> <span class="number">0</span>;     <span class="comment">// å½“å‰è¿è¡Œæ•°</span>
        <span class="keyword">this</span>.<span class="property">queue</span> <span class="operator">=</span> <span class="bracket">[</span><span class="bracket">]</span>;      <span class="comment">// ç­‰å¾…é˜Ÿåˆ—</span>
    <span class="bracket">}</span>
    
    <span class="function">add</span><span class="bracket">(</span>promiseCreator<span class="bracket">)</span> <span class="bracket">{</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="function">Promise</span><span class="bracket">(</span><span class="bracket">(</span>resolve, reject<span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
            <span class="keyword">this</span>.<span class="property">queue</span>.<span class="function">push</span><span class="bracket">(</span><span class="bracket">{</span> promiseCreator, resolve, reject <span class="bracket">}</span><span class="bracket">)</span>;
            <span class="keyword">this</span>.<span class="function">run</span><span class="bracket">(</span><span class="bracket">)</span>;
        <span class="bracket">}</span><span class="bracket">)</span>;
    <span class="bracket">}</span>
    
    <span class="function">run</span><span class="bracket">(</span><span class="bracket">)</span> <span class="bracket">{</span>
        <span class="keyword">while</span> <span class="bracket">(</span><span class="keyword">this</span>.<span class="property">running</span> <span class="operator">&lt;</span> <span class="keyword">this</span>.<span class="property">limit</span> <span class="operator">&&</span> <span class="keyword">this</span>.<span class="property">queue</span>.<span class="property">length</span><span class="bracket">)</span> <span class="bracket">{</span>
            <span class="keyword">const</span> <span class="bracket">{</span> promiseCreator, resolve, reject <span class="bracket">}</span> <span class="operator">=</span> <span class="keyword">this</span>.<span class="property">queue</span>.<span class="function">shift</span><span class="bracket">(</span><span class="bracket">)</span>;
            <span class="keyword">this</span>.<span class="property">running</span><span class="operator">++</span>;
            
            <span class="function">promiseCreator</span><span class="bracket">(</span><span class="bracket">)</span>
                .<span class="function">then</span><span class="bracket">(</span>resolve<span class="bracket">)</span>
                .<span class="function">catch</span><span class="bracket">(</span>reject<span class="bracket">)</span>
                .<span class="function">finally</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="bracket">{</span>
                    <span class="keyword">this</span>.<span class="property">running</span><span class="operator">--</span>;
                    <span class="keyword">this</span>.<span class="function">run</span><span class="bracket">(</span><span class="bracket">)</span>;  <span class="comment">// å¯åŠ¨ä¸‹ä¸€ä¸ª</span>
                <span class="bracket">}</span><span class="bracket">)</span>;
        <span class="bracket">}</span>
    <span class="bracket">}</span>
<span class="bracket">}</span>

<span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="keyword">const</span> pool <span class="operator">=</span> <span class="keyword">new</span> <span class="function">PromisePool</span><span class="bracket">(</span><span class="number">3</span><span class="bracket">)</span>;  <span class="comment">// æœ€å¤š3ä¸ªå¹¶å‘</span>

<span class="keyword">const</span> tasks <span class="operator">=</span> <span class="bracket">[</span><span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span><span class="bracket">]</span>;
<span class="keyword">const</span> results <span class="operator">=</span> <span class="keyword">await</span> <span class="property">Promise</span>.<span class="function">all</span><span class="bracket">(</span>
    tasks.<span class="function">map</span><span class="bracket">(</span>i <span class="operator">=></span> pool.<span class="function">add</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">fetchData</span><span class="bracket">(</span>i<span class="bracket">)</span><span class="bracket">)</span><span class="bracket">)</span>
<span class="bracket">)</span>;</code></pre></div>
                    
                    <p><strong>ç®€åŒ–ç‰ˆå®ç°ï¼š</strong></p>
                    <div class="code-question"><pre><code><span class="keyword">async</span> <span class="keyword">function</span> <span class="function">promiseLimit</span><span class="bracket">(</span>tasks, limit<span class="bracket">)</span> <span class="bracket">{</span>
    <span class="keyword">const</span> results <span class="operator">=</span> <span class="bracket">[</span><span class="bracket">]</span>;
    <span class="keyword">const</span> executing <span class="operator">=</span> <span class="bracket">[</span><span class="bracket">]</span>;
    
    <span class="keyword">for</span> <span class="bracket">(</span><span class="keyword">const</span> task <span class="keyword">of</span> tasks<span class="bracket">)</span> <span class="bracket">{</span>
        <span class="keyword">const</span> p <span class="operator">=</span> <span class="property">Promise</span>.<span class="function">resolve</span><span class="bracket">(</span><span class="bracket">)</span>.<span class="function">then</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> <span class="function">task</span><span class="bracket">(</span><span class="bracket">)</span><span class="bracket">)</span>;
        results.<span class="function">push</span><span class="bracket">(</span>p<span class="bracket">)</span>;
        
        <span class="keyword">if</span> <span class="bracket">(</span>tasks.<span class="property">length</span> <span class="operator">&gt;=</span> limit<span class="bracket">)</span> <span class="bracket">{</span>
            <span class="keyword">const</span> e <span class="operator">=</span> p.<span class="function">finally</span><span class="bracket">(</span><span class="bracket">(</span><span class="bracket">)</span> <span class="operator">=></span> executing.<span class="function">splice</span><span class="bracket">(</span>executing.<span class="function">indexOf</span><span class="bracket">(</span>e<span class="bracket">)</span>, <span class="number">1</span><span class="bracket">)</span><span class="bracket">)</span>;
            executing.<span class="function">push</span><span class="bracket">(</span>e<span class="bracket">)</span>;
            
            <span class="keyword">if</span> <span class="bracket">(</span>executing.<span class="property">length</span> <span class="operator">&gt;=</span> limit<span class="bracket">)</span> <span class="bracket">{</span>
                <span class="keyword">await</span> <span class="property">Promise</span>.<span class="function">race</span><span class="bracket">(</span>executing<span class="bracket">)</span>;
            <span class="bracket">}</span>
        <span class="bracket">}</span>
    <span class="bracket">}</span>
    
    <span class="keyword">return</span> <span class="property">Promise</span>.<span class="function">all</span><span class="bracket">(</span>results<span class="bracket">)</span>;
<span class="bracket">}</span></code></pre></div>
                    
                    <p><strong>å®é™…åº”ç”¨åœºæ™¯ï¼š</strong></p>
                    <ul>
                        <li>æ‰¹é‡ä¸Šä¼ æ–‡ä»¶ï¼ˆé™åˆ¶å¹¶å‘ä¸Šä¼ æ•°ï¼‰</li>
                        <li>çˆ¬è™«è¯·æ±‚æ§åˆ¶ï¼ˆé¿å…è¢«å°IPï¼‰</li>
                        <li>æ•°æ®åº“æ‰¹é‡æ“ä½œï¼ˆæ§åˆ¶è¿æ¥æ•°ï¼‰</li>
                        <li>å›¾ç‰‡æ‡’åŠ è½½ï¼ˆæ§åˆ¶åŒæ—¶åŠ è½½æ•°ï¼‰</li>
                    </ul>
                </div>
                <span class="source-tag">ğŸ“Œ æ¥æºï¼šPromiseé«˜çº§åº”ç”¨</span>
            </div>
        </div>

        <div class="nav-links" style="margin-top: 3rem; display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="../index.html" style="padding: 0.75rem 1.5rem; background: #667eea; color: white; text-decoration: none; border-radius: 6px;">ğŸ“‹ é¢è¯•é¢˜å¯¼èˆª</a>
        </div>
    </div>
    
    <script>
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const parent = this.closest('.quiz-item');
                parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function checkAnswer(questionNum, correctAnswer) {
            const quizItem = document.querySelector(`[data-question="${questionNum}"]`);
            const selectedOption = quizItem.querySelector('.option.selected');
            
            if (!selectedOption) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
                return;
            }
            
            const userAnswer = selectedOption.getAttribute('data-answer');
            const allOptions = quizItem.querySelectorAll('.option');
            
            allOptions.forEach(option => {
                const answer = option.getAttribute('data-answer');
                if (answer === correctAnswer) {
                    option.classList.add('correct');
                } else if (answer === userAnswer) {
                    option.classList.add('wrong');
                }
            });
            
            setTimeout(() => showAnswer(questionNum), 500);
        }

        function showAnswer(questionNum) {
            const answerSection = document.getElementById(`answer-${questionNum}`);
            answerSection.classList.add('show');
            answerSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
