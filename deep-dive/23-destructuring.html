<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§£æ„èµ‹å€¼çš„åº•å±‚å®ç° - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>è§£æ„èµ‹å€¼çš„åº•å±‚å®ç°</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>è§£æ„èµ‹å€¼ï¼ˆDestructuring Assignmentï¼‰æ˜¯ ES6 å¼•å…¥çš„è¯­æ³•ç³–ï¼Œå®ƒå…è®¸ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å€¼ï¼Œèµ‹ç»™å˜é‡ã€‚ç†è§£å…¶åº•å±‚å®ç°æœ‰åŠ©äºå†™å‡ºæ›´é«˜æ•ˆçš„ä»£ç ã€‚</p>
            
            <div class="spec">
                <strong>ECMAScript è§„èŒƒï¼š</strong>
                è§£æ„èµ‹å€¼æ˜¯ä¸€ç§èµ‹å€¼æ¨¡å¼ï¼ˆAssignment Patternï¼‰ï¼Œå®ƒä½¿ç”¨è¿­ä»£å™¨åè®®ï¼ˆæ•°ç»„ï¼‰æˆ–å±æ€§è®¿é—®ï¼ˆå¯¹è±¡ï¼‰æ¥æå–å€¼ã€‚
            </div>
            
            <h2>ä¸€ã€æ•°ç»„è§£æ„</h2>
            
            <h3>1.1 åŸºæœ¬åŸç†</h3>
            <p>æ•°ç»„è§£æ„ä½¿ç”¨è¿­ä»£å™¨åè®®ï¼ˆIterator Protocolï¼‰é€ä¸ªè·å–å€¼ï¼š</p>
            
            <div class="spec">
                <strong>åº•å±‚å®ç°é€»è¾‘ï¼š</strong>
                <pre>const [a, b, c] = iterable;

// ç­‰ä»·äºï¼š
const iterator = iterable[Symbol.iterator]();
const a = iterator.next().value;
const b = iterator.next().value;
const c = iterator.next().value;</pre>
            </div>
            
            <h3>1.2 è§£æ„ä»»ä½•å¯è¿­ä»£å¯¹è±¡</h3>
            <p>å› ä¸ºä½¿ç”¨è¿­ä»£å™¨åè®®ï¼Œæ‰€ä»¥å¯ä»¥è§£æ„ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼š</p>
            
            <ul>
                <li>æ•°ç»„ï¼š<code>[a, b] = [1, 2]</code></li>
                <li>å­—ç¬¦ä¸²ï¼š<code>[a, b] = 'ab'</code></li>
                <li>Setï¼š<code>[a, b] = new Set([1, 2])</code></li>
                <li>Mapï¼š<code>[a, b] = new Map([[1, 2]])</code></li>
                <li>ç”Ÿæˆå™¨ï¼š<code>[a, b] = generator()</code></li>
            </ul>
            
            <h3>1.3 è·³è¿‡å…ƒç´ </h3>
            <p>ä½¿ç”¨é€—å·è·³è¿‡ä¸éœ€è¦çš„å…ƒç´ ï¼š</p>
            
            <pre><code>const [a, , c] = [1, 2, 3];
// a = 1, c = 3ï¼ˆè·³è¿‡ 2ï¼‰</code></pre>
            
            <h3>1.4 å‰©ä½™å…ƒç´ ï¼ˆRest Elementsï¼‰</h3>
            <div class="spec">
                <strong>è§„èŒƒè¦æ±‚ï¼š</strong>
                å‰©ä½™å…ƒç´ å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå®ƒä¼šæ”¶é›†æ‰€æœ‰å‰©ä½™çš„å€¼åˆ°ä¸€ä¸ªæ–°æ•°ç»„ã€‚
                
                <pre>const [a, ...rest] = [1, 2, 3, 4];
// a = 1, rest = [2, 3, 4]

// åº•å±‚å®ç°ï¼š
// 1. å–ç¬¬ä¸€ä¸ªå€¼
// 2. å°†å‰©ä½™æ‰€æœ‰å€¼æ”¶é›†åˆ°æ–°æ•°ç»„</pre>
            </div>
            
            <h3>1.5 é»˜è®¤å€¼</h3>
            <p>åªæœ‰å½“å¯¹åº”å€¼ä¸º <code>undefined</code> æ—¶ï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆï¼š</p>
            
            <div class="spec">
                <strong>é»˜è®¤å€¼æ±‚å€¼æ—¶æœºï¼š</strong>
                é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè®¡ç®—ã€‚
                
                <pre>const [a = expensive()] = [undefined];
// expensive() ä¼šè¢«è°ƒç”¨

const [b = expensive()] = [null];
// expensive() ä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸º null !== undefined</pre>
            </div>
            
            <h2>äºŒã€å¯¹è±¡è§£æ„</h2>
            
            <h3>2.1 åŸºæœ¬åŸç†</h3>
            <p>å¯¹è±¡è§£æ„ä½¿ç”¨å±æ€§è®¿é—®æ“ä½œç¬¦ï¼š</p>
            
            <div class="spec">
                <strong>åº•å±‚å®ç°é€»è¾‘ï¼š</strong>
                <pre>const { a, b, c } = obj;

// ç­‰ä»·äºï¼š
const a = obj.a;
const b = obj.b;
const c = obj.c;</pre>
            </div>
            
            <h3>2.2 å±æ€§é‡å‘½å</h3>
            <pre><code>const { name: userName } = { name: 'Alice' };
// userName = 'Alice'

// ç­‰ä»·äºï¼š
const userName = obj.name;</code></pre>
            
            <h3>2.3 åµŒå¥—è§£æ„</h3>
            <p>å¯ä»¥è§£æ„åµŒå¥—çš„å¯¹è±¡å’Œæ•°ç»„ï¼š</p>
            
            <div class="warning">
                <strong>æ³¨æ„ï¼š</strong>åµŒå¥—è§£æ„æ—¶ï¼Œå¦‚æœä¸­é—´å±‚ä¸º <code>null</code> æˆ– <code>undefined</code>ï¼Œä¼šæŠ›å‡º TypeErrorã€‚
            </div>
            
            <h3>2.4 è®¡ç®—å±æ€§å</h3>
            <p>å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§åè¿›è¡Œè§£æ„ï¼š</p>
            
            <pre><code>const key = 'name';
const { [key]: value } = { name: 'Alice' };
// value = 'Alice'</code></pre>
            
            <h3>2.5 å‰©ä½™å±æ€§ï¼ˆRest Propertiesï¼‰</h3>
            <div class="spec">
                <strong>ES2018 ç‰¹æ€§ï¼š</strong>
                å‰©ä½™å±æ€§ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰æœªè¢«è§£æ„çš„å±æ€§ã€‚
                
                <pre>const { a, ...rest } = { a: 1, b: 2, c: 3 };
// a = 1, rest = { b: 2, c: 3 }

// åº•å±‚å®ç°ç±»ä¼¼äºï¼š
const rest = {};
for (const key in obj) {
    if (key !== 'a' && obj.hasOwnProperty(key)) {
        rest[key] = obj[key];
    }
}</pre>
            </div>
            
            <h2>ä¸‰ã€è§£æ„çš„é«˜çº§ç”¨æ³•</h2>
            
            <h3>3.1 å‡½æ•°å‚æ•°è§£æ„</h3>
            <p>å‡½æ•°å‚æ•°å¯ä»¥ä½¿ç”¨è§£æ„ï¼Œæé«˜å¯è¯»æ€§ï¼š</p>
            
            <h3>3.2 äº¤æ¢å˜é‡</h3>
            <p>ä¸éœ€è¦ä¸´æ—¶å˜é‡å³å¯äº¤æ¢ï¼š</p>
            
            <pre><code>[a, b] = [b, a];

// åº•å±‚å®ç°ï¼š
const temp = [b, a];
a = temp[0];
b = temp[1];</code></pre>
            
            <h3>3.3 ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</h3>
            <pre><code>function getCoordinates() {
    return { x: 10, y: 20 };
}

const { x, y } = getCoordinates();</code></pre>
            
            <h3>3.4 æå–å¯¹è±¡çš„éƒ¨åˆ†å±æ€§</h3>
            <p>å¿«é€Ÿæå–éœ€è¦çš„å±æ€§ï¼š</p>
            
            <h2>å››ã€æ€§èƒ½è€ƒè™‘</h2>
            
            <h3>4.1 å¯¹è±¡è§£æ„çš„æ€§èƒ½</h3>
            <div class="info">
                <strong>æ€§èƒ½ç‰¹ç‚¹ï¼š</strong>
                <ul>
                    <li>å¯¹è±¡è§£æ„æœ¬è´¨æ˜¯å±æ€§è®¿é—®ï¼Œæ€§èƒ½æ¥è¿‘ç›´æ¥è®¿é—®</li>
                    <li>æ·±å±‚åµŒå¥—è§£æ„ä¼šæœ‰å¤šæ¬¡å±æ€§è®¿é—®å¼€é”€</li>
                    <li>ç°ä»£å¼•æ“ä¼šä¼˜åŒ–å¸¸è§æ¨¡å¼</li>
                </ul>
            </div>
            
            <h3>4.2 æ•°ç»„è§£æ„çš„æ€§èƒ½</h3>
            <div class="info">
                <ul>
                    <li>æ•°ç»„è§£æ„ä½¿ç”¨è¿­ä»£å™¨ï¼Œæœ‰ä¸€å®šå¼€é”€</li>
                    <li>å¯¹äºå·²çŸ¥é•¿åº¦çš„æ•°ç»„ï¼Œç›´æ¥ç´¢å¼•è®¿é—®æ›´å¿«</li>
                    <li>ä½†ä»£ç å¯è¯»æ€§æ›´å¥½</li>
                </ul>
            </div>
            
            <h3>4.3 é»˜è®¤å€¼çš„æ€§èƒ½</h3>
            <div class="tip">
                é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œåªåœ¨éœ€è¦æ—¶è®¡ç®—ã€‚é¿å…åœ¨é»˜è®¤å€¼ä¸­æ”¾ç½®æ˜‚è´µçš„æ“ä½œã€‚
            </div>
            
            <h2>äº”ã€å¸¸è§é™·é˜±</h2>
            
            <h3>5.1 null å’Œ undefined çš„å¤„ç†</h3>
            <div class="warning">
                <strong>é™·é˜±ï¼š</strong>
                <pre><code>const { a } = null;  // TypeError!
const { b } = undefined;  // TypeError!

// è§£å†³æ–¹æ¡ˆï¼šæä¾›é»˜è®¤å€¼
const { a } = obj || {};
const { b } = obj ?? {};</code></pre>
            </div>
            
            <h3>5.2 å·²å£°æ˜å˜é‡çš„è§£æ„</h3>
            <p>å¦‚æœå˜é‡å·²å£°æ˜ï¼Œéœ€è¦ç”¨æ‹¬å·åŒ…è£¹ï¼š</p>
            
            <pre><code>let a, b;
({ a, b } = { a: 1, b: 2 });  // éœ€è¦æ‹¬å·ï¼

// å¦åˆ™ä¼šè¢«è§£æä¸ºä»£ç å—</code></pre>
            
            <h3>5.3 é»˜è®¤å€¼ä¸ null</h3>
            <div class="warning">
                <strong>æ³¨æ„ï¼š</strong>
                <pre><code>const { a = 10 } = { a: null };
// a = nullï¼ˆä¸æ˜¯ 10ï¼ï¼‰

// é»˜è®¤å€¼åªå¯¹ undefined ç”Ÿæ•ˆ
const { b = 10 } = { b: undefined };
// b = 10</code></pre>
            </div>
            
            <h2>å…­ã€è§„èŒƒç»†èŠ‚</h2>
            
            <div class="spec">
                <strong>ECMAScript è§£æ„èµ‹å€¼ç®—æ³•ï¼ˆç®€åŒ–ï¼‰ï¼š</strong>
                
                <h4>æ•°ç»„è§£æ„ï¼š</h4>
                <pre>1. è·å–å³ä¾§å€¼çš„è¿­ä»£å™¨
2. å¯¹äºæ¯ä¸ªè§£æ„ç›®æ ‡ï¼š
   a. è°ƒç”¨ iterator.next()
   b. å¦‚æœæ˜¯å‰©ä½™å…ƒç´ ï¼Œæ”¶é›†æ‰€æœ‰å‰©ä½™å€¼
   c. å¦‚æœæœ‰é»˜è®¤å€¼ä¸” value ä¸º undefinedï¼Œä½¿ç”¨é»˜è®¤å€¼
   d. èµ‹å€¼ç»™ç›®æ ‡å˜é‡
3. å¦‚æœæœ‰å‰©ä½™å…ƒç´ æœªå¤„ç†ï¼Œè°ƒç”¨ iterator.return()</pre>
                
                <h4>å¯¹è±¡è§£æ„ï¼š</h4>
                <pre>1. å°†å³ä¾§å€¼è½¬æ¢ä¸ºå¯¹è±¡ï¼ˆToObjectï¼‰
2. å¯¹äºæ¯ä¸ªè§£æ„å±æ€§ï¼š
   a. è·å–å±æ€§å€¼ï¼ˆ[[Get]]ï¼‰
   b. å¦‚æœæœ‰é‡å‘½åï¼Œä½¿ç”¨æ–°åç§°
   c. å¦‚æœæœ‰é»˜è®¤å€¼ä¸” value ä¸º undefinedï¼Œä½¿ç”¨é»˜è®¤å€¼
   d. å¦‚æœæ˜¯åµŒå¥—è§£æ„ï¼Œé€’å½’æ‰§è¡Œ
   e. èµ‹å€¼ç»™ç›®æ ‡å˜é‡
3. å¦‚æœæœ‰å‰©ä½™å±æ€§ï¼Œå¤åˆ¶æœªè§£æ„çš„å±æ€§</pre>
            </div>
            
            <h2>ä¸ƒã€å®æˆ˜æŠ€å·§</h2>
            
            <div class="tip">
                <strong>æœ€ä½³å®è·µï¼š</strong>
                <ul>
                    <li><strong>å‡½æ•°å‚æ•°</strong>ï¼šç”¨å¯¹è±¡è§£æ„æé«˜å¯è¯»æ€§å’Œçµæ´»æ€§</li>
                    <li><strong>äº¤æ¢å˜é‡</strong>ï¼šç”¨æ•°ç»„è§£æ„ç®€åŒ–ä»£ç </li>
                    <li><strong>æå–å±æ€§</strong>ï¼šä»å¤§å¯¹è±¡ä¸­æå–éœ€è¦çš„å±æ€§</li>
                    <li><strong>é»˜è®¤å€¼</strong>ï¼šä¸ºå¯é€‰å‚æ•°æä¾›é»˜è®¤å€¼</li>
                    <li><strong>é‡å‘½å</strong>ï¼šé¿å…å‘½åå†²çª</li>
                    <li><strong>å‰©ä½™å±æ€§</strong>ï¼šè¿‡æ»¤å¯¹è±¡å±æ€§</li>
                </ul>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-destructuring-assignment" target="_blank">ECMAScript - Destructuring Assignment</a></li>
                <li><a href="https://tc39.es/ecma262/#sec-runtime-semantics-destructuringassignmentevaluation" target="_blank">ECMAScript - Destructuring Evaluation</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank">MDN - è§£æ„èµ‹å€¼</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="23-spread-rest.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šæ‰©å±•è¿ç®—ç¬¦ä¸å‰©ä½™å‚æ•°</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <!-- ç¤ºä¾‹1: æ•°ç»„è§£æ„åŸºç¡€ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šæ•°ç»„è§£æ„åŸºç¡€</h3>
                <div class="code-block">
                    <pre><code>// åŸºæœ¬ç”¨æ³•
const [a, b, c] = [1, 2, 3];
console.log('a:', a, 'b:', b, 'c:', c);

// è·³è¿‡å…ƒç´ 
const [x, , z] = [1, 2, 3];
console.log('x:', x, 'z:', z);

// å‰©ä½™å…ƒç´ 
const [first, ...rest] = [1, 2, 3, 4, 5];
console.log('first:', first);
console.log('rest:', rest);

// é»˜è®¤å€¼
const [p = 10, q = 20] = [5];
console.log('p:', p, 'q:', q);

// äº¤æ¢å˜é‡
let m = 1, n = 2;
[m, n] = [n, m];
console.log('äº¤æ¢å m:', m, 'n:', n);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <!-- ç¤ºä¾‹2: å¯¹è±¡è§£æ„åŸºç¡€ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šå¯¹è±¡è§£æ„åŸºç¡€</h3>
                <div class="code-block">
                    <pre><code>const person = {
    name: 'Alice',
    age: 25,
    city: 'Beijing'
};

// åŸºæœ¬ç”¨æ³•
const { name, age } = person;
console.log('name:', name, 'age:', age);

// å±æ€§é‡å‘½å
const { name: userName, age: userAge } = person;
console.log('userName:', userName, 'userAge:', userAge);

// é»˜è®¤å€¼
const { country = 'China' } = person;
console.log('country:', country);

// å‰©ä½™å±æ€§
const { name: n, ...others } = person;
console.log('name:', n);
console.log('others:', others);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <!-- ç¤ºä¾‹3: åµŒå¥—è§£æ„ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šåµŒå¥—è§£æ„</h3>
                <div class="code-block">
                    <pre><code>const data = {
    user: {
        name: 'Bob',
        contact: {
            email: 'bob@example.com',
            phone: '123456'
        }
    },
    scores: [95, 87, 92]
};

// åµŒå¥—å¯¹è±¡è§£æ„
const {
    user: {
        name,
        contact: { email }
    },
    scores: [first, second]
} = data;

console.log('name:', name);
console.log('email:', email);
console.log('first score:', first);
console.log('second score:', second);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <!-- ç¤ºä¾‹4: å‡½æ•°å‚æ•°è§£æ„ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šå‡½æ•°å‚æ•°è§£æ„</h3>
                <div class="code-block">
                    <pre><code>// å¯¹è±¡å‚æ•°è§£æ„
function displayUser({ name, age = 18, city = 'Unknown' }) {
    console.log(`${name}, ${age}å², æ¥è‡ª${city}`);
}

displayUser({ name: 'Alice', age: 25, city: 'Beijing' });
displayUser({ name: 'Bob', city: 'Shanghai' });
displayUser({ name: 'Charlie' });

// æ•°ç»„å‚æ•°è§£æ„
function sum([a, b, c]) {
    return a + b + c;
}

console.log('sum:', sum([1, 2, 3]));

// æ··åˆè§£æ„
function processData({ 
    id, 
    values: [min, max],
    options: { strict = false } = {}
}) {
    console.log(`ID: ${id}, Range: ${min}-${max}, Strict: ${strict}`);
}

processData({
    id: 1,
    values: [0, 100],
    options: { strict: true }
});</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <!-- ç¤ºä¾‹5: è§£æ„å¯è¿­ä»£å¯¹è±¡ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šè§£æ„å¯è¿­ä»£å¯¹è±¡</h3>
                <div class="code-block">
                    <pre><code>// è§£æ„å­—ç¬¦ä¸²
const [char1, char2] = 'Hello';
console.log('å­—ç¬¦ä¸²è§£æ„:', char1, char2);

// è§£æ„ Set
const [a, b, c] = new Set([1, 2, 3]);
console.log('Set è§£æ„:', a, b, c);

// è§£æ„ Map
const [[key1, val1], [key2, val2]] = new Map([
    ['name', 'Alice'],
    ['age', 25]
]);
console.log('Map è§£æ„:', key1, val1, key2, val2);

// è§£æ„ç”Ÿæˆå™¨
function* gen() {
    yield 1;
    yield 2;
    yield 3;
}

const [x, y, z] = gen();
console.log('ç”Ÿæˆå™¨è§£æ„:', x, y, z);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <!-- ç¤ºä¾‹6: å®ç”¨æŠ€å·§ -->
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šå®ç”¨æŠ€å·§</h3>
                <div class="code-block">
                    <pre><code>// æŠ€å·§1: æå– JSON æ•°æ®
const json = {
    id: 1,
    title: 'Post',
    author: { name: 'Alice' },
    tags: ['js', 'es6']
};

const { 
    id, 
    title, 
    author: { name: authorName },
    tags: [firstTag]
} = json;

console.log('æå–æ•°æ®:', id, title, authorName, firstTag);

// æŠ€å·§2: è¿‡æ»¤å¯¹è±¡å±æ€§
const user = { id: 1, name: 'Bob', password: '123', role: 'admin' };
const { password, ...safeUser } = user;
console.log('å®‰å…¨ç”¨æˆ·:', safeUser);

// æŠ€å·§3: åˆå¹¶é»˜è®¤é…ç½®
function createConfig(options = {}) {
    const {
        host = 'localhost',
        port = 8080,
        ssl = false,
        ...extra
    } = options;
    
    return { host, port, ssl, ...extra };
}

console.log('é…ç½®1:', createConfig());
console.log('é…ç½®2:', createConfig({ host: 'example.com', debug: true }));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
