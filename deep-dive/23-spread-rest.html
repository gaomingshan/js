<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰©å±•è¿ç®—ç¬¦ä¸å‰©ä½™å‚æ•° - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>æ‰©å±•è¿ç®—ç¬¦ä¸å‰©ä½™å‚æ•°</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆSpreadï¼‰å’Œå‰©ä½™å‚æ•°ï¼ˆRestï¼‰ä½¿ç”¨ç›¸åŒçš„è¯­æ³•ï¼ˆ...ï¼‰ï¼Œä½†ä½œç”¨ç›¸åã€‚ç†è§£å®ƒä»¬çš„åº•å±‚å®ç°æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨è¿™äº›ç‰¹æ€§ã€‚</p>
            
            <h2>ä¸€ã€æ‰©å±•è¿ç®—ç¬¦ï¼ˆSpreadï¼‰</h2>
            
            <h3>1.1 æ•°ç»„æ‰©å±•</h3>
            <pre><code>// åŸºæœ¬ç”¨æ³•
const arr1 = [1, 2, 3];
const arr2 = [...arr1, 4, 5];
console.log(arr2);  // [1, 2, 3, 4, 5]

// åº•å±‚å®ç°ï¼ˆç®€åŒ–ï¼‰
const arr3 = arr1.concat([4, 5]);

// åˆå¹¶æ•°ç»„
const a = [1, 2];
const b = [3, 4];
const c = [...a, ...b];  // [1, 2, 3, 4]

// ç­‰ä»·äº
const c2 = a.concat(b);</code></pre>
            
            <h3>1.2 å¯¹è±¡æ‰©å±•</h3>
            <pre><code>// å¯¹è±¡æ‰©å±•
const obj1 = { x: 1, y: 2 };
const obj2 = { ...obj1, z: 3 };
console.log(obj2);  // { x: 1, y: 2, z: 3 }

// åº•å±‚å®ç°
const obj3 = Object.assign({}, obj1, { z: 3 });

// æµ…æ‹·è´
const original = { a: 1, b: { c: 2 } };
const copy = { ...original };
copy.a = 10;
copy.b.c = 20;

console.log(original.a);    // 1ï¼ˆä¸å—å½±å“ï¼‰
console.log(original.b.c);  // 20ï¼ˆå—å½±å“ï¼ï¼‰</code></pre>
            
            <h3>1.3 å‡½æ•°è°ƒç”¨</h3>
            <pre><code>// å‡½æ•°å‚æ•°æ‰©å±•
function sum(a, b, c) {
    return a + b + c;
}

const numbers = [1, 2, 3];
console.log(sum(...numbers));  // 6

// ç­‰ä»·äº
console.log(sum.apply(null, numbers));</code></pre>
            
            <h2>äºŒã€å‰©ä½™å‚æ•°ï¼ˆRestï¼‰</h2>
            
            <h3>2.1 å‡½æ•°å‚æ•°</h3>
            <pre><code>// æ”¶é›†å‰©ä½™å‚æ•°
function sum(...args) {
    return args.reduce((a, b) => a + b, 0);
}

console.log(sum(1, 2, 3, 4));  // 10

// åº•å±‚ï¼šargs æ˜¯çœŸæ­£çš„æ•°ç»„
console.log(Array.isArray(args));  // true

// vs arguments
function oldWay() {
    // arguments æ˜¯ç±»æ•°ç»„å¯¹è±¡
    const arr = Array.prototype.slice.call(arguments);
    return arr.reduce((a, b) => a + b, 0);
}</code></pre>
            
            <h3>2.2 è§£æ„ä¸­çš„å‰©ä½™</h3>
            <pre><code>// æ•°ç»„è§£æ„
const [first, ...rest] = [1, 2, 3, 4, 5];
console.log(first);  // 1
console.log(rest);   // [2, 3, 4, 5]

// å¯¹è±¡è§£æ„
const { x, ...others } = { x: 1, y: 2, z: 3 };
console.log(x);       // 1
console.log(others);  // { y: 2, z: 3 }</code></pre>
            
            <h2>ä¸‰ã€åº•å±‚å®ç°</h2>
            
            <h3>3.1 è¿­ä»£å™¨åè®®</h3>
            <pre><code>// æ‰©å±•è¿ç®—ç¬¦åŸºäºè¿­ä»£å™¨
const arr = [1, 2, 3];
const spread = [...arr];

// ç­‰ä»·äº
const spread2 = [];
for (const item of arr) {
    spread2.push(item);
}

// è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡
const range = {
    from: 1,
    to: 5,
    
    [Symbol.iterator]() {
        let current = this.from;
        const last = this.to;
        
        return {
            next() {
                if (current <= last) {
                    return { value: current++, done: false };
                }
                return { done: true };
            }
        };
    }
};

const arr = [...range];  // [1, 2, 3, 4, 5]</code></pre>
            
            <h3>3.2 å¯¹è±¡æ‰©å±•å®ç°</h3>
            <pre><code>// å¯¹è±¡æ‰©å±•çš„ç®€åŒ–å®ç°
function spreadObject(target, ...sources) {
    for (const source of sources) {
        // åªå¤åˆ¶å¯æšä¸¾çš„è‡ªæœ‰å±æ€§
        for (const key of Object.keys(source)) {
            target[key] = source[key];
        }
    }
    return target;
}

const obj = spreadObject({}, { a: 1 }, { b: 2 });
console.log(obj);  // { a: 1, b: 2 }</code></pre>
            
            <h2>å››ã€å®é™…åº”ç”¨</h2>
            
            <h3>4.1 æ•°ç»„æ“ä½œ</h3>
            <pre><code>// 1. æ•°ç»„å¤åˆ¶
const original = [1, 2, 3];
const copy = [...original];

// 2. æ•°ç»„åˆå¹¶
const arr1 = [1, 2];
const arr2 = [3, 4];
const merged = [...arr1, ...arr2];

// 3. æ•°ç»„å»é‡
const arr = [1, 2, 2, 3, 3, 4];
const unique = [...new Set(arr)];  // [1, 2, 3, 4]

// 4. æ•°ç»„è½¬æ¢
const str = 'hello';
const chars = [...str];  // ['h', 'e', 'l', 'l', 'o']

// 5. æŸ¥æ‰¾æœ€å¤§/æœ€å°å€¼
const numbers = [1, 5, 3, 9, 2];
const max = Math.max(...numbers);  // 9
const min = Math.min(...numbers);  // 1</code></pre>
            
            <h3>4.2 å¯¹è±¡æ“ä½œ</h3>
            <pre><code>// 1. å¯¹è±¡å¤åˆ¶
const obj = { a: 1, b: 2 };
const copy = { ...obj };

// 2. å¯¹è±¡åˆå¹¶
const defaults = { x: 0, y: 0 };
const options = { x: 10 };
const config = { ...defaults, ...options };
// { x: 10, y: 0 }ï¼ˆåé¢çš„è¦†ç›–å‰é¢çš„ï¼‰

// 3. æ·»åŠ /ä¿®æ”¹å±æ€§
const user = { name: 'Alice', age: 25 };
const updated = { ...user, age: 26, city: 'Beijing' };

// 4. åˆ é™¤å±æ€§ï¼ˆé…åˆè§£æ„ï¼‰
const { password, ...public } = {
    name: 'Alice',
    password: 'secret',
    email: 'alice@email.com'
};
console.log(public);  // { name: 'Alice', email: 'alice@email.com' }</code></pre>
            
            <h3>4.3 å‡½æ•°å‚æ•°</h3>
            <pre><code>// 1. å¯å˜å‚æ•°å‡½æ•°
function log(level, ...messages) {
    console.log(`[${level}]`, ...messages);
}

log('INFO', 'User', 'logged in');
// [INFO] User logged in

// 2. å‚æ•°è½¬å‘
function wrapper(...args) {
    return originalFunction(...args);
}

// 3. éƒ¨åˆ†åº”ç”¨
function partial(fn, ...fixedArgs) {
    return function(...remainingArgs) {
        return fn(...fixedArgs, ...remainingArgs);
    };
}

const add = (a, b, c) => a + b + c;
const add5 = partial(add, 5);
console.log(add5(3, 2));  // 10</code></pre>
            
            <h2>äº”ã€æ€§èƒ½è€ƒè™‘</h2>
            
            <h3>5.1 æ‰©å±•è¿ç®—ç¬¦æ€§èƒ½</h3>
            <pre><code>// å¤§æ•°ç»„æ‰©å±•å¯èƒ½è¾ƒæ…¢
const largeArray = new Array(1000000).fill(0);

// æ…¢
console.time('spread');
const copy1 = [...largeArray];
console.timeEnd('spread');

// å¿«
console.time('slice');
const copy2 = largeArray.slice();
console.timeEnd('slice');

// å»ºè®®ï¼šå¤§æ•°ç»„ç”¨ slice()æˆ– Array.from()</code></pre>
            
            <h3>5.2 å¯¹è±¡æ‰©å±•æ€§èƒ½</h3>
            <pre><code>// å¯¹è±¡æ‰©å±•vs Object.assign
const obj = { a: 1, b: 2, c: 3 };

console.time('spread');
for (let i = 0; i < 100000; i++) {
    const copy = { ...obj };
}
console.timeEnd('spread');

console.time('assign');
for (let i = 0; i < 100000; i++) {
    const copy = Object.assign({}, obj);
}
console.timeEnd('assign');

// æ€§èƒ½ç›¸è¿‘ï¼Œä½† spread æ›´ç®€æ´</code></pre>
            
            <h2>å…­ã€æ³¨æ„äº‹é¡¹</h2>
            
            <h3>6.1 æµ…æ‹·è´</h3>
            <pre><code>// æ‰©å±•è¿ç®—ç¬¦åªåšæµ…æ‹·è´
const obj = {
    name: 'Alice',
    address: { city: 'Beijing' }
};

const copy = { ...obj };
copy.address.city = 'Shanghai';

console.log(obj.address.city);  // 'Shanghai'ï¼ˆå—å½±å“ï¼ï¼‰

// æ·±æ‹·è´éœ€è¦å…¶ä»–æ–¹æ³•
const deepCopy = JSON.parse(JSON.stringify(obj));
// æˆ–ä½¿ç”¨ structuredClone()
const deepCopy2 = structuredClone(obj);</code></pre>
            
            <h3>6.2 å‰©ä½™å‚æ•°é™åˆ¶</h3>
            <pre><code>// å‰©ä½™å‚æ•°å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°
function fn(a, ...rest, b) {  // âŒ è¯­æ³•é”™è¯¯
}

function fn(a, b, ...rest) {  // âœ“ æ­£ç¡®
}

// åªèƒ½æœ‰ä¸€ä¸ªå‰©ä½™å‚æ•°
function fn(...rest1, ...rest2) {  // âŒ è¯­æ³•é”™è¯¯
}</code></pre>
            
            <h2>ä¸ƒã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>ä¼˜å…ˆä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦</strong>ï¼šä»£ç æ›´ç®€æ´</li>
                    <li><strong>æ³¨æ„æµ…æ‹·è´</strong>ï¼šåµŒå¥—å¯¹è±¡éœ€è¦æ·±æ‹·è´</li>
                    <li><strong>æ€§èƒ½æ•æ„Ÿåœºæ™¯</strong>ï¼šå¤§æ•°ç»„è€ƒè™‘å…¶ä»–æ–¹æ³•</li>
                    <li><strong>å‰©ä½™å‚æ•°ä»£æ›¿ arguments</strong>ï¼šæ›´ç°ä»£ã€æ›´æ¸…æ™°</li>
                    <li><strong>åˆç†ä½¿ç”¨</strong>ï¼šä¸è¦è¿‡åº¦ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-array-initializer" target="_blank">ECMAScript - Array Initializer</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank">MDN - å±•å¼€è¯­æ³•</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="23-destructuring.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šè§£æ„èµ‹å€¼</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="23-template-literals.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šæ¨¡æ¿å­—ç¬¦ä¸²</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šæ•°ç»„æ‰©å±•</h3>
                <div class="code-block">
                    <pre><code>// æ•°ç»„æ‰©å±•è¿ç®—ç¬¦
console.log('=== æ•°ç»„æ‰©å±• ===\n');

const arr1 = [1, 2, 3];
const arr2 = [...arr1, 4, 5];
console.log('arr2:', arr2);

const a = [1, 2];
const b = [3, 4];
const merged = [...a, ...b];
console.log('merged:', merged);

const copy = [...arr1];
console.log('copy:', copy);
console.log('copy === arr1:', copy === arr1);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šå¯¹è±¡æ‰©å±•</h3>
                <div class="code-block">
                    <pre><code>// å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦
console.log('=== å¯¹è±¡æ‰©å±• ===\n');

const obj1 = { x: 1, y: 2 };
const obj2 = { ...obj1, z: 3 };
console.log('obj2:', obj2);

const defaults = { a: 1, b: 2 };
const options = { b: 3, c: 4 };
const config = { ...defaults, ...options };
console.log('config:', config);

const { password, ...public } = {
    name: 'Alice',
    password: 'secret',
    email: 'alice@email.com'
};
console.log('public:', public);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šå‰©ä½™å‚æ•°</h3>
                <div class="code-block">
                    <pre><code>// å‰©ä½™å‚æ•°
console.log('=== å‰©ä½™å‚æ•° ===\n');

function sum(...args) {
    console.log('args:', args);
    console.log('Array.isArray(args):', Array.isArray(args));
    return args.reduce((a, b) => a + b, 0);
}

console.log('sum(1, 2, 3):', sum(1, 2, 3));
console.log('sum(1, 2, 3, 4, 5):', sum(1, 2, 3, 4, 5));

const [first, ...rest] = [1, 2, 3, 4];
console.log('\nfirst:', first);
console.log('rest:', rest);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šæ•°ç»„å»é‡</h3>
                <div class="code-block">
                    <pre><code>// ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å»é‡
console.log('=== æ•°ç»„å»é‡ ===\n');

const arr = [1, 2, 2, 3, 3, 4, 5, 5];
console.log('åŸæ•°ç»„:', arr);

const unique = [...new Set(arr)];
console.log('å»é‡å:', unique);

const str = 'hello';
const chars = [...str];
console.log('\nå­—ç¬¦ä¸²è½¬æ•°ç»„:');
console.log('str:', str);
console.log('chars:', chars);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šæµ…æ‹·è´é™·é˜±</h3>
                <div class="code-block">
                    <pre><code>// æµ…æ‹·è´çš„æ³¨æ„äº‹é¡¹
console.log('=== æµ…æ‹·è´ ===\n');

const original = {
    name: 'Alice',
    address: { city: 'Beijing' }
};

const copy = { ...original };

console.log('ä¿®æ”¹å‰:');
console.log('original.address.city:', original.address.city);

copy.address.city = 'Shanghai';

console.log('\nä¿®æ”¹ copy å:');
console.log('original.address.city:', original.address.city);
console.log('(å—å½±å“ï¼åµŒå¥—å¯¹è±¡æ˜¯æµ…æ‹·è´)');

console.log('\ncopy.name = "Bob"');
copy.name = 'Bob';
console.log('original.name:', original.name);
console.log('(ä¸å—å½±å“ï¼Œç¬¬ä¸€å±‚æ˜¯æ·±æ‹·è´)');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šå‡½æ•°å‚æ•°æ‰©å±•</h3>
                <div class="code-block">
                    <pre><code>// å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨æ‰©å±•
console.log('=== å‡½æ•°å‚æ•° ===\n');

function greet(greeting, ...names) {
    return `${greeting}, ${names.join(' and ')}!`;
}

console.log(greet('Hello', 'Alice'));
console.log(greet('Hi', 'Bob', 'Charlie'));
console.log(greet('Welcome', 'David', 'Eve', 'Frank'));

function max(...numbers) {
    return Math.max(...numbers);
}

console.log('\nmax(1, 5, 3, 9, 2):', max(1, 5, 3, 9, 2));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
