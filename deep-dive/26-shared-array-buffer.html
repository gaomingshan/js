<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SharedArrayBuffer - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>SharedArrayBuffer</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>SharedArrayBuffer å…è®¸åœ¨å¤šä¸ª Worker ä¹‹é—´å…±äº«å†…å­˜ï¼Œå®ç°çœŸæ­£çš„å¹¶è¡Œè®¡ç®—ã€‚</p>
            
            <h2>ä¸€ã€åŸºç¡€ç”¨æ³•</h2>
            
            <pre><code>// åˆ›å»ºå…±äº«å†…å­˜
const sab = new SharedArrayBuffer(1024);

// åœ¨å¤šä¸ª Worker ä¸­å…±äº«
const worker = new Worker('worker.js');
worker.postMessage({ buffer: sab });</code></pre>
            
            <h2>äºŒã€ä¸ TypedArray é…åˆ</h2>
            
            <pre><code>const sab = new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT * 100);
const view = new Int32Array(sab);

view[0] = 42;  // æ‰€æœ‰ Worker éƒ½èƒ½çœ‹åˆ°</code></pre>
            
            <h2>ä¸‰ã€å®‰å…¨æ€§è€ƒè™‘</h2>
            
            <div class="tip">
                <p>âš ï¸ SharedArrayBuffer éœ€è¦ç‰¹å®šçš„å®‰å…¨å¤´ï¼š</p>
                <ul>
                    <li>Cross-Origin-Opener-Policy: same-origin</li>
                    <li>Cross-Origin-Embedder-Policy: require-corp</li>
                </ul>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank">MDN - SharedArrayBuffer</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="25-private-fields.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šç§æœ‰å­—æ®µå®ç°</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="26-atomics.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šAtomics API</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ï¼šSharedArrayBuffer åŸºç¡€</h3>
                <div class="code-block">
                    <pre><code>console.log('=== SharedArrayBuffer ===\n');

// åˆ›å»ºå…±äº«å†…å­˜ï¼ˆ4å­—èŠ‚ * 10 = 40å­—èŠ‚ï¼‰
const sab = new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT * 10);
console.log('å­—èŠ‚é•¿åº¦:', sab.byteLength);

// åˆ›å»ºè§†å›¾
const view = new Int32Array(sab);
view[0] = 42;
view[1] = 100;

console.log('view[0]:', view[0]);
console.log('view[1]:', view[1]);

console.log('\næ³¨æ„: å®é™…ä½¿ç”¨éœ€åœ¨ Worker é—´å…±äº«');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
