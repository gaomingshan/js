<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼ˆBOMï¼‰</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>BOMï¼ˆBrowser Object Modelï¼‰æä¾›äº†ä¸æµè§ˆå™¨äº¤äº’çš„æ¥å£ï¼ŒåŒ…æ‹¬ windowã€locationã€navigatorã€history ç­‰å¯¹è±¡ã€‚</p>
            
            <h2>ä¸€ã€window å¯¹è±¡</h2>
            
            <h3>1.1 å…¨å±€å¯¹è±¡</h3>
            <p>window æ˜¯æµè§ˆå™¨çš„å…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½æ˜¯å®ƒçš„å±æ€§ï¼š</p>
            
            <pre><code>// å…¨å±€å˜é‡æ˜¯ window çš„å±æ€§
var globalVar = 'value';
console.log(window.globalVar);  // 'value'

// å…¨å±€å‡½æ•°æ˜¯ window çš„æ–¹æ³•
function globalFunc() {}
console.log(window.globalFunc);  // function</code></pre>
            
            <h3>1.2 window å°ºå¯¸</h3>
            <pre><code>// æµè§ˆå™¨çª—å£å°ºå¯¸ï¼ˆåŒ…æ‹¬æ»šåŠ¨æ¡ï¼‰
window.innerWidth;
window.innerHeight;

// æµè§ˆå™¨çª—å£å¤–éƒ¨å°ºå¯¸
window.outerWidth;
window.outerHeight;

// å±å¹•å°ºå¯¸
window.screen.width;
window.screen.height;

// å¯ç”¨å±å¹•å°ºå¯¸ï¼ˆæ’é™¤ä»»åŠ¡æ ï¼‰
window.screen.availWidth;
window.screen.availHeight;</code></pre>
            
            <h3>1.3 çª—å£ä½ç½®</h3>
            <pre><code>// çª—å£ç›¸å¯¹äºå±å¹•çš„ä½ç½®
window.screenX;
window.screenY;

// é¡µé¢æ»šåŠ¨ä½ç½®
window.scrollX;  // æˆ– window.pageXOffset
window.scrollY;  // æˆ– window.pageYOffset</code></pre>
            
            <h3>1.4 çª—å£æ–¹æ³•</h3>
            <pre><code>// æ‰“å¼€æ–°çª—å£
window.open('url', 'name', 'width=800,height=600');

// å…³é—­çª—å£
window.close();

// æ»šåŠ¨
window.scrollTo(0, 100);
window.scrollBy(0, 50);

// æç¤ºæ¡†
window.alert('æç¤º');
window.confirm('ç¡®è®¤å—ï¼Ÿ');
window.prompt('è¯·è¾“å…¥ï¼š', 'é»˜è®¤å€¼');</code></pre>
            
            <h2>äºŒã€location å¯¹è±¡</h2>
            
            <h3>2.1 URL ä¿¡æ¯</h3>
            <pre><code>// å®Œæ•´ URL
location.href = 'https://example.com:8080/path?q=js#hash';

// åè®®
location.protocol;  // 'https:'

// ä¸»æœºå
location.hostname;  // 'example.com'

// ç«¯å£
location.port;      // '8080'

// è·¯å¾„
location.pathname;  // '/path'

// æŸ¥è¯¢å­—ç¬¦ä¸²
location.search;    // '?q=js'

// å“ˆå¸Œ
location.hash;      // '#hash'</code></pre>
            
            <h3>2.2 é¡µé¢å¯¼èˆª</h3>
            <pre><code>// è·³è½¬åˆ°æ–°é¡µé¢
location.href = 'https://example.com';
location.assign('https://example.com');

// æ›¿æ¢å½“å‰é¡µé¢ï¼ˆä¸ç”Ÿæˆå†å²è®°å½•ï¼‰
location.replace('https://example.com');

// åˆ·æ–°é¡µé¢
location.reload();       // å¯èƒ½ä»ç¼“å­˜åŠ è½½
location.reload(true);   // å¼ºåˆ¶ä»æœåŠ¡å™¨åŠ è½½</code></pre>
            
            <h3>2.3 URLSearchParams</h3>
            <pre><code>// è§£ææŸ¥è¯¢å­—ç¬¦ä¸²
const params = new URLSearchParams(location.search);

params.get('q');           // è·å–å‚æ•°
params.has('q');           // æ£€æŸ¥æ˜¯å¦å­˜åœ¨
params.getAll('tag');      // è·å–æ‰€æœ‰å€¼
params.set('q', 'js');     // è®¾ç½®å‚æ•°
params.delete('q');        // åˆ é™¤å‚æ•°

// éå†
for (const [key, value] of params) {
    console.log(key, value);
}</code></pre>
            
            <h2>ä¸‰ã€navigator å¯¹è±¡</h2>
            
            <h3>3.1 æµè§ˆå™¨ä¿¡æ¯</h3>
            <pre><code>// ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²
navigator.userAgent;

// æµè§ˆå™¨åç§°
navigator.appName;

// æµè§ˆå™¨ç‰ˆæœ¬
navigator.appVersion;

// å¹³å°
navigator.platform;  // 'Win32', 'MacIntel' ç­‰

// è¯­è¨€
navigator.language;     // 'zh-CN'
navigator.languages;    // ['zh-CN', 'zh', 'en']</code></pre>
            
            <h3>3.2 åœ¨çº¿çŠ¶æ€</h3>
            <pre><code>// æ£€æµ‹æ˜¯å¦åœ¨çº¿
navigator.onLine;  // true/false

// ç›‘å¬åœ¨çº¿çŠ¶æ€å˜åŒ–
window.addEventListener('online', () => {
    console.log('ç½‘ç»œè¿æ¥');
});

window.addEventListener('offline', () => {
    console.log('ç½‘ç»œæ–­å¼€');
});</code></pre>
            
            <h3>3.3 åœ°ç†ä½ç½®</h3>
            <pre><code>// è·å–åœ°ç†ä½ç½®
navigator.geolocation.getCurrentPosition(
    position => {
        console.log('çº¬åº¦:', position.coords.latitude);
        console.log('ç»åº¦:', position.coords.longitude);
    },
    error => {
        console.error('è·å–ä½ç½®å¤±è´¥:', error);
    }
);</code></pre>
            
            <h2>å››ã€history å¯¹è±¡</h2>
            
            <h3>4.1 å†å²å¯¼èˆª</h3>
            <pre><code>// åé€€
history.back();
history.go(-1);

// å‰è¿›
history.forward();
history.go(1);

// è·³è½¬åˆ°æŒ‡å®šå†å²è®°å½•
history.go(2);   // å‰è¿›2é¡µ
history.go(-2);  // åé€€2é¡µ

// å†å²è®°å½•æ•°é‡
history.length;</code></pre>
            
            <h3>4.2 History API</h3>
            <pre><code>// æ·»åŠ å†å²è®°å½•ï¼ˆä¸åˆ·æ–°é¡µé¢ï¼‰
history.pushState(
    { page: 1 },      // state å¯¹è±¡
    'title',          // æ ‡é¢˜ï¼ˆå¤§éƒ¨åˆ†æµè§ˆå™¨å¿½ç•¥ï¼‰
    '/page1'          // URL
);

// æ›¿æ¢å½“å‰å†å²è®°å½•
history.replaceState({ page: 2 }, '', '/page2');

// ç›‘å¬å†å²è®°å½•å˜åŒ–
window.addEventListener('popstate', (e) => {
    console.log('state:', e.state);
});</code></pre>
            
            <h2>äº”ã€screen å¯¹è±¡</h2>
            
            <h3>5.1 å±å¹•ä¿¡æ¯</h3>
            <pre><code>// å±å¹•å°ºå¯¸
screen.width;
screen.height;

// å¯ç”¨å°ºå¯¸ï¼ˆæ’é™¤ä»»åŠ¡æ ï¼‰
screen.availWidth;
screen.availHeight;

// é¢œè‰²æ·±åº¦
screen.colorDepth;  // 24

// åƒç´ æ·±åº¦
screen.pixelDepth;  // 24</code></pre>
            
            <h2>å…­ã€å®šæ—¶å™¨</h2>
            
            <h3>6.1 setTimeout / setInterval</h3>
            <pre><code>// å»¶æ—¶æ‰§è¡Œ
const timerId = setTimeout(() => {
    console.log('1ç§’åæ‰§è¡Œ');
}, 1000);

// å–æ¶ˆå®šæ—¶å™¨
clearTimeout(timerId);

// å®šæ—¶æ‰§è¡Œ
const intervalId = setInterval(() => {
    console.log('æ¯ç§’æ‰§è¡Œ');
}, 1000);

// å–æ¶ˆå®šæ—¶æ‰§è¡Œ
clearInterval(intervalId);</code></pre>
            
            <h3>6.2 requestAnimationFrame</h3>
            <pre><code>// åŠ¨ç”»å¸§
function animate() {
    // åŠ¨ç”»é€»è¾‘
    requestAnimationFrame(animate);
}

const animationId = requestAnimationFrame(animate);

// å–æ¶ˆåŠ¨ç”»å¸§
cancelAnimationFrame(animationId);</code></pre>
            
            <h2>ä¸ƒã€å®ç”¨æŠ€å·§</h2>
            
            <h3>7.1 æ£€æµ‹æµè§ˆå™¨</h3>
            <pre><code>const ua = navigator.userAgent;

const isChrome = /Chrome/.test(ua);
const isFirefox = /Firefox/.test(ua);
const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);
const isEdge = /Edg/.test(ua);</code></pre>
            
            <h3>7.2 æ£€æµ‹ç§»åŠ¨è®¾å¤‡</h3>
            <pre><code>const isMobile = /Android|iPhone|iPad|iPod/.test(navigator.userAgent);

// æˆ–ä½¿ç”¨ matchMedia
const isMobile = window.matchMedia('(max-width: 768px)').matches;</code></pre>
            
            <h3>7.3 å¹³æ»‘æ»šåŠ¨</h3>
            <pre><code>// æ»šåŠ¨åˆ°é¡¶éƒ¨
window.scrollTo({
    top: 0,
    behavior: 'smooth'
});

// æ»šåŠ¨åˆ°å…ƒç´ 
element.scrollIntoView({
    behavior: 'smooth',
    block: 'start'
});</code></pre>
            
            <h2>å…«ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>é¿å…æ±¡æŸ“å…¨å±€</strong>ï¼šä½¿ç”¨æ¨¡å—åŒ–æˆ–ç«‹å³æ‰§è¡Œå‡½æ•°</li>
                    <li><strong>ç‰¹æ€§æ£€æµ‹</strong>ï¼šä½¿ç”¨ç‰¹æ€§æ£€æµ‹è€Œéæµè§ˆå™¨æ£€æµ‹</li>
                    <li><strong>History API</strong>ï¼šSPA åº”ç”¨ä½¿ç”¨ History API</li>
                    <li><strong>æ¸…ç†å®šæ—¶å™¨</strong>ï¼šç»„ä»¶é”€æ¯æ—¶æ¸…ç†å®šæ—¶å™¨</li>
                    <li><strong>ä½¿ç”¨ RAF</strong>ï¼šåŠ¨ç”»ä½¿ç”¨ requestAnimationFrame</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://html.spec.whatwg.org/#window" target="_blank">HTML Standard - Window</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window" target="_blank">MDN - Window</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="10-events.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šäº‹ä»¶ç³»ç»Ÿ</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="11-storage.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šæœ¬åœ°å­˜å‚¨</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šwindow å¯¹è±¡</h3>
                <div class="code-block">
                    <pre><code>// çª—å£å°ºå¯¸
console.log('=== çª—å£å°ºå¯¸ ===');
console.log('innerWidth:', window.innerWidth);
console.log('innerHeight:', window.innerHeight);
console.log('outerWidth:', window.outerWidth);
console.log('outerHeight:', window.outerHeight);

// å±å¹•å°ºå¯¸
console.log('\n=== å±å¹•å°ºå¯¸ ===');
console.log('screen.width:', window.screen.width);
console.log('screen.height:', window.screen.height);
console.log('availWidth:', window.screen.availWidth);
console.log('availHeight:', window.screen.availHeight);

// æ»šåŠ¨ä½ç½®
console.log('\n=== æ»šåŠ¨ä½ç½® ===');
console.log('scrollX:', window.scrollX);
console.log('scrollY:', window.scrollY);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šlocation å¯¹è±¡</h3>
                <div class="code-block">
                    <pre><code>// å½“å‰ URL ä¿¡æ¯
console.log('=== location å¯¹è±¡ ===');
console.log('href:', location.href);
console.log('protocol:', location.protocol);
console.log('hostname:', location.hostname);
console.log('port:', location.port || '(é»˜è®¤)');
console.log('pathname:', location.pathname);
console.log('search:', location.search || '(æ— )');
console.log('hash:', location.hash || '(æ— )');

// URLSearchParams ç¤ºä¾‹
console.log('\n=== URLSearchParams ===');
const params = new URLSearchParams('?name=js&version=es6&tag=async&tag=promise');

console.log('get("name"):', params.get('name'));
console.log('has("version"):', params.has('version'));
console.log('getAll("tag"):', params.getAll('tag'));

console.log('\néå†å‚æ•°:');
for (const [key, value] of params) {
    console.log(`  ${key}: ${value}`);
}</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šnavigator å¯¹è±¡</h3>
                <div class="code-block">
                    <pre><code>// æµè§ˆå™¨ä¿¡æ¯
console.log('=== navigator å¯¹è±¡ ===');
console.log('userAgent:', navigator.userAgent);
console.log('platform:', navigator.platform);
console.log('language:', navigator.language);
console.log('languages:', navigator.languages);

// åœ¨çº¿çŠ¶æ€
console.log('\n=== åœ¨çº¿çŠ¶æ€ ===');
console.log('onLine:', navigator.onLine);

// æ£€æµ‹æµè§ˆå™¨ç±»å‹
const ua = navigator.userAgent;
console.log('\n=== æµè§ˆå™¨æ£€æµ‹ ===');
console.log('Chrome:', /Chrome/.test(ua) && !/Edg/.test(ua));
console.log('Firefox:', /Firefox/.test(ua));
console.log('Safari:', /Safari/.test(ua) && !/Chrome/.test(ua));
console.log('Edge:', /Edg/.test(ua));

// æ£€æµ‹è®¾å¤‡ç±»å‹
console.log('\n=== è®¾å¤‡æ£€æµ‹ ===');
const isMobile = /Android|iPhone|iPad|iPod/.test(ua);
console.log('ç§»åŠ¨è®¾å¤‡:', isMobile);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šhistory å¯¹è±¡</h3>
                <div class="code-block">
                    <pre><code>// history å¯¹è±¡
console.log('=== history å¯¹è±¡ ===');
console.log('length:', history.length);

// History API ç¤ºä¾‹ï¼ˆä¸ä¼šå®é™…æ‰§è¡Œè·³è½¬ï¼‰
console.log('\nHistory API æ–¹æ³•:');
console.log('  history.pushState(state, title, url)');
console.log('  - æ·»åŠ æ–°çš„å†å²è®°å½•');
console.log('  - ä¸åˆ·æ–°é¡µé¢');
console.log('  - æ”¹å˜ URL');

console.log('\n  history.replaceState(state, title, url)');
console.log('  - æ›¿æ¢å½“å‰å†å²è®°å½•');
console.log('  - ä¸åˆ·æ–°é¡µé¢');

console.log('\n  history.back() / forward() / go(n)');
console.log('  - å†å²è®°å½•å¯¼èˆª');

console.log('\nç›‘å¬å†å²è®°å½•å˜åŒ–:');
console.log('  window.addEventListener("popstate", handler);');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šå®šæ—¶å™¨</h3>
                <div class="code-block">
                    <pre><code>// setTimeout ç¤ºä¾‹
console.log('=== setTimeout ===');
console.log('å¼€å§‹');

const timer1 = setTimeout(() => {
    console.log('1ç§’åæ‰§è¡Œ');
}, 1000);

console.log('timerId:', timer1);

// setInterval ç¤ºä¾‹
console.log('\n=== setInterval ===');
let count = 0;
const timer2 = setInterval(() => {
    count++;
    console.log(`æ‰§è¡Œç¬¬ ${count} æ¬¡`);
    if (count >= 3) {
        clearInterval(timer2);
        console.log('åœæ­¢å®šæ—¶å™¨');
    }
}, 500);

// æ¸…ç†å®šæ—¶å™¨ç¤ºä¾‹
console.log('\næ¸…ç†å®šæ—¶å™¨:');
console.log('  clearTimeout(timerId)');
console.log('  clearInterval(intervalId)');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šå®ç”¨å·¥å…·å‡½æ•°</h3>
                <div class="code-block">
                    <pre><code>// æ£€æµ‹æµè§ˆå™¨å’Œè®¾å¤‡
function getBrowserInfo() {
    const ua = navigator.userAgent;
    
    return {
        isChrome: /Chrome/.test(ua) && !/Edg/.test(ua),
        isFirefox: /Firefox/.test(ua),
        isSafari: /Safari/.test(ua) && !/Chrome/.test(ua),
        isEdge: /Edg/.test(ua),
        isMobile: /Android|iPhone|iPad|iPod/.test(ua),
        isIOS: /iPhone|iPad|iPod/.test(ua),
        isAndroid: /Android/.test(ua)
    };
}

const info = getBrowserInfo();
console.log('æµè§ˆå™¨å’Œè®¾å¤‡ä¿¡æ¯:');
Object.entries(info).forEach(([key, value]) => {
    if (value) console.log(`  ${key}: ${value}`);
});

// URL å‚æ•°å·¥å…·
function getQueryParams() {
    const params = {};
    const searchParams = new URLSearchParams(location.search);
    for (const [key, value] of searchParams) {
        params[key] = value;
    }
    return params;
}

console.log('\nå½“å‰ URL å‚æ•°:', getQueryParams());</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
