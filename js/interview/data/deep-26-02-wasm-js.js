/**
 * Wasmä¸JavaScriptäº¤äº’
 * åŒ…å«å¤šç§é¢˜å‹ï¼šå•é€‰ã€å¤šé€‰ã€ä»£ç è¾“å‡ºã€åˆ¤æ–­ã€ä»£ç è¡¥å…¨
 */
window.quizData_Deep2602WasmJS = {
  "config": {
    "title": "Wasmä¸JavaScriptäº¤äº’",
    "icon": "ğŸ”—",
    "description": "æŒæ¡Wasmä¸JSä¹‹é—´çš„æ•°æ®ä¼ é€’å’Œè°ƒç”¨",
    "primaryColor": "#10b981",
    "bgGradient": "linear-gradient(135deg, #10b981 0%, #059669 100%)"
  },
  "questions": [
    {"type": "single-choice", "difficulty": "medium", "tags": ["å­—ç¬¦ä¸²"], "question": "å¦‚ä½•åœ¨Wasmå’ŒJSé—´ä¼ é€’å­—ç¬¦ä¸²ï¼Ÿ", "options": ["é€šè¿‡å…±äº«å†…å­˜", "ç›´æ¥ä¼ é€’", "ä½¿ç”¨Table", "ä¸æ”¯æŒ"], "correctAnswer": "A", "explanation": {"title": "å­—ç¬¦ä¸²ä¼ é€’", "code": "// Wasmä¸ç›´æ¥æ”¯æŒå­—ç¬¦ä¸²ï¼Œéœ€è¦é€šè¿‡å†…å­˜\n\n// JS â†’ Wasm\nfunction stringToWasm(str, memory, malloc) {\n  const encoder = new TextEncoder();\n  const bytes = encoder.encode(str + '\\0');\n  const ptr = malloc(bytes.length);\n  const view = new Uint8Array(memory.buffer);\n  view.set(bytes, ptr);\n  return ptr;\n}\n\n// Wasm â†’ JS\nfunction wasmToString(ptr, memory) {\n  const view = new Uint8Array(memory.buffer);\n  let end = ptr;\n  while (view[end] !== 0) end++;\n  const decoder = new TextDecoder();\n  return decoder.decode(view.subarray(ptr, end));\n}\n\n// ä½¿ç”¨\nconst ptr = stringToWasm('Hello', memory, malloc);\ninstance.exports.processString(ptr);\nfree(ptr);"}},
    {"type": "multiple-choice", "difficulty": "hard", "tags": ["å†…å­˜"], "question": "å…±äº«å†…å­˜çš„æ³¨æ„äº‹é¡¹ï¼Ÿ", "options": ["å†…å­˜å¯èƒ½å¢é•¿", "éœ€è¦æ‰‹åŠ¨ç®¡ç†", "å­—èŠ‚åºé—®é¢˜", "æ²¡æœ‰GC", "ç±»å‹è½¬æ¢", "çº¿ç¨‹å®‰å…¨"], "correctAnswer": ["A", "B", "C", "D", "E"], "explanation": {"title": "å†…å­˜ç®¡ç†", "code": "// 1. å†…å­˜å¢é•¿\nconst memory = new WebAssembly.Memory({ initial: 1 });\nconst oldBuffer = memory.buffer;\nmemory.grow(1);\nconst newBuffer = memory.buffer;\nconsole.log(oldBuffer !== newBuffer);  // trueï¼Œbufferè¢«æ›¿æ¢ï¼\n\n// 2. æ‰‹åŠ¨ç®¡ç†\nconst ptr = malloc(100);  // åˆ†é…\nprocessData(ptr);\nfree(ptr);  // é‡Šæ”¾\n\n// 3. å­—èŠ‚åº\nconst view = new DataView(memory.buffer);\nview.setInt32(0, 0x12345678, true);  // å°ç«¯åº\n\n// 4. ç±»å‹è½¬æ¢\nconst u8 = new Uint8Array(memory.buffer);\nconst u32 = new Uint32Array(memory.buffer);\nu8[0] = 0xFF;\nconsole.log(u32[0]);  // å—å­—èŠ‚åºå½±å“"}},
    {"type": "true-false", "difficulty": "easy", "tags": ["å¼‚æ­¥"], "question": "WebAssemblyå¯ä»¥å¼‚æ­¥åŠ è½½", "correctAnswer": "A", "explanation": {"title": "å¼‚æ­¥åŠ è½½", "code": "// å¼‚æ­¥åŠ è½½ï¼ˆæ¨èï¼‰\nconst module = await WebAssembly.instantiateStreaming(\n  fetch('module.wasm')\n);\n\n// æµå¼ç¼–è¯‘ï¼ˆè¾¹ä¸‹è½½è¾¹ç¼–è¯‘ï¼‰\nconst { instance } = await WebAssembly.instantiateStreaming(\n  fetch('large.wasm'),\n  importObject\n);\n\n// åˆ†æ­¥åŠ è½½\nconst response = await fetch('module.wasm');\nconst buffer = await response.arrayBuffer();\nconst compiled = await WebAssembly.compile(buffer);\nconst instance = await WebAssembly.instantiate(compiled);"}},
    {"type": "code-completion", "difficulty": "hard", "tags": ["Table"], "question": "ä½¿ç”¨Tableå­˜å‚¨å‡½æ•°å¼•ç”¨ï¼Œç©ºç™½å¤„å¡«ä»€ä¹ˆï¼Ÿ", "code": "const table = new WebAssembly.______({\n  initial: 10,\n  element: 'anyfunc'\n});\ntable.set(0, myFunction);", "options": ["Table", "FunctionTable", "RefTable", "Array"], "correctAnswer": "A", "explanation": {"title": "Tableå¯¹è±¡", "code": "// Tableï¼šå­˜å‚¨å‡½æ•°å¼•ç”¨\nconst table = new WebAssembly.Table({\n  initial: 10,\n  maximum: 20,\n  element: 'anyfunc'\n});\n\n// è®¾ç½®JSå‡½æ•°\ntable.set(0, (x) => x * 2);\ntable.set(1, Math.sqrt);\n\n// Wasmè°ƒç”¨tableä¸­çš„å‡½æ•°\ninstance.exports.callIndirect(0, 5);  // è°ƒç”¨ç´¢å¼•0çš„å‡½æ•°\n\n// åŠ¨æ€åˆ†æ´¾\nconst handlers = [handler1, handler2, handler3];\nhandlers.forEach((h, i) => table.set(i, h));\n\n// Wasmå¯ä»¥é—´æ¥è°ƒç”¨è¿™äº›å‡½æ•°"}},
    {"type": "code-output", "difficulty": "hard", "tags": ["Global"], "question": "WebAssembly.Globalçš„è¡Œä¸ºï¼Ÿ", "code": "const global = new WebAssembly.Global(\n  { value: 'i32', mutable: true },\n  42\n);\n\nconsole.log(global.value);\nglobal.value = 100;\nconsole.log(global.value);", "options": ["42, 100", "42, 42", "æŠ¥é”™", "undefined, 100"], "correctAnswer": "A", "explanation": {"title": "Globalå˜é‡", "code": "// WebAssembly.Globalï¼šå…±äº«å…¨å±€å˜é‡\nconst global = new WebAssembly.Global(\n  { value: 'i32', mutable: true },\n  42\n);\n\n// JSè®¿é—®\nconsole.log(global.value);  // 42\nglobal.value = 100;\nconsole.log(global.value);  // 100\n\n// ä¼ é€’ç»™Wasm\nconst instance = await WebAssembly.instantiate(buffer, {\n  env: { myGlobal: global }\n});\n\n// Wasmä¿®æ”¹ï¼ŒJSå¯è§\ninstance.exports.setGlobal(200);\nconsole.log(global.value);  // 200\n\n// ä¸å¯å˜å…¨å±€å˜é‡\nconst immutable = new WebAssembly.Global(\n  { value: 'f64', mutable: false },\n  3.14\n);\n// immutable.value = 2.71;  // TypeError"}},
    {"type": "multiple-choice", "difficulty": "hard", "tags": ["æ€§èƒ½"], "question": "ä¼˜åŒ–JS-Wasmäº¤äº’æ€§èƒ½ï¼Ÿ", "options": ["å‡å°‘è·¨ç•Œè°ƒç”¨", "æ‰¹é‡å¤„ç†æ•°æ®", "ä½¿ç”¨TypedArray", "é¢‘ç¹è°ƒç”¨å°å‡½æ•°", "å…±äº«å†…å­˜", "å†…è”Wasmå‡½æ•°"], "correctAnswer": ["A", "B", "C", "E"], "explanation": {"title": "æ€§èƒ½ä¼˜åŒ–", "code": "// 1. æ‰¹é‡å¤„ç†\n// âŒ é¢‘ç¹è°ƒç”¨\nfor (let i = 0; i < 1000000; i++) {\n  wasmProcess(i);  // 100ä¸‡æ¬¡è·¨ç•Œ\n}\n\n// âœ… æ‰¹é‡å¤„ç†\nconst data = new Int32Array(1000000);\nwasmProcessBatch(data.byteOffset, data.length);  // 1æ¬¡è·¨ç•Œ\n\n// 2. å…±äº«å†…å­˜\nconst memory = new WebAssembly.Memory({ initial: 10 });\nconst view = new Float32Array(memory.buffer);\n\n// ä¼ é€’æ•°æ®åˆ°Wasm\nview.set(jsData);\nwasmProcess();  // Wasmç›´æ¥è¯»å–å†…å­˜\n\n// 3. é¿å…é¢‘ç¹è½¬æ¢\n// âŒ\nfor (let i = 0; i < 1000; i++) {\n  const str = numberToString(i);  // å­—ç¬¦ä¸²è½¬æ¢å¼€é”€å¤§\n}\n\n// âœ… åœ¨Wasmä¸­å®Œæˆè½¬æ¢"}},
    {"type": "true-false", "difficulty": "medium", "tags": ["é”™è¯¯å¤„ç†"], "question": "Wasmå¯ä»¥æŠ›å‡ºJavaScriptå¼‚å¸¸", "correctAnswer": "B", "explanation": {"title": "é”™è¯¯å¤„ç†", "code": "// Wasmä¸èƒ½ç›´æ¥æŠ›å‡ºJSå¼‚å¸¸\n// åªèƒ½é€šè¿‡è¿”å›å€¼ä¼ é€’é”™è¯¯\n\n// Cä»£ç \nint divide(int a, int b) {\n  if (b == 0) return -1;  // é”™è¯¯ç \n  return a / b;\n}\n\n// JSè°ƒç”¨\nconst result = instance.exports.divide(10, 0);\nif (result === -1) {\n  throw new Error('Division by zero');\n}\n\n// æˆ–é€šè¿‡å›è°ƒ\nconst importObject = {\n  env: {\n    throwError: (code) => {\n      throw new Error(`Wasm error: ${code}`);\n    }\n  }\n};\n\n// Cä»£ç è°ƒç”¨JSæŠ›å‡ºå¼‚å¸¸\nif (error) throwError(1);"}},
    {"type": "code-completion", "difficulty": "hard", "tags": ["å¯¼å…¥å¯¼å‡º"], "question": "å¯¼å…¥JSå‡½æ•°åˆ°Wasmï¼Œç©ºç™½å¤„å¡«ä»€ä¹ˆï¼Ÿ", "code": "const importObject = {\n  ______: {\n    log: console.log,\n    random: Math.random\n  }\n};\nconst instance = await WebAssembly.instantiate(buffer, importObject);", "options": ["env", "imports", "js", "functions"], "correctAnswer": "A", "explanation": {"title": "å¯¼å…¥å¯¹è±¡", "code": "// æ ‡å‡†å‘½åç©ºé—´ï¼šenv\nconst importObject = {\n  env: {\n    log: (x) => console.log(x),\n    abort: () => { throw new Error('Aborted'); },\n    memory: new WebAssembly.Memory({ initial: 1 }),\n    table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n  }\n};\n\n// å¤šä¸ªå‘½åç©ºé—´\nconst importObject2 = {\n  env: { log: console.log },\n  math: { sqrt: Math.sqrt },\n  custom: { myFunc: () => {} }\n};\n\n// Cå£°æ˜å¯¼å…¥\nextern void log(int x);\nextern double sqrt(double x);\n\n// ä½¿ç”¨\nlog(42);\ndouble result = sqrt(16.0);"}},
    {"type": "multiple-choice", "difficulty": "hard", "tags": ["æœ€ä½³å®è·µ"], "question": "Wasm-JSäº’æ“ä½œæœ€ä½³å®è·µï¼Ÿ", "options": ["æœ€å°åŒ–æ¥å£", "ä½¿ç”¨TypedArrayä¼ é€’æ•°æ®", "æ‰¹é‡æ“ä½œ", "æ‰€æœ‰é€»è¾‘éƒ½ç”¨Wasm", "æ–‡æ¡£åŒ–æ¥å£", "é”™è¯¯å¤„ç†"], "correctAnswer": ["A", "B", "C", "E", "F"], "explanation": {"title": "æœ€ä½³å®è·µ", "code": "// 1. æœ€å°åŒ–æ¥å£\n// âœ… è®¾è®¡æ¸…æ™°çš„API\nmodule.exports = {\n  init: (config) => {},\n  process: (data) => {},\n  destroy: () => {}\n};\n\n// 2. TypedArray\n// âœ… é«˜æ•ˆæ•°æ®ä¼ é€’\nconst input = new Float32Array(data);\nconst output = instance.exports.process(\n  input.byteOffset,\n  input.length\n);\n\n// 3. æ‰¹é‡æ“ä½œ\nconst results = instance.exports.processBatch(\n  dataPtr,\n  count\n);\n\n// 4. æ–‡æ¡£åŒ–\n/**\n * @param {number} ptr - æ•°æ®æŒ‡é’ˆ\n * @param {number} len - æ•°æ®é•¿åº¦\n * @returns {number} ç»“æœæŒ‡é’ˆ\n */\nexports.process(ptr, len);\n\n// 5. é”™è¯¯å¤„ç†\nconst result = instance.exports.divide(a, b);\nif (result === -1) {\n  throw new Error('Division by zero');\n}"}},
    {"type": "code-output", "difficulty": "hard", "tags": ["å†…å­˜å¸ƒå±€"], "question": "å…±äº«å†…å­˜çš„å¸ƒå±€ï¼Ÿ", "code": "const memory = new WebAssembly.Memory({ initial: 1 });\nconst u8 = new Uint8Array(memory.buffer);\nconst u32 = new Uint32Array(memory.buffer);\n\nu32[0] = 0x12345678;\nconsole.log(u8[0].toString(16));", "options": ["78ï¼ˆå°ç«¯åºï¼‰", "12ï¼ˆå¤§ç«¯åºï¼‰", "56", "34"], "correctAnswer": "A", "explanation": {"title": "å­—èŠ‚åº", "code": "// WebAssemblyä½¿ç”¨å°ç«¯åºï¼ˆLittle Endianï¼‰\n\nconst memory = new WebAssembly.Memory({ initial: 1 });\nconst u8 = new Uint8Array(memory.buffer);\nconst u32 = new Uint32Array(memory.buffer);\n\n// å†™å…¥0x12345678\nu32[0] = 0x12345678;\n\n// å°ç«¯åºå†…å­˜å¸ƒå±€ï¼š\n// åœ°å€ 0: 0x78\n// åœ°å€ 1: 0x56\n// åœ°å€ 2: 0x34\n// åœ°å€ 3: 0x12\n\nconsole.log(u8[0].toString(16));  // '78'\nconsole.log(u8[1].toString(16));  // '56'\nconsole.log(u8[2].toString(16));  // '34'\nconsole.log(u8[3].toString(16));  // '12'\n\n// DataViewå¯ä»¥æŒ‡å®šå­—èŠ‚åº\nconst dv = new DataView(memory.buffer);\ndv.setUint32(0, 0x12345678, false);  // å¤§ç«¯åº\nconsole.log(u8[0].toString(16));  // '12'"}}}
  ],
  "navigation": {
    "prev": {"title": "WebAssemblyåŸºç¡€", "url": "26-01-wasm-basics.html"},
    "next": {"title": "Wasmå·¥å…·é“¾", "url": "26-03-wasm-toolchain.html"}
  }
};
