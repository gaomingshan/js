<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ES6 æ¨¡å—ç³»ç»Ÿ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>ES6 æ¨¡å—ç³»ç»Ÿ</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>ES6 æ¨¡å—ï¼ˆES Modules, ESMï¼‰æ˜¯ JavaScript å®˜æ–¹çš„æ ‡å‡†æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨ import å’Œ export å…³é”®å­—ï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®šæ¨¡å—ä¾èµ–å…³ç³»ã€‚</p>
            
            <h2>ä¸€ã€å¯¼å‡ºï¼ˆExportï¼‰</h2>
            
            <h3>1.1 å‘½åå¯¼å‡º</h3>
            <pre><code>// å¯¼å‡ºå˜é‡
export const name = 'Alice';
export let age = 25;

// å¯¼å‡ºå‡½æ•°
export function greet() {
    return 'Hello';
}

// å¯¼å‡ºç±»
export class User {
    constructor(name) {
        this.name = name;
    }
}

// æ‰¹é‡å¯¼å‡º
const x = 10;
const y = 20;
function add() {}
export { x, y, add };</code></pre>
            
            <h3>1.2 é»˜è®¤å¯¼å‡º</h3>
            <pre><code>// é»˜è®¤å¯¼å‡ºï¼ˆä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªï¼‰
export default function() {
    console.log('Default export');
}

// æˆ–
function main() {
    console.log('Main function');
}
export default main;

// æˆ–å¯¼å‡ºå€¼
export default 42;

// æˆ–å¯¼å‡ºå¯¹è±¡
export default {
    name: 'Alice',
    age: 25
};</code></pre>
            
            <h3>1.3 é‡å‘½åå¯¼å‡º</h3>
            <pre><code>const privateVar = 'value';
function internalFunc() {}

// é‡å‘½åå¯¼å‡º
export {
    privateVar as publicVar,
    internalFunc as publicFunc
};</code></pre>
            
            <h2>äºŒã€å¯¼å…¥ï¼ˆImportï¼‰</h2>
            
            <h3>2.1 å‘½åå¯¼å…¥</h3>
            <pre><code>// å¯¼å…¥å‘½åå¯¼å‡º
import { name, age } from './user.js';

// é‡å‘½åå¯¼å…¥
import { name as userName, age as userAge } from './user.js';

// å¯¼å…¥æ‰€æœ‰å‘½åå¯¼å‡º
import * as user from './user.js';
console.log(user.name, user.age);</code></pre>
            
            <h3>2.2 é»˜è®¤å¯¼å…¥</h3>
            <pre><code>// å¯¼å…¥é»˜è®¤å¯¼å‡ºï¼ˆå¯ä»¥ä»»æ„å‘½åï¼‰
import myFunction from './module.js';
import User from './User.js';</code></pre>
            
            <h3>2.3 æ··åˆå¯¼å…¥</h3>
            <pre><code>// åŒæ—¶å¯¼å…¥é»˜è®¤å’Œå‘½åå¯¼å‡º
import React, { useState, useEffect } from 'react';
import Vue, { ref, reactive } from 'vue';</code></pre>
            
            <h3>2.4 ä»…æ‰§è¡Œæ¨¡å—</h3>
            <pre><code>// ä¸å¯¼å…¥ä»»ä½•å†…å®¹ï¼Œä»…æ‰§è¡Œæ¨¡å—ä»£ç 
import './polyfill.js';
import './styles.css';</code></pre>
            
            <h2>ä¸‰ã€åŠ¨æ€å¯¼å…¥</h2>
            
            <h3>3.1 import() å‡½æ•°</h3>
            <pre><code>// åŠ¨æ€å¯¼å…¥è¿”å› Promise
import('./module.js')
    .then(module => {
        module.default();
        console.log(module.name);
    });

// ä½¿ç”¨ async/await
async function loadModule() {
    const module = await import('./module.js');
    module.default();
}

// æ¡ä»¶åŠ è½½
if (condition) {
    const module = await import('./heavy-module.js');
    module.init();
}</code></pre>
            
            <h3>3.2 æŒ‰éœ€åŠ è½½</h3>
            <pre><code>// è·¯ç”±æ‡’åŠ è½½
const routes = [
    {
        path: '/home',
        component: () => import('./views/Home.js')
    },
    {
        path: '/about',
        component: () => import('./views/About.js')
    }
];

// åŠŸèƒ½æ‡’åŠ è½½
button.addEventListener('click', async () => {
    const { default: Chart } = await import('./chart.js');
    new Chart('#container');
});</code></pre>
            
            <h2>å››ã€æ¨¡å—ç‰¹æ€§</h2>
            
            <h3>4.1 é™æ€ç»“æ„</h3>
            <div class="info">
                <ul>
                    <li><strong>ç¼–è¯‘æ—¶ç¡®å®š</strong>ï¼šä¾èµ–å…³ç³»åœ¨ç¼–è¯‘æ—¶åˆ†æ</li>
                    <li><strong>Tree Shaking</strong>ï¼šå¯ä»¥è¿›è¡Œæ­»ä»£ç æ¶ˆé™¤</li>
                    <li><strong>å¾ªç¯ä¾èµ–</strong>ï¼šå¯ä»¥å¤„ç†å¾ªç¯ä¾èµ–</li>
                    <li><strong>é¡¶å±‚ this</strong>ï¼šæ¨¡å—é¡¶å±‚ this æ˜¯ undefined</li>
                </ul>
            </div>
            
            <h3>4.2 è‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼</h3>
            <pre><code>// ES6 æ¨¡å—è‡ªåŠ¨å¼€å¯ä¸¥æ ¼æ¨¡å¼
// 'use strict'; // ä¸éœ€è¦æ˜¾å¼å£°æ˜

// ä¸¥æ ¼æ¨¡å¼ç‰¹æ€§è‡ªåŠ¨ç”Ÿæ•ˆ
undeclaredVar = 10; // ReferenceError</code></pre>
            
            <h3>4.3 å•ä¾‹æ¨¡å¼</h3>
            <pre><code>// æ¨¡å—åªæ‰§è¡Œä¸€æ¬¡
// counter.js
let count = 0;
export function increment() {
    return ++count;
}

// a.js
import { increment } from './counter.js';
console.log(increment()); // 1

// b.js
import { increment } from './counter.js';
console.log(increment()); // 2ï¼ˆå…±äº«çŠ¶æ€ï¼‰</code></pre>
            
            <h2>äº”ã€æ¨¡å—è·¯å¾„</h2>
            
            <h3>5.1 ç›¸å¯¹è·¯å¾„</h3>
            <pre><code>// ç›¸å¯¹è·¯å¾„
import utils from './utils.js';
import config from '../config.js';
import api from '../../api/index.js';</code></pre>
            
            <h3>5.2 ç»å¯¹è·¯å¾„</h3>
            <pre><code>// URL è·¯å¾„
import lodash from 'https://cdn.example.com/lodash.js';

// æ–‡ä»¶è·¯å¾„ï¼ˆNode.jsï¼‰
import fs from 'file:///path/to/module.js';</code></pre>
            
            <h3>5.3 è£¸æ¨¡å—æ ‡è¯†ç¬¦</h3>
            <pre><code>// npm åŒ…ï¼ˆéœ€è¦æ„å»ºå·¥å…·æ”¯æŒï¼‰
import React from 'react';
import _ from 'lodash';
import { createApp } from 'vue';</code></pre>
            
            <h2>å…­ã€é‡å¯¼å‡º</h2>
            
            <h3>6.1 è½¬å‘å¯¼å‡º</h3>
            <pre><code>// å¯¼å‡ºå…¶ä»–æ¨¡å—çš„å†…å®¹
export { name, age } from './user.js';

// é‡å‘½åå¯¼å‡º
export { name as userName } from './user.js';

// å¯¼å‡ºæ‰€æœ‰
export * from './user.js';

// å¯¼å‡ºæ‰€æœ‰ä¸ºå‘½åç©ºé—´
export * as user from './user.js';</code></pre>
            
            <h3>6.2 èšåˆå¯¼å‡º</h3>
            <pre><code>// index.js - èšåˆå¯¼å‡º
export { User } from './User.js';
export { Product } from './Product.js';
export { Order } from './Order.js';

// ä½¿ç”¨
import { User, Product, Order } from './models/index.js';</code></pre>
            
            <h2>ä¸ƒã€å®ç”¨æ¨¡å¼</h2>
            
            <h3>7.1 å‘½åç©ºé—´æ¨¡å¼</h3>
            <pre><code>// utils.js
export const string = {
    capitalize(str) {},
    trim(str) {}
};

export const array = {
    unique(arr) {},
    flatten(arr) {}
};

// ä½¿ç”¨
import * as utils from './utils.js';
utils.string.capitalize('hello');
utils.array.unique([1, 2, 2, 3]);</code></pre>
            
            <h3>7.2 é…ç½®æ¨¡å—</h3>
            <pre><code>// config.js
export const config = {
    apiUrl: 'https://api.example.com',
    timeout: 5000,
    debug: true
};

// ä½¿ç”¨
import { config } from './config.js';
console.log(config.apiUrl);</code></pre>
            
            <h3>7.3 å•ä¾‹æœåŠ¡</h3>
            <pre><code>// logger.js
class Logger {
    constructor() {
        this.logs = [];
    }
    
    log(message) {
        this.logs.push({ message, time: Date.now() });
        console.log(message);
    }
}

// å¯¼å‡ºå•ä¾‹
export default new Logger();

// ä½¿ç”¨
import logger from './logger.js';
logger.log('Message');</code></pre>
            
            <h2>å…«ã€æµè§ˆå™¨ä¸­ä½¿ç”¨</h2>
            
            <h3>8.1 script type="module"</h3>
            <pre><code>&lt;!-- HTML ä¸­ä½¿ç”¨ --&gt;
&lt;script type="module"&gt;
  import { greet } from './utils.js';
  greet();
&lt;/script&gt;

&lt;!-- å¤–éƒ¨æ¨¡å— --&gt;
&lt;script type="module" src="./main.js"&gt;&lt;/script&gt;</code></pre>
            
            <h3>8.2 ç‰¹æ€§</h3>
            <div class="info">
                <ul>
                    <li><strong>defer è¡Œä¸º</strong>ï¼šè‡ªåŠ¨å»¶è¿Ÿæ‰§è¡Œ</li>
                    <li><strong>CORS</strong>ï¼šè·¨åŸŸéœ€è¦ CORS æ”¯æŒ</li>
                    <li><strong>ä¸¥æ ¼æ¨¡å¼</strong>ï¼šè‡ªåŠ¨å¼€å¯</li>
                    <li><strong>ä½œç”¨åŸŸ</strong>ï¼šç‹¬ç«‹ä½œç”¨åŸŸ</li>
                </ul>
            </div>
            
            <h2>ä¹ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>æ–‡ä»¶æ‰©å±•å</strong>ï¼šä½¿ç”¨ .js æˆ– .mjs</li>
                    <li><strong>ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªèŒè´£</strong>ï¼šä¿æŒæ¨¡å—å•ä¸€èŒè´£</li>
                    <li><strong>ä¼˜å…ˆå‘½åå¯¼å‡º</strong>ï¼šä¾¿äº Tree Shaking</li>
                    <li><strong>é¿å…å¾ªç¯ä¾èµ–</strong>ï¼šé‡æ„æ¨¡å—ç»“æ„</li>
                    <li><strong>ä½¿ç”¨ index.js</strong>ï¼šèšåˆå¯¼å‡º</li>
                    <li><strong>åŠ¨æ€å¯¼å…¥</strong>ï¼šæŒ‰éœ€åŠ è½½å¤§æ¨¡å—</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-modules" target="_blank">ECMAScript - Modules</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules" target="_blank">MDN - JavaScript Modules</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="11-fetch.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šFetch API</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="12-commonjs.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šCommonJS</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šå¯¼å‡ºè¯­æ³•</h3>
                <div class="code-block">
                    <pre><code>// ES6 æ¨¡å—å¯¼å‡ºæ¼”ç¤º
console.log('=== Export è¯­æ³• ===\n');

console.log('1. å‘½åå¯¼å‡º:');
console.log('   export const name = "Alice";');
console.log('   export function greet() {}');
console.log('   export class User {}');

console.log('\n2. æ‰¹é‡å¯¼å‡º:');
console.log('   const x = 10, y = 20;');
console.log('   export { x, y };');

console.log('\n3. é‡å‘½åå¯¼å‡º:');
console.log('   export { x as publicX };');

console.log('\n4. é»˜è®¤å¯¼å‡º:');
console.log('   export default function() {}');
console.log('   export default class User {}');

console.log('\n5. é‡å¯¼å‡º:');
console.log('   export { name } from "./user.js";');
console.log('   export * from "./utils.js";');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šå¯¼å…¥è¯­æ³•</h3>
                <div class="code-block">
                    <pre><code>// ES6 æ¨¡å—å¯¼å…¥æ¼”ç¤º
console.log('=== Import è¯­æ³• ===\n');

console.log('1. å‘½åå¯¼å…¥:');
console.log('   import { name, age } from "./user.js";');

console.log('\n2. é‡å‘½åå¯¼å…¥:');
console.log('   import { name as userName } from "./user.js";');

console.log('\n3. å‘½åç©ºé—´å¯¼å…¥:');
console.log('   import * as user from "./user.js";');
console.log('   user.name, user.age');

console.log('\n4. é»˜è®¤å¯¼å…¥:');
console.log('   import User from "./User.js";');

console.log('\n5. æ··åˆå¯¼å…¥:');
console.log('   import React, { useState } from "react";');

console.log('\n6. ä»…æ‰§è¡Œ:');
console.log('   import "./polyfill.js";');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šåŠ¨æ€å¯¼å…¥</h3>
                <div class="code-block">
                    <pre><code>// åŠ¨æ€å¯¼å…¥æ¼”ç¤ºï¼ˆæ¨¡æ‹Ÿï¼‰
console.log('=== åŠ¨æ€å¯¼å…¥ ===\n');

// æ¨¡æ‹Ÿæ¨¡å—å†…å®¹
const mockModule = {
    default: function() {
        console.log('  é»˜è®¤å¯¼å‡ºå‡½æ•°è¢«è°ƒç”¨');
    },
    name: 'MockModule',
    version: '1.0.0'
};

// æ¨¡æ‹ŸåŠ¨æ€å¯¼å…¥
function simulateImport(path) {
    console.log(`åŠ¨æ€åŠ è½½: ${path}`);
    return Promise.resolve(mockModule);
}

// ä½¿ç”¨ Promise
console.log('æ–¹å¼1: Promise.then()');
simulateImport('./module.js')
    .then(module => {
        console.log('  æ¨¡å—å·²åŠ è½½');
        console.log('  name:', module.name);
        console.log('  version:', module.version);
        module.default();
    });

// ä½¿ç”¨ async/await
setTimeout(async () => {
    console.log('\næ–¹å¼2: async/await');
    const module = await simulateImport('./module.js');
    console.log('  æ¨¡å—å·²åŠ è½½');
    console.log('  name:', module.name);
}, 100);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šæ¨¡å—å•ä¾‹</h3>
                <div class="code-block">
                    <pre><code>// æ¨¡æ‹Ÿ ES6 æ¨¡å—çš„å•ä¾‹ç‰¹æ€§
console.log('=== æ¨¡å—å•ä¾‹ ===\n');

// æ¨¡æ‹Ÿ counter.js æ¨¡å—
const counterModule = (() => {
    let count = 0;
    
    return {
        increment() {
            return ++count;
        },
        getCount() {
            return count;
        }
    };
})();

console.log('æ¨¡å—ç‰¹æ€§: åªæ‰§è¡Œä¸€æ¬¡ï¼Œå…±äº«çŠ¶æ€\n');

// æ¨¡æ‹Ÿåœ¨ a.js ä¸­å¯¼å…¥
console.log('a.js å¯¼å…¥å¹¶è°ƒç”¨:');
console.log('  increment():', counterModule.increment());
console.log('  increment():', counterModule.increment());

// æ¨¡æ‹Ÿåœ¨ b.js ä¸­å¯¼å…¥ï¼ˆå…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼‰
console.log('\nb.js å¯¼å…¥å¹¶è°ƒç”¨ï¼ˆå…±äº«çŠ¶æ€ï¼‰:');
console.log('  increment():', counterModule.increment());
console.log('  getCount():', counterModule.getCount());</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šå‘½åç©ºé—´æ¨¡å¼</h3>
                <div class="code-block">
                    <pre><code>// å‘½åç©ºé—´æ¨¡å¼
console.log('=== å‘½åç©ºé—´æ¨¡å¼ ===\n');

// æ¨¡æ‹Ÿ utils æ¨¡å—
const utils = {
    string: {
        capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        },
        reverse(str) {
            return str.split('').reverse().join('');
        }
    },
    
    array: {
        unique(arr) {
            return [...new Set(arr)];
        },
        flatten(arr) {
            return arr.flat(Infinity);
        }
    },
    
    number: {
        random(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
    }
};

// ä½¿ç”¨
console.log('string.capitalize("hello"):', 
    utils.string.capitalize('hello'));

console.log('string.reverse("hello"):', 
    utils.string.reverse('hello'));

console.log('array.unique([1,2,2,3]):', 
    utils.array.unique([1, 2, 2, 3]));

console.log('array.flatten([[1,[2,3]]]):', 
    utils.array.flatten([[1, [2, 3]]]));

console.log('number.random(1, 10):', 
    utils.number.random(1, 10));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šå•ä¾‹æœåŠ¡æ¨¡å¼</h3>
                <div class="code-block">
                    <pre><code>// å•ä¾‹æœåŠ¡æ¨¡å¼
console.log('=== å•ä¾‹æœåŠ¡ ===\n');

// Logger å•ä¾‹
class Logger {
    constructor() {
        this.logs = [];
        console.log('Logger å®ä¾‹å·²åˆ›å»º');
    }
    
    log(level, message) {
        const entry = {
            level,
            message,
            time: new Date().toISOString()
        };
        this.logs.push(entry);
        console.log(`[${level}] ${message}`);
    }
    
    getLogs() {
        return this.logs;
    }
}

// å¯¼å‡ºå•ä¾‹å®ä¾‹
const logger = new Logger();

// åœ¨ä¸åŒåœ°æ–¹ä½¿ç”¨ï¼ˆå…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼‰
console.log('\næ¨¡å— A ä½¿ç”¨:');
logger.log('INFO', 'åº”ç”¨å¯åŠ¨');
logger.log('DEBUG', 'åˆå§‹åŒ–é…ç½®');

console.log('\næ¨¡å— B ä½¿ç”¨:');
logger.log('WARN', 'å†…å­˜ä½¿ç”¨ç‡é«˜');

console.log('\næŸ¥çœ‹æ‰€æœ‰æ—¥å¿—:');
console.log('æ€»æ—¥å¿—æ•°:', logger.getLogs().length);
logger.getLogs().forEach(log => {
    console.log(`  [${log.level}] ${log.message}`);
});</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
