# æ•°æ®ç±»å‹è¯¦è§£

## æ¦‚è¿°

JavaScript æ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼š**å˜é‡æ²¡æœ‰ç±»å‹é™åˆ¶ï¼Œä½†å€¼æœ‰ç±»å‹**ã€‚

æŒæ¡æ•°æ®ç±»å‹çš„å…³é”®ä¸åœ¨â€œèƒŒè¯µåˆ†ç±»â€ï¼Œè€Œåœ¨ç†è§£ï¼š

- åŸå§‹å€¼ä¸å¯¹è±¡åœ¨å†…å­˜/æ¯”è¾ƒ/å¤åˆ¶ä¸Šçš„å·®å¼‚
- `Number` çš„ IEEE 754 ç²¾åº¦ä¸å®‰å…¨æ•´æ•°
- `typeof` çš„å±€é™ä¸æ›´å¯é çš„ç±»å‹åˆ¤æ–­ç­–ç•¥

---

## ä¸€ã€æ•°æ®ç±»å‹åˆ†ç±»

### 1.1 åŸå§‹ç±»å‹ï¼ˆPrimitive Typesï¼‰

- `Number`
- `String`
- `Boolean`
- `Null`
- `Undefined`
- `Symbol`ï¼ˆES6ï¼‰
- `BigInt`ï¼ˆES2020ï¼‰

### 1.2 å¼•ç”¨ç±»å‹ï¼ˆObjectsï¼‰

- `Object` / `Array` / `Function` / `Date` / `RegExp` ...

> **å…³é”®ç‚¹**
>
> åŸå§‹å€¼ï¼šä¸å¯å˜ã€æŒ‰å€¼è¯­ä¹‰ã€‚
>
> å¯¹è±¡ï¼šå¯å˜ã€æŒ‰å¼•ç”¨è¯­ä¹‰ï¼ˆæ›´å‡†ç¡®è¯´æ˜¯â€œå…±äº«å¼•ç”¨ä¼ é€’â€ï¼‰ã€‚

---

## äºŒã€Numberï¼šæµ®ç‚¹æ•°æ¨¡å‹ä¸é™·é˜±

### 2.1 IEEE 754 åŒç²¾åº¦ï¼ˆ64 ä½ï¼‰

JavaScript çš„æ‰€æœ‰ `Number` éƒ½æ˜¯åŒç²¾åº¦æµ®ç‚¹ï¼š

- 1 ä½ç¬¦å·ä½
- 11 ä½æŒ‡æ•°
- 52 ä½å°¾æ•°

### 2.2 ç²¾åº¦é—®é¢˜

```js
0.1 + 0.2 === 0.3; // false
```

> **åŸå› ï¼ˆç²¾ç®€ç‰ˆï¼‰**
>
> 0.1 ä¸ 0.2 åœ¨äºŒè¿›åˆ¶ä¸­æ˜¯æ— é™å¾ªç¯å°æ•°ï¼Œåªèƒ½è¿‘ä¼¼å­˜å‚¨ã€‚

### 2.3 å®‰å…¨æ•´æ•°

```js
Number.MAX_SAFE_INTEGER; // 2^53 - 1
```

è¶…è¿‡å®‰å…¨æ•´æ•°èŒƒå›´æ—¶ï¼Œæ•´æ•°å°†æ— æ³•ç²¾ç¡®è¡¨ç¤ºã€‚

---

## ä¸‰ã€BigIntï¼šå¤§æ•´æ•°

BigInt ç”¨äºè¡¨ç¤ºä»»æ„ç²¾åº¦æ•´æ•°ï¼š

```js
const n = 9007199254740993n;
```

> **æ³¨æ„**
>
> - `BigInt` ä¸èƒ½ä¸ `Number` æ··åˆè¿ç®—ï¼Œéœ€æ˜¾å¼è½¬æ¢ã€‚

---

## å››ã€Stringï¼šä¸å¯å˜ä¸ç¼–ç 

### 4.1 ä¸å¯å˜ï¼ˆImmutableï¼‰

å­—ç¬¦ä¸²çš„â€œä¿®æ”¹â€ä¼šåˆ›å»ºæ–°å­—ç¬¦ä¸²ã€‚

### 4.2 UTF-16 ä¸ length çš„è¯¯åŒº

- JS å­—ç¬¦ä¸²ä»¥ UTF-16 ç å…ƒå­˜å‚¨
- æŸäº›å­—ç¬¦ï¼ˆå¦‚ emojiï¼‰å¯èƒ½å ç”¨ 2 ä¸ªç å…ƒ

```js
'ğŸ˜Š'.length; // 2
```

éå†â€œå­—ç¬¦â€æ›´å¯é çš„æ–¹å¼ï¼š

```js
for (const ch of 'ğŸ˜Ša') {
  console.log(ch);
}
```

---

## äº”ã€Booleanï¼šçœŸå€¼ä¸å‡å€¼

**Falsy** åªæœ‰ä»¥ä¸‹å‡ ä¸ªï¼š

- `false`
- `0`ã€`-0`
- `0n`
- `''`ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰
- `null`
- `undefined`
- `NaN`

å…¶ä½™å…¨éƒ¨ä¸º Truthyï¼ˆåŒ…æ‹¬ `[]`ã€`{}`ã€`'false'`ï¼‰ã€‚

---

## å…­ã€null vs undefined

- `undefined`ï¼šé€šå¸¸è¡¨ç¤ºâ€œæœªèµ‹å€¼/ä¸å­˜åœ¨â€
- `null`ï¼šé€šå¸¸è¡¨ç¤ºâ€œæ˜¾å¼çš„ç©ºâ€

```js
typeof null; // "object"ï¼ˆå†å²é—ç•™ï¼‰
```

---

## ä¸ƒã€Symbolï¼šå”¯ä¸€æ ‡è¯†ä¸å…ƒç¼–ç¨‹å…¥å£

- æ¯ä¸ª Symbol éƒ½æ˜¯å”¯ä¸€çš„
- å¸¸ç”¨ä½œå¯¹è±¡çš„â€œéå†²çªé”®â€
- ä¸ Well-known symbolsï¼ˆå¦‚ `Symbol.iterator`ï¼‰ä¸€èµ·æ„æˆå…ƒç¼–ç¨‹èƒ½åŠ›

```js
const key = Symbol('id');
const obj = { [key]: 1 };
```

---

## å…«ã€ç±»å‹åˆ¤æ–­ï¼šä¸è¦åªé  typeof

### 8.1 `typeof` çš„ä¼˜ç¼ºç‚¹

```js
typeof null; // "object"
typeof [];   // "object"
```

### 8.2 æ›´å¯é çš„ç­–ç•¥

- `Array.isArray(value)`ï¼šåˆ¤æ–­æ•°ç»„
- `value instanceof Ctor`ï¼šåŸºäºåŸå‹é“¾ï¼ˆè·¨ iframe å¯èƒ½å¤±æ•ˆï¼‰
- `Object.prototype.toString.call(value)`ï¼šè¾ƒç²¾ç¡®

```js
function getType(value) {
  return Object.prototype.toString.call(value).slice(8, -1);
}

getType(null); // "Null"
getType([]);   // "Array"
```

> **æ·±å…¥ä¸€ç‚¹**
>
> `Object.prototype.toString` ä¼šè¯»å–å¯¹è±¡çš„å†…éƒ¨æ ‡ç­¾/`Symbol.toStringTag`ï¼Œå› æ­¤æ¯” `typeof` æ›´ç²¾ç»†ã€‚

---

## ä¹ã€æ·±å…¥åŸç†ï¼šè£…ç®±ï¼ˆboxingï¼‰ä¸â€œåŸå§‹å€¼ä¹Ÿèƒ½è°ƒç”¨æ–¹æ³•â€

```js
'abc'.toUpperCase();
```

åŸå› ï¼šå¼•æ“ä¼šä¸´æ—¶åˆ›å»ºåŒ…è£…å¯¹è±¡ï¼ˆå¦‚ `new String('abc')`ï¼‰ï¼Œå®Œæˆæ–¹æ³•è°ƒç”¨åå†ä¸¢å¼ƒã€‚

> **æç¤º**
>
> è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ `typeof new String('x') === 'object'`ï¼Œä½† `typeof 'x' === 'string'`ã€‚

---

## å‚è€ƒèµ„æ–™

- [MDN - JavaScript data types and data structures](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures)
- [ECMA-262 - ECMAScript Language Types](https://tc39.es/ecma262/#sec-ecmascript-language-types)
