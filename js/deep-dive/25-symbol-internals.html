<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Symbol å†…éƒ¨æ§½ä½ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>Symbol å†…éƒ¨æ§½ä½</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>Symbol æ˜¯ ES6 å¼•å…¥çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œç”¨äºåˆ›å»ºå”¯ä¸€æ ‡è¯†ç¬¦ã€‚ç†è§£ Symbol çš„å†…éƒ¨å®ç°æœ‰åŠ©äºæ›´å¥½åœ°ä½¿ç”¨å®ƒã€‚</p>
            
            <h2>ä¸€ã€Symbol åŸºç¡€</h2>
            
            <h3>1.1 åˆ›å»ºä¸ç‰¹æ€§</h3>
            <pre><code>// æ¯ä¸ª Symbol éƒ½æ˜¯å”¯ä¸€çš„
const sym1 = Symbol();
const sym2 = Symbol();
console.log(sym1 === sym2);  // false

// å¸¦æè¿°
const sym = Symbol('mySymbol');
console.log(sym.description);  // "mySymbol"

// Symbol ä¸èƒ½ä½¿ç”¨ new
const sym = new Symbol();  // âŒ TypeError</code></pre>
            
            <h3>1.2 å…¨å±€æ³¨å†Œè¡¨</h3>
            <pre><code>// Symbol.for() - å…¨å±€å…±äº«
const sym1 = Symbol.for('app.id');
const sym2 = Symbol.for('app.id');
console.log(sym1 === sym2);  // true

// Symbol.keyFor() - è·å– key
console.log(Symbol.keyFor(sym1));  // "app.id"</code></pre>
            
            <h2>äºŒã€å†…éƒ¨æ§½ä½</h2>
            
            <h3>2.1 [[Description]]</h3>
            <pre><code>// Symbol çš„æè¿°ä¿¡æ¯
const sym = Symbol('test');

// å†…éƒ¨æ§½ä½ï¼š
// [[Description]]: "test"
// [[SymbolData]]: å”¯ä¸€æ ‡è¯†ç¬¦

console.log(sym.description);  // è®¿é—® [[Description]]</code></pre>
            
            <h3>2.2 Symbol æ³¨å†Œè¡¨</h3>
            <pre><code>// å…¨å±€ Symbol æ³¨å†Œè¡¨ç»“æ„ï¼ˆç®€åŒ–ï¼‰
GlobalSymbolRegistry = Map {
    "app.id" => Symbol(app.id),
    "shared.key" => Symbol(shared.key)
}

// Symbol.for() å®ç°ï¼ˆä¼ªä»£ç ï¼‰
function SymbolFor(key) {
    const stringKey = ToString(key);
    if (GlobalSymbolRegistry.has(stringKey)) {
        return GlobalSymbolRegistry.get(stringKey);
    }
    const newSymbol = Symbol(stringKey);
    GlobalSymbolRegistry.set(stringKey, newSymbol);
    return newSymbol;
}</code></pre>
            
            <h2>ä¸‰ã€Symbol ä½œä¸ºå±æ€§é”®</h2>
            
            <h3>3.1 å±æ€§è®¿é—®</h3>
            <pre><code>const sym = Symbol('key');
const obj = { [sym]: 'value' };

// Symbol å±æ€§ä¸å‡ºç°åœ¨ï¼š
// - Object.keys()
// - Object.getOwnPropertyNames()
// - for...in
// - JSON.stringify()

// åªèƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š
console.log(Object.getOwnPropertySymbols(obj));
console.log(Reflect.ownKeys(obj));</code></pre>
            
            <h2>å››ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>ä½¿ç”¨æè¿°</strong>ï¼šä¾¿äºè°ƒè¯•</li>
                    <li><strong>å…¨å±€ Symbol</strong>ï¼šè·¨æ¨¡å—ç”¨ Symbol.for()</li>
                    <li><strong>å…ƒæ•°æ®å­˜å‚¨</strong>ï¼šé¿å…å‘½åå†²çª</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-symbol-objects" target="_blank">ECMAScript - Symbol Objects</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="24-dynamic-import.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šåŠ¨æ€å¯¼å…¥æœºåˆ¶</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="25-well-known-symbols.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šWell-Known Symbols</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šSymbol å”¯ä¸€æ€§</h3>
                <div class="code-block">
                    <pre><code>console.log('=== Symbol å”¯ä¸€æ€§ ===\n');

const sym1 = Symbol('test');
const sym2 = Symbol('test');

console.log('sym1 === sym2:', sym1 === sym2);
console.log('sym1.description:', sym1.description);
console.log('sym2.description:', sym2.description);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šå…¨å±€æ³¨å†Œè¡¨</h3>
                <div class="code-block">
                    <pre><code>console.log('=== å…¨å±€æ³¨å†Œè¡¨ ===\n');

const sym1 = Symbol.for('app.id');
const sym2 = Symbol.for('app.id');

console.log('sym1 === sym2:', sym1 === sym2);
console.log('Symbol.keyFor(sym1):', Symbol.keyFor(sym1));

const local = Symbol('local');
console.log('Symbol.keyFor(local):', Symbol.keyFor(local));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
