<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§æœ‰å­—æ®µå®ç° - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>ç§æœ‰å­—æ®µå®ç°</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>JavaScript æä¾›å¤šç§æ–¹å¼å®ç°ç§æœ‰å­—æ®µï¼Œä» Symbol åˆ°çœŸæ­£çš„ç§æœ‰å­—æ®µï¼ˆ#ï¼‰ã€‚</p>
            
            <h2>ä¸€ã€Symbol æ¨¡æ‹Ÿç§æœ‰</h2>
            
            <h3>1.1 åŸºæœ¬ç”¨æ³•</h3>
            <pre><code>const _private = Symbol('private');

class MyClass {
    constructor() {
        this[_private] = 'private data';
        this.public = 'public data';
    }
    
    getPrivate() {
        return this[_private];
    }
}

const obj = new MyClass();
console.log(obj.public);        // "public data"
console.log(obj.getPrivate());  // "private data"

// ä½†å¯ä»¥é€šè¿‡åå°„è®¿é—®
const symbols = Object.getOwnPropertySymbols(obj);
console.log(obj[symbols[0]]);   // "private data"</code></pre>
            
            <h2>äºŒã€çœŸæ­£çš„ç§æœ‰å­—æ®µ</h2>
            
            <h3>2.1 # è¯­æ³•</h3>
            <pre><code>class MyClass {
    #privateField = 'private';
    publicField = 'public';
    
    #privateMethod() {
        return 'private method';
    }
    
    getPrivate() {
        return this.#privateField;
    }
}

const obj = new MyClass();
console.log(obj.publicField);   // "public"
console.log(obj.getPrivate());  // "private"
console.log(obj.#privateField); // âŒ SyntaxError</code></pre>
            
            <h3>2.2 é™æ€ç§æœ‰</h3>
            <pre><code>class MyClass {
    static #privateStatic = 'static private';
    
    static getPrivate() {
        return MyClass.#privateStatic;
    }
}

console.log(MyClass.getPrivate());  // "static private"</code></pre>
            
            <h2>ä¸‰ã€WeakMap æ–¹æ¡ˆ</h2>
            
            <pre><code>const privateData = new WeakMap();

class MyClass {
    constructor() {
        privateData.set(this, {
            secret: 'private data'
        });
    }
    
    getSecret() {
        return privateData.get(this).secret;
    }
}

const obj = new MyClass();
console.log(obj.getSecret());  // "private data"</code></pre>
            
            <h2>å››ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>ä¼˜å…ˆä½¿ç”¨ # ç§æœ‰å­—æ®µ</strong></li>
                    <li><strong>Symbol é€‚åˆå…ƒæ•°æ®</strong></li>
                    <li><strong>WeakMap é€‚åˆå¤–éƒ¨å­˜å‚¨</strong></li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/proposal-class-fields/" target="_blank">TC39 - Class Fields</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="25-well-known-symbols.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šWell-Known Symbols</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="26-sharedarraybuffer.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šSharedArrayBuffer</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šSymbol æ¨¡æ‹Ÿ</h3>
                <div class="code-block">
                    <pre><code>console.log('=== Symbol æ¨¡æ‹Ÿç§æœ‰ ===\n');

const _secret = Symbol('secret');

class User {
    constructor(name, secret) {
        this.name = name;
        this[_secret] = secret;
    }
    
    getSecret() {
        return this[_secret];
    }
}

const user = new User('Alice', 'password');
console.log('name:', user.name);
console.log('secret:', user.getSecret());
console.log('user[_secret]:', user[_secret]);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šWeakMap æ–¹æ¡ˆ</h3>
                <div class="code-block">
                    <pre><code>console.log('=== WeakMap ç§æœ‰ ===\n');

const privateData = new WeakMap();

class User {
    constructor(name, secret) {
        this.name = name;
        privateData.set(this, { secret });
    }
    
    getSecret() {
        return privateData.get(this).secret;
    }
}

const user = new User('Bob', 'password');
console.log('name:', user.name);
console.log('secret:', user.getSecret());</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
