<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†…å­˜åºä¸åŒæ­¥ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>å†…å­˜åºä¸åŒæ­¥</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>ç†è§£å†…å­˜åºå¯¹äºç¼–å†™æ­£ç¡®çš„å¹¶å‘ç¨‹åºè‡³å…³é‡è¦ã€‚</p>
            
            <h2>ä¸€ã€å†…å­˜åºé—®é¢˜</h2>
            
            <pre><code>// æ²¡æœ‰åŒæ­¥å¯èƒ½å¯¼è‡´æ•°æ®ç«äº‰
// Worker 1
sharedArray[0] = 42;
sharedArray[1] = 1;  // æ ‡å¿—ä½

// Worker 2
while (sharedArray[1] !== 1) {}
console.log(sharedArray[0]);  // å¯èƒ½ä¸æ˜¯42ï¼</code></pre>
            
            <h2>äºŒã€ä½¿ç”¨ Atomics åŒæ­¥</h2>
            
            <pre><code>// Worker 1
Atomics.store(sharedArray, 0, 42);
Atomics.store(sharedArray, 1, 1);

// Worker 2
while (Atomics.load(sharedArray, 1) !== 1) {}
console.log(Atomics.load(sharedArray, 0));  // ä¿è¯æ˜¯42</code></pre>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-memory-model" target="_blank">ECMAScript - Memory Model</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="26-atomics.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šAtomics API</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="27-tc39-process.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šTC39 ææ¡ˆæµç¨‹</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ï¼šå†…å­˜åºæ¼”ç¤º</h3>
                <div class="code-block">
                    <pre><code>console.log('=== å†…å­˜åº ===\n');

console.log('æ­£ç¡®çš„åŒæ­¥æ–¹å¼:');
console.log('// Worker 1');
console.log('Atomics.store(arr, 0, 42);');
console.log('Atomics.store(arr, 1, 1);');

console.log('\n// Worker 2');
console.log('while (Atomics.load(arr, 1) !== 1) {}');
console.log('const value = Atomics.load(arr, 0);');

console.log('\nä½¿ç”¨ Atomics ä¿è¯å†…å­˜å¯è§æ€§');</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
