<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡½æ•°åŸºç¡€ - JavaScript æ·±åº¦å­¦ä¹ </title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/page.css">
</head>
<body>
    <div class="page-layout">
        <div class="doc-panel">
            <h1>å‡½æ•°åŸºç¡€</h1>
            
            <h2>æ¦‚è¿°</h2>
            <p>å‡½æ•°æ˜¯ JavaScript çš„ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-class citizenï¼‰ï¼Œå¯ä»¥åƒå…¶ä»–å€¼ä¸€æ ·è¢«ä¼ é€’ã€èµ‹å€¼å’Œè¿”å›ã€‚æŒæ¡å‡½æ•°æ˜¯æ·±å…¥ JavaScript çš„å…³é”®ã€‚</p>
            
            <h2>ä¸€ã€å‡½æ•°å£°æ˜</h2>
            
            <h3>1.1 å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰</h3>
            <pre><code>function greet(name) {
    return `Hello, ${name}!`;
}</code></pre>
            
            <h3>1.2 å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰</h3>
            <pre><code>const greet = function(name) {
    return `Hello, ${name}!`;
};</code></pre>
            
            <h3>1.3 å‘½åå‡½æ•°è¡¨è¾¾å¼</h3>
            <pre><code>const greet = function sayHello(name) {
    return `Hello, ${name}!`;
};
// sayHello åªåœ¨å‡½æ•°å†…éƒ¨å¯è§</code></pre>
            
            <h3>1.4 å‡½æ•°å£°æ˜ vs å‡½æ•°è¡¨è¾¾å¼</h3>
            <table>
                <thead>
                    <tr>
                        <th>ç‰¹æ€§</th>
                        <th>å‡½æ•°å£°æ˜</th>
                        <th>å‡½æ•°è¡¨è¾¾å¼</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æå‡ï¼ˆHoistingï¼‰</td>
                        <td>æ˜¯ï¼ˆæ•´ä½“æå‡ï¼‰</td>
                        <td>å¦ï¼ˆå˜é‡æå‡ï¼‰</td>
                    </tr>
                    <tr>
                        <td>è¯­æ³•ä½ç½®</td>
                        <td>ç‹¬ç«‹è¯­å¥</td>
                        <td>è¡¨è¾¾å¼ä¸­</td>
                    </tr>
                    <tr>
                        <td>åç§°å¿…éœ€</td>
                        <td>æ˜¯</td>
                        <td>å¦ï¼ˆå¯åŒ¿åï¼‰</td>
                    </tr>
                </tbody>
            </table>
            
            <h2>äºŒã€å‡½æ•°å‚æ•°</h2>
            
            <h3>2.1 å½¢å‚ä¸å®å‚</h3>
            <ul>
                <li><strong>å½¢å‚</strong>ï¼ˆParameterï¼‰ï¼šå‡½æ•°å®šä¹‰æ—¶çš„å‚æ•°</li>
                <li><strong>å®å‚</strong>ï¼ˆArgumentï¼‰ï¼šå‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</li>
            </ul>
            
            <h3>2.2 å‚æ•°é»˜è®¤å€¼ï¼ˆES6ï¼‰</h3>
            <pre><code>function greet(name = 'Guest') {
    return `Hello, ${name}!`;
}

greet();        // "Hello, Guest!"
greet('Alice'); // "Hello, Alice!"</code></pre>
            
            <h3>2.3 å‰©ä½™å‚æ•°ï¼ˆRest Parametersï¼‰</h3>
            <pre><code>function sum(...numbers) {
    return numbers.reduce((acc, cur) => acc + cur, 0);
}

sum(1, 2, 3, 4); // 10</code></pre>
            
            <h3>2.4 arguments å¯¹è±¡</h3>
            <p>ç±»æ•°ç»„å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ï¼š</p>
            <pre><code>function oldSum() {
    let total = 0;
    for (let i = 0; i < arguments.length; i++) {
        total += arguments[i];
    }
    return total;
}</code></pre>
            
            <div class="tip">
                ç°ä»£ä»£ç æ¨èä½¿ç”¨å‰©ä½™å‚æ•°è€Œä¸æ˜¯ arguments å¯¹è±¡ã€‚
            </div>
            
            <h2>ä¸‰ã€å‡½æ•°è¿”å›å€¼</h2>
            
            <h3>3.1 return è¯­å¥</h3>
            <pre><code>function add(a, b) {
    return a + b;
}

const result = add(3, 5); // 8</code></pre>
            
            <h3>3.2 éšå¼è¿”å›</h3>
            <ul>
                <li>æ²¡æœ‰ return è¯­å¥æ—¶ï¼Œè¿”å› <code>undefined</code></li>
                <li>ç©ºçš„ return è¯­å¥ä¹Ÿè¿”å› <code>undefined</code></li>
            </ul>
            
            <h3>3.3 æå‰è¿”å›</h3>
            <p>ç”¨äºç®€åŒ–é€»è¾‘å’Œå‡å°‘åµŒå¥—ï¼š</p>
            <pre><code>function process(data) {
    if (!data) return null;
    if (!data.isValid) return null;
    
    // ä¸»è¦é€»è¾‘
    return processedData;
}</code></pre>
            
            <h2>å››ã€å‡½æ•°ä½œç”¨åŸŸ</h2>
            
            <h3>4.1 å±€éƒ¨ä½œç”¨åŸŸ</h3>
            <p>å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡åªåœ¨å‡½æ•°å†…éƒ¨å¯è§ï¼š</p>
            <pre><code>function test() {
    const x = 10;  // å±€éƒ¨å˜é‡
    console.log(x);
}
// console.log(x); // ReferenceError</code></pre>
            
            <h3>4.2 ä½œç”¨åŸŸé“¾</h3>
            <p>å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼š</p>
            <pre><code>const global = 'global';

function outer() {
    const outerVar = 'outer';
    
    function inner() {
        const innerVar = 'inner';
        console.log(global, outerVar, innerVar);
    }
    
    inner();
}

outer();</code></pre>
            
            <h3>4.3 å—çº§ä½œç”¨åŸŸï¼ˆES6ï¼‰</h3>
            <p>let å’Œ const åˆ›å»ºå—çº§ä½œç”¨åŸŸï¼š</p>
            <pre><code>function test() {
    if (true) {
        let x = 10;
        const y = 20;
    }
    // console.log(x); // ReferenceError
}</code></pre>
            
            <h2>äº”ã€ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰</h2>
            
            <h3>5.1 åŸºæœ¬è¯­æ³•</h3>
            <pre><code>(function() {
    console.log('IIFE');
})();

// æˆ–
(function() {
    console.log('IIFE');
}());</code></pre>
            
            <h3>5.2 ä½¿ç”¨åœºæ™¯</h3>
            <ul>
                <li>åˆ›å»ºç§æœ‰ä½œç”¨åŸŸ</li>
                <li>é¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´</li>
                <li>æ¨¡å—æ¨¡å¼çš„åŸºç¡€</li>
            </ul>
            
            <h3>5.3 å¸¦å‚æ•°çš„ IIFE</h3>
            <pre><code>(function(name) {
    console.log(`Hello, ${name}!`);
})('Alice');</code></pre>
            
            <h2>å…­ã€å‡½æ•°ä½œä¸ºå€¼</h2>
            
            <h3>6.1 èµ‹å€¼ç»™å˜é‡</h3>
            <pre><code>const myFunc = function() { ... };</code></pre>
            
            <h3>6.2 ä½œä¸ºå‚æ•°ä¼ é€’</h3>
            <pre><code>function execute(callback) {
    callback();
}

execute(function() {
    console.log('Callback executed');
});</code></pre>
            
            <h3>6.3 ä½œä¸ºè¿”å›å€¼</h3>
            <pre><code>function createMultiplier(factor) {
    return function(number) {
        return number * factor;
    };
}

const double = createMultiplier(2);
console.log(double(5)); // 10</code></pre>
            
            <h2>ä¸ƒã€å‡½æ•°å±æ€§å’Œæ–¹æ³•</h2>
            
            <h3>7.1 name å±æ€§</h3>
            <pre><code>function foo() {}
console.log(foo.name); // "foo"

const bar = function() {};
console.log(bar.name); // "bar"</code></pre>
            
            <h3>7.2 length å±æ€§</h3>
            <p>è¿”å›å½¢å‚æ•°é‡ï¼ˆä¸åŒ…æ‹¬å‰©ä½™å‚æ•°ï¼‰ï¼š</p>
            <pre><code>function test(a, b, c) {}
console.log(test.length); // 3</code></pre>
            
            <h3>7.3 call() æ–¹æ³•</h3>
            <pre><code>function greet(greeting) {
    return `${greeting}, ${this.name}!`;
}

greet.call({ name: 'Alice' }, 'Hello'); // "Hello, Alice!"</code></pre>
            
            <h3>7.4 apply() æ–¹æ³•</h3>
            <pre><code>function greet(greeting, punctuation) {
    return `${greeting}, ${this.name}${punctuation}`;
}

greet.apply({ name: 'Bob' }, ['Hi', '!']); // "Hi, Bob!"</code></pre>
            
            <h3>7.5 bind() æ–¹æ³•</h3>
            <pre><code>function greet() {
    return `Hello, ${this.name}!`;
}

const boundGreet = greet.bind({ name: 'Charlie' });
boundGreet(); // "Hello, Charlie!"</code></pre>
            
            <h2>å…«ã€çº¯å‡½æ•°</h2>
            
            <h3>8.1 ä»€ä¹ˆæ˜¯çº¯å‡½æ•°</h3>
            <div class="info">
                <strong>çº¯å‡½æ•°ç‰¹å¾ï¼š</strong>
                <ul>
                    <li>ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡º</li>
                    <li>æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆä¸ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼‰</li>
                </ul>
            </div>
            
            <h3>8.2 çº¯å‡½æ•°ç¤ºä¾‹</h3>
            <pre><code>// çº¯å‡½æ•°
function add(a, b) {
    return a + b;
}

// éçº¯å‡½æ•°ï¼ˆæœ‰å‰¯ä½œç”¨ï¼‰
let count = 0;
function increment() {
    count++;  // ä¿®æ”¹å¤–éƒ¨çŠ¶æ€
    return count;
}</code></pre>
            
            <h2>ä¹ã€æœ€ä½³å®è·µ</h2>
            
            <div class="tip">
                <ol>
                    <li><strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹</li>
                    <li><strong>å‚æ•°æ•°é‡</strong>ï¼šæ§åˆ¶åœ¨ 3 ä¸ªä»¥å†…ï¼Œå¤šäº†ä½¿ç”¨å¯¹è±¡</li>
                    <li><strong>å‘½å</strong>ï¼šä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼Œæ¸…æ™°è¡¨è¾¾æ„å›¾</li>
                    <li><strong>é•¿åº¦</strong>ï¼šå‡½æ•°ä¸å®œè¿‡é•¿ï¼ˆå»ºè®® 20-30 è¡Œï¼‰</li>
                    <li><strong>é¿å…å‰¯ä½œç”¨</strong>ï¼šå°½é‡å†™çº¯å‡½æ•°</li>
                    <li><strong>æå‰è¿”å›</strong>ï¼šå‡å°‘åµŒå¥—</li>
                    <li><strong>ä½¿ç”¨é»˜è®¤å‚æ•°</strong>ï¼šä»£æ›¿ || è¿ç®—ç¬¦</li>
                </ol>
            </div>
            
            <h2>å‚è€ƒèµ„æ–™</h2>
            <ul>
                <li><a href="https://tc39.es/ecma262/#sec-function-definitions" target="_blank">ECMAScript - Function Definitions</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions" target="_blank">MDN - å‡½æ•°</a></li>
                <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions" target="_blank">MDN - å‡½æ•°å‚è€ƒ</a></li>
            </ul>
            
            <div class="nav-links">
                <a href="03-error-handling.html" class="nav-link prev">ä¸Šä¸€èŠ‚ï¼šå¼‚å¸¸å¤„ç†</a>
                <a href="../index.html" class="nav-link home">è¿”å›é¦–é¡µ</a>
                <a href="04-closure.html" class="nav-link next">ä¸‹ä¸€èŠ‚ï¼šé—­åŒ…åŸç†</a>
            </div>
        </div>
        
        <div class="code-panel">
            <h2 style="color: #60a5fa; margin-bottom: 1.5rem;">ğŸ’» äº¤äº’å¼ä»£ç ç¤ºä¾‹</h2>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 1ï¼šå‡½æ•°å£°æ˜ vs è¡¨è¾¾å¼</h3>
                <div class="code-block">
                    <pre><code>// å‡½æ•°å£°æ˜ - ä¼šæå‡
console.log('å‡½æ•°å£°æ˜:', greet1('Alice'));

function greet1(name) {
    return `Hello, ${name}!`;
}

// å‡½æ•°è¡¨è¾¾å¼ - ä¸ä¼šæå‡
try {
    console.log('å‡½æ•°è¡¨è¾¾å¼:', greet2('Bob'));
} catch (e) {
    console.log('é”™è¯¯:', e.message);
}

const greet2 = function(name) {
    return `Hi, ${name}!`;
};

console.log('å®šä¹‰åè°ƒç”¨:', greet2('Bob'));

// å‘½åå‡½æ•°è¡¨è¾¾å¼
const greet3 = function sayHello(name) {
    return `Hey, ${name}!`;
};
console.log('å‘½åå‡½æ•°è¡¨è¾¾å¼:', greet3('Charlie'));
console.log('å‡½æ•°åç§°:', greet3.name);</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 2ï¼šå‚æ•°é»˜è®¤å€¼ä¸å‰©ä½™å‚æ•°</h3>
                <div class="code-block">
                    <pre><code>// é»˜è®¤å‚æ•°
function greet(name = 'Guest', greeting = 'Hello') {
    return `${greeting}, ${name}!`;
}

console.log('æ— å‚æ•°:', greet());
console.log('ä¸€ä¸ªå‚æ•°:', greet('Alice'));
console.log('ä¸¤ä¸ªå‚æ•°:', greet('Bob', 'Hi'));

// å‰©ä½™å‚æ•°
function sum(...numbers) {
    console.log('numbers æ˜¯æ•°ç»„:', Array.isArray(numbers));
    return numbers.reduce((acc, cur) => acc + cur, 0);
}

console.log('\nsum(1, 2, 3):', sum(1, 2, 3));
console.log('sum(1, 2, 3, 4, 5):', sum(1, 2, 3, 4, 5));

// ç»“åˆæ™®é€šå‚æ•°å’Œå‰©ä½™å‚æ•°
function multiply(factor, ...numbers) {
    return numbers.map(n => n * factor);
}

console.log('\nmultiply(2, 1, 2, 3):', multiply(2, 1, 2, 3));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 3ï¼šä½œç”¨åŸŸé“¾</h3>
                <div class="code-block">
                    <pre><code>// å…¨å±€ä½œç”¨åŸŸ
const globalVar = 'global';

function outer() {
    const outerVar = 'outer';
    console.log('outer å‡½æ•°ä¸­:');
    console.log('  globalVar:', globalVar);
    console.log('  outerVar:', outerVar);
    
    function inner() {
        const innerVar = 'inner';
        console.log('\ninner å‡½æ•°ä¸­:');
        console.log('  globalVar:', globalVar);
        console.log('  outerVar:', outerVar);
        console.log('  innerVar:', innerVar);
    }
    
    inner();
    
    // inner çš„å˜é‡åœ¨ outer ä¸­ä¸å¯è§
    try {
        console.log(innerVar);
    } catch (e) {
        console.log('\nouter ä¸­è®¿é—® innerVar å¤±è´¥:', e.message);
    }
}

outer();</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 4ï¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰</h3>
                <div class="code-block">
                    <pre><code>// åŸºæœ¬ IIFE
(function() {
    console.log('IIFE æ‰§è¡Œ');
})();

// å¸¦å‚æ•°çš„ IIFE
(function(name) {
    console.log(`Hello, ${name}!`);
})('Alice');

// è¿”å›å€¼çš„ IIFE
const result = (function() {
    const privateVar = 'private';
    return {
        getPrivate: function() {
            return privateVar;
        }
    };
})();

console.log('ç§æœ‰å˜é‡:', result.getPrivate());

// åˆ›å»ºæ¨¡å—
const module = (function() {
    let count = 0;
    
    return {
        increment: function() {
            count++;
            return count;
        },
        getCount: function() {
            return count;
        }
    };
})();

console.log('\næ¨¡å—ä½¿ç”¨:');
console.log('increment:', module.increment());
console.log('increment:', module.increment());
console.log('getCount:', module.getCount());</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 5ï¼šå‡½æ•°ä½œä¸ºå€¼</h3>
                <div class="code-block">
                    <pre><code>// ä½œä¸ºå‚æ•°ä¼ é€’
function execute(operation, a, b) {
    return operation(a, b);
}

const add = (x, y) => x + y;
const multiply = (x, y) => x * y;

console.log('execute(add, 3, 4):', execute(add, 3, 4));
console.log('execute(multiply, 3, 4):', execute(multiply, 3, 4));

// ä½œä¸ºè¿”å›å€¼
function createGreeter(greeting) {
    return function(name) {
        return `${greeting}, ${name}!`;
    };
}

const sayHello = createGreeter('Hello');
const sayHi = createGreeter('Hi');

console.log('\nsayHello("Alice"):', sayHello('Alice'));
console.log('sayHi("Bob"):', sayHi('Bob'));

// æ•°ç»„ä¸­çš„å‡½æ•°
const operations = [
    (x) => x + 1,
    (x) => x * 2,
    (x) => x ** 2
];

const num = 5;
console.log('\nå¯¹ 5 åº”ç”¨æ“ä½œ:');
operations.forEach((op, i) => {
    console.log(`æ“ä½œ${i + 1}:`, op(num));
});</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
            
            <div class="code-example">
                <h3>ç¤ºä¾‹ 6ï¼šcallã€applyã€bind</h3>
                <div class="code-block">
                    <pre><code>const person = {
    name: 'Alice',
    age: 25
};

// call
function introduce(greeting, punctuation) {
    return `${greeting}, I'm ${this.name}, ${this.age} years old${punctuation}`;
}

console.log('call:');
console.log(introduce.call(person, 'Hello', '!'));

// apply
console.log('\napply:');
console.log(introduce.apply(person, ['Hi', '.']));

// bind
console.log('\nbind:');
const boundIntroduce = introduce.bind(person);
console.log(boundIntroduce('Hey', '~'));

// å®ç”¨ï¼šå€Ÿç”¨æ–¹æ³•
const obj1 = { value: 42 };
const obj2 = { 
    value: 100,
    getValue: function() {
        return this.value;
    }
};

console.log('\nå€Ÿç”¨æ–¹æ³•:');
console.log('obj2.getValue():', obj2.getValue());
console.log('obj2.getValue.call(obj1):', obj2.getValue.call(obj1));</code></pre>
                </div>
                <button class="run-btn">â–¶ è¿è¡Œä»£ç </button>
                <div class="output"></div>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/common.js"></script>
</body>
</html>
