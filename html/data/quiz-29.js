// 第29章：Web Workers - 面试题（精简版，10题）
window.htmlQuizData_29 = {
    config: { title: "Web Workers", icon: "⚙️", description: "测试你对Web Workers的理解", primaryColor: "#e96443", bgGradient: "linear-gradient(135deg, #e96443 0%, #904e95 100%)" },
    questions: [
        { difficulty: "easy", tags: ["基础"], question: "Web Workers的主要作用？", type: "single-choice", options: ["在后台线程运行JavaScript", "操作DOM", "存储", "网络请求"], correctAnswer: "A", explanation: { title: "Workers概述", sections: [{ title: "特点", code: '/* 独立线程，不阻塞主线程，无法访问DOM */\nconst worker = new Worker("worker.js");\nworker.postMessage("data");', content: "后台线程执行JS。" }] }, source: "Web Workers API" },
        { difficulty: "medium", tags: ["通信"], question: "Worker通信方式？", type: "multiple-choice", options: ["postMessage发送", "onmessage接收", "结构化克隆", "Transferable对象"], correctAnswer: ["A","B","C","D"], explanation: { title: "消息通信", sections: [{ title: "通信", code: 'worker.postMessage({data: 123});\nworker.onmessage = (e) => console.log(e.data);', content: "双向消息传递。" }] }, source: "Communication" },
        { difficulty: "medium", tags: ["限制"], question: "Worker中不能访问？", type: "multiple-choice", options: ["DOM", "window", "document", "parent"], correctAnswer: ["A","B","C","D"], explanation: { title: "访问限制", sections: [{ title: "可用API", code: '/* 可用：navigator, fetch, setTimeout */\n/* 不可用：DOM, window, document */', content: "有访问限制。" }] }, source: "Scope" },
        { difficulty: "hard", tags: ["Transferable"], question: "Transferable优势？", type: "single-choice", options: ["零拷贝传输", "自动序列化", "支持所有类型", "双向绑定"], correctAnswer: "A", explanation: { title: "高效传输", sections: [{ title: "转移所有权", code: 'const buf = new ArrayBuffer(1024);\nworker.postMessage(buf, [buf]);', content: "转移所有权。" }] }, source: "Transferable" },
        { difficulty: "medium", tags: ["导入"], question: "Worker加载脚本？", type: "single-choice", options: ["importScripts()", "import", "script标签", "fetch"], correctAnswer: "A", explanation: { title: "脚本加载", sections: [{ title: "导入", code: 'importScripts("utils.js", "math.js");', content: "同步导入。" }] }, source: "importScripts" },
        { difficulty: "medium", tags: ["Shared"], question: "Shared Worker特点？", type: "multiple-choice", options: ["多标签页共享", "port通信", "connect事件", "单例"], correctAnswer: ["A","B","C","D"], explanation: { title: "共享Worker", sections: [{ title: "Shared", code: 'const w = new SharedWorker("s.js");\nw.port.postMessage("hi");', content: "跨标签共享。" }] }, source: "Shared" },
        { difficulty: "hard", tags: ["应用"], question: "Worker适用场景？", type: "multiple-choice", options: ["大数据计算", "图像处理", "加密解密", "文件解析"], correctAnswer: ["A","B","C","D"], explanation: { title: "应用场景", sections: [{ title: "场景", code: '/* 耗时任务后台处理 */\nworker.postMessage({data: largeArray});', content: "计算密集型任务。" }] }, source: "Use Cases" },
        { difficulty: "easy", tags: ["终止"], question: "终止Worker方法？", type: "multiple-choice", options: ["worker.terminate()", "self.close()", "都可以", "自动"], correctAnswer: ["A","B"], explanation: { title: "终止", sections: [{ title: "两种方式", code: 'worker.terminate(); // 外部\nself.close(); // 内部', content: "内外部终止。" }] }, source: "Terminate" },
        { difficulty: "hard", tags: ["Worker池"], question: "实现Worker池？", type: "multiple-choice", options: ["创建多个Worker", "队列管理", "复用Worker", "限制并发"], correctAnswer: ["A","B","C","D"], explanation: { title: "Worker池", sections: [{ title: "线程池", code: 'class Pool {\n  constructor(size) {\n    this.workers = Array(size).fill(null).map(() => new Worker("w.js"));\n  }\n}', content: "管理多个Worker。" }] }, source: "Pool" },
        { difficulty: "medium", tags: ["调试"], question: "调试Worker？", type: "multiple-choice", options: ["DevTools", "console.log", "debugger", "Sources面板"], correctAnswer: ["A","B","C","D"], explanation: { title: "调试", sections: [{ title: "方法", code: 'console.log("info");\ndebugger;\n// Sources > Threads', content: "开发者工具。" }] }, source: "Debug" }
    ],
    navigation: { prev: { title: "离线应用", url: "28-offline-quiz.html" }, next: { title: "WebSocket", url: "30-websocket-quiz.html" } }
};
