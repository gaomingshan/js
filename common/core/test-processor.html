!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ContentProcessor æµ‹è¯•</title>
</head>
<body>
    <h1>ContentProcessor æµ‹è¯•</h1>
    <div id="output"></div>

    <script src="./content-processor.js"></script>
    <script>
        const output = document.getElementById('output');
        
        try {
            // æµ‹è¯•1ï¼šæ£€æŸ¥ContentProcessoræ˜¯å¦å®šä¹‰
            if (typeof ContentProcessor === 'undefined') {
                output.innerHTML = '<p style="color: red;">âŒ ContentProcessoræœªå®šä¹‰</p>';
                throw new Error('ContentProcessoræœªå®šä¹‰');
            }
            
            output.innerHTML += '<p style="color: green;">âœ… ContentProcessorå·²å®šä¹‰</p>';
            
            // æµ‹è¯•2ï¼šåˆ›å»ºå®ä¾‹
            const processor = new ContentProcessor();
            output.innerHTML += '<p style="color: green;">âœ… ContentProcessorå®ä¾‹åˆ›å»ºæˆåŠŸ</p>';
            
            // æµ‹è¯•3ï¼šæµ‹è¯•bashå¤„ç†
            const bashCode = String.raw`#!/bin/bash
TIME=$(pnpm install)
if [ $TIME -gt 60 ]; then
    echo "Slow: ${TIME}s"
fi`;
            
            const processed = processor.process(bashCode, 'bash');
            output.innerHTML += '<p style="color: green;">âœ… Bashä»£ç å¤„ç†æˆåŠŸ</p>';
            output.innerHTML += '<pre style="background: #f5f5f5; padding: 10px;">' + processed + '</pre>';
            
            // æµ‹è¯•4ï¼šæµ‹è¯•JavaScriptå¤„ç†
            const jsCode = String.raw`const name = "test";
console.log(\`Hello \${name}\`);`;
            
            const processedJs = processor.process(jsCode, 'javascript');
            output.innerHTML += '<p style="color: green;">âœ… JavaScriptä»£ç å¤„ç†æˆåŠŸ</p>';
            output.innerHTML += '<pre style="background: #f5f5f5; padding: 10px;">' + processedJs + '</pre>';
            
            output.innerHTML += '<h2 style="color: green;">ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼</h2>';
            
        } catch (error) {
            output.innerHTML += '<p style="color: red;">âŒ é”™è¯¯: ' + error.message + '</p>';
            console.error(error);
        }
    </script>
</body>
</html>
